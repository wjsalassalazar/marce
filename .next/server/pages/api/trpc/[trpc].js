"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/trpc/[trpc]";
exports.ids = ["pages/api/trpc/[trpc]"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@trpc/server":
/*!*******************************!*\
  !*** external "@trpc/server" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("@trpc/server");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/email":
/*!********************************************!*\
  !*** external "next-auth/providers/email" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/email");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "superjson":
/*!****************************!*\
  !*** external "superjson" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("superjson");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.dev.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.dev.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar transformTRPCResponse = __webpack_require__(/*! ../../../dist/transformTRPCResponse-36a41418.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js\");\nvar nodeHTTPRequestHandler = __webpack_require__(/*! ../../../dist/nodeHTTPRequestHandler-9a93c255.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/nodeHTTPRequestHandler-9a93c255.cjs.dev.js\");\n__webpack_require__(/*! url */ \"url\");\n__webpack_require__(/*! ../../../dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js\");\n__webpack_require__(/*! ../../../dist/codes-130e62df.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/codes-130e62df.cjs.dev.js\");\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createNextApiHandler(opts) {\n  return async (req, res) => {\n    function getPath() {\n      if (typeof req.query.trpc === 'string') {\n        return req.query.trpc;\n      }\n\n      if (Array.isArray(req.query.trpc)) {\n        return req.query.trpc.join('/');\n      }\n\n      return null;\n    }\n\n    const path = getPath();\n\n    if (path === null) {\n      const error = opts.router.getErrorShape({\n        error: new transformTRPCResponse.TRPCError({\n          message: 'Query \"trpc\" not found - is the file named `[trpc]`.ts or `[...trpc].ts`?',\n          code: 'INTERNAL_SERVER_ERROR'\n        }),\n        type: 'unknown',\n        ctx: undefined,\n        path: undefined,\n        input: undefined\n      });\n      const json = {\n        id: -1,\n        error\n      };\n      res.statusCode = 500;\n      res.json(json);\n      return;\n    }\n\n    await nodeHTTPRequestHandler.nodeHTTPRequestHandler({ ...opts,\n      req,\n      res,\n      path\n    });\n  };\n}\n\nexports.createNextApiHandler = createNextApiHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2FkYXB0ZXJzL25leHQvZGlzdC90cnBjLXNlcnZlci1hZGFwdGVycy1uZXh0LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCw0QkFBNEIsbUJBQU8sQ0FBQyxpSkFBeUQ7QUFDN0YsNkJBQTZCLG1CQUFPLENBQUMsbUpBQTBEO0FBQy9GLG1CQUFPLENBQUMsZ0JBQUs7QUFDYixtQkFBTyxDQUFDLDZJQUF1RDtBQUMvRCxtQkFBTyxDQUFDLGlIQUF5Qzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSw0QkFBNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLW5ldy8uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvbmV4dC9kaXN0L3RycGMtc2VydmVyLWFkYXB0ZXJzLW5leHQuY2pzLmRldi5qcz8wYWJhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIHRyYW5zZm9ybVRSUENSZXNwb25zZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2Rpc3QvdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlLTM2YTQxNDE4LmNqcy5kZXYuanMnKTtcbnZhciBub2RlSFRUUFJlcXVlc3RIYW5kbGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vZGlzdC9ub2RlSFRUUFJlcXVlc3RIYW5kbGVyLTlhOTNjMjU1LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ3VybCcpO1xucmVxdWlyZSgnLi4vLi4vLi4vZGlzdC9yZXNvbHZlSFRUUFJlc3BvbnNlLWFiMDFlNGI5LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJy4uLy4uLy4uL2Rpc3QvY29kZXMtMTMwZTYyZGYuY2pzLmRldi5qcycpO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5mdW5jdGlvbiBjcmVhdGVOZXh0QXBpSGFuZGxlcihvcHRzKSB7XG4gIHJldHVybiBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBmdW5jdGlvbiBnZXRQYXRoKCkge1xuICAgICAgaWYgKHR5cGVvZiByZXEucXVlcnkudHJwYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHJlcS5xdWVyeS50cnBjO1xuICAgICAgfVxuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXEucXVlcnkudHJwYykpIHtcbiAgICAgICAgcmV0dXJuIHJlcS5xdWVyeS50cnBjLmpvaW4oJy8nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcGF0aCA9IGdldFBhdGgoKTtcblxuICAgIGlmIChwYXRoID09PSBudWxsKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG9wdHMucm91dGVyLmdldEVycm9yU2hhcGUoe1xuICAgICAgICBlcnJvcjogbmV3IHRyYW5zZm9ybVRSUENSZXNwb25zZS5UUlBDRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6ICdRdWVyeSBcInRycGNcIiBub3QgZm91bmQgLSBpcyB0aGUgZmlsZSBuYW1lZCBgW3RycGNdYC50cyBvciBgWy4uLnRycGNdLnRzYD8nLFxuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiAndW5rbm93bicsXG4gICAgICAgIGN0eDogdW5kZWZpbmVkLFxuICAgICAgICBwYXRoOiB1bmRlZmluZWQsXG4gICAgICAgIGlucHV0OiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgICAgY29uc3QganNvbiA9IHtcbiAgICAgICAgaWQ6IC0xLFxuICAgICAgICBlcnJvclxuICAgICAgfTtcbiAgICAgIHJlcy5zdGF0dXNDb2RlID0gNTAwO1xuICAgICAgcmVzLmpzb24oanNvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgbm9kZUhUVFBSZXF1ZXN0SGFuZGxlci5ub2RlSFRUUFJlcXVlc3RIYW5kbGVyKHsgLi4ub3B0cyxcbiAgICAgIHJlcSxcbiAgICAgIHJlcyxcbiAgICAgIHBhdGhcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0cy5jcmVhdGVOZXh0QXBpSGFuZGxlciA9IGNyZWF0ZU5leHRBcGlIYW5kbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.dev.js\n");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.js ***!
  \***************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./trpc-server-adapters-next.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2FkYXB0ZXJzL25leHQvZGlzdC90cnBjLXNlcnZlci1hZGFwdGVycy1uZXh0LmNqcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsK0tBQWtFO0FBQ3BFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2FkYXB0ZXJzL25leHQvZGlzdC90cnBjLXNlcnZlci1hZGFwdGVycy1uZXh0LmNqcy5qcz9kOGRhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3RycGMtc2VydmVyLWFkYXB0ZXJzLW5leHQuY2pzLnByb2QuanNcIik7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3RycGMtc2VydmVyLWFkYXB0ZXJzLW5leHQuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.js\n");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/dist/codes-130e62df.cjs.dev.js":
/*!******************************************************************!*\
  !*** ./node_modules/@trpc/server/dist/codes-130e62df.cjs.dev.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nfunction invert(obj) {\n  const newObj = Object.create(null);\n\n  for (const key in obj) {\n    const v = obj[key];\n    newObj[v] = key;\n  }\n\n  return newObj;\n}\n\n/**\n * JSON-RPC 2.0 Error codes\n *\n * `-32000` to `-32099` are reserved for implementation-defined server-errors.\n * For tRPC we're copying the last digits of HTTP 4XX errors.\n */\n\nconst TRPC_ERROR_CODES_BY_KEY = {\n  /**\n   * Invalid JSON was received by the server.\n   * An error occurred on the server while parsing the JSON text.\n   */\n  PARSE_ERROR: -32700,\n\n  /**\n   * The JSON sent is not a valid Request object.\n   */\n  BAD_REQUEST: -32600,\n  // 400\n\n  /**\n   * Internal JSON-RPC error.\n   */\n  INTERNAL_SERVER_ERROR: -32603,\n  // Implementation specific errors\n  UNAUTHORIZED: -32001,\n  // 401\n  FORBIDDEN: -32003,\n  // 403\n  NOT_FOUND: -32004,\n  // 404\n  METHOD_NOT_SUPPORTED: -32005,\n  // 405\n  TIMEOUT: -32008,\n  // 408\n  CONFLICT: -32009,\n  // 409\n  PRECONDITION_FAILED: -32012,\n  // 412\n  PAYLOAD_TOO_LARGE: -32013,\n  // 413\n  CLIENT_CLOSED_REQUEST: -32099 // 499\n\n};\nconst TRPC_ERROR_CODES_BY_NUMBER = /*#__PURE__*/invert(TRPC_ERROR_CODES_BY_KEY);\n\nexports.TRPC_ERROR_CODES_BY_KEY = TRPC_ERROR_CODES_BY_KEY;\nexports.TRPC_ERROR_CODES_BY_NUMBER = TRPC_ERROR_CODES_BY_NUMBER;\nexports.invert = invert;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvY29kZXMtMTMwZTYyZGYuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CLGtDQUFrQztBQUNsQyxjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvY29kZXMtMTMwZTYyZGYuY2pzLmRldi5qcz83MDFjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaW52ZXJ0KG9iaikge1xuICBjb25zdCBuZXdPYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgIGNvbnN0IHYgPSBvYmpba2V5XTtcbiAgICBuZXdPYmpbdl0gPSBrZXk7XG4gIH1cblxuICByZXR1cm4gbmV3T2JqO1xufVxuXG4vKipcbiAqIEpTT04tUlBDIDIuMCBFcnJvciBjb2Rlc1xuICpcbiAqIGAtMzIwMDBgIHRvIGAtMzIwOTlgIGFyZSByZXNlcnZlZCBmb3IgaW1wbGVtZW50YXRpb24tZGVmaW5lZCBzZXJ2ZXItZXJyb3JzLlxuICogRm9yIHRSUEMgd2UncmUgY29weWluZyB0aGUgbGFzdCBkaWdpdHMgb2YgSFRUUCA0WFggZXJyb3JzLlxuICovXG5cbmNvbnN0IFRSUENfRVJST1JfQ09ERVNfQllfS0VZID0ge1xuICAvKipcbiAgICogSW52YWxpZCBKU09OIHdhcyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICAgKiBBbiBlcnJvciBvY2N1cnJlZCBvbiB0aGUgc2VydmVyIHdoaWxlIHBhcnNpbmcgdGhlIEpTT04gdGV4dC5cbiAgICovXG4gIFBBUlNFX0VSUk9SOiAtMzI3MDAsXG5cbiAgLyoqXG4gICAqIFRoZSBKU09OIHNlbnQgaXMgbm90IGEgdmFsaWQgUmVxdWVzdCBvYmplY3QuXG4gICAqL1xuICBCQURfUkVRVUVTVDogLTMyNjAwLFxuICAvLyA0MDBcblxuICAvKipcbiAgICogSW50ZXJuYWwgSlNPTi1SUEMgZXJyb3IuXG4gICAqL1xuICBJTlRFUk5BTF9TRVJWRVJfRVJST1I6IC0zMjYwMyxcbiAgLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWMgZXJyb3JzXG4gIFVOQVVUSE9SSVpFRDogLTMyMDAxLFxuICAvLyA0MDFcbiAgRk9SQklEREVOOiAtMzIwMDMsXG4gIC8vIDQwM1xuICBOT1RfRk9VTkQ6IC0zMjAwNCxcbiAgLy8gNDA0XG4gIE1FVEhPRF9OT1RfU1VQUE9SVEVEOiAtMzIwMDUsXG4gIC8vIDQwNVxuICBUSU1FT1VUOiAtMzIwMDgsXG4gIC8vIDQwOFxuICBDT05GTElDVDogLTMyMDA5LFxuICAvLyA0MDlcbiAgUFJFQ09ORElUSU9OX0ZBSUxFRDogLTMyMDEyLFxuICAvLyA0MTJcbiAgUEFZTE9BRF9UT09fTEFSR0U6IC0zMjAxMyxcbiAgLy8gNDEzXG4gIENMSUVOVF9DTE9TRURfUkVRVUVTVDogLTMyMDk5IC8vIDQ5OVxuXG59O1xuY29uc3QgVFJQQ19FUlJPUl9DT0RFU19CWV9OVU1CRVIgPSAvKiNfX1BVUkVfXyovaW52ZXJ0KFRSUENfRVJST1JfQ09ERVNfQllfS0VZKTtcblxuZXhwb3J0cy5UUlBDX0VSUk9SX0NPREVTX0JZX0tFWSA9IFRSUENfRVJST1JfQ09ERVNfQllfS0VZO1xuZXhwb3J0cy5UUlBDX0VSUk9SX0NPREVTX0JZX05VTUJFUiA9IFRSUENfRVJST1JfQ09ERVNfQllfTlVNQkVSO1xuZXhwb3J0cy5pbnZlcnQgPSBpbnZlcnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/dist/codes-130e62df.cjs.dev.js\n");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/dist/nodeHTTPRequestHandler-9a93c255.cjs.dev.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@trpc/server/dist/nodeHTTPRequestHandler-9a93c255.cjs.dev.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nvar url = __webpack_require__(/*! url */ \"url\");\nvar resolveHTTPResponse = __webpack_require__(/*! ./resolveHTTPResponse-ab01e4b9.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js\");\nvar transformTRPCResponse = __webpack_require__(/*! ./transformTRPCResponse-36a41418.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js\");\n\nasync function getPostBody({\n  req,\n  maxBodySize\n}) {\n  return new Promise(resolve => {\n    if ('body' in req) {\n      resolve({\n        ok: true,\n        data: req.body\n      });\n      return;\n    }\n\n    let body = '';\n    let hasBody = false;\n    req.on('data', function (data) {\n      body += data;\n      hasBody = true;\n\n      if (typeof maxBodySize === 'number' && body.length > maxBodySize) {\n        resolve({\n          ok: false,\n          error: new transformTRPCResponse.TRPCError({\n            code: 'PAYLOAD_TOO_LARGE'\n          })\n        });\n        req.socket.destroy();\n      }\n    });\n    req.on('end', () => {\n      resolve({\n        ok: true,\n        data: hasBody ? body : undefined\n      });\n    });\n  });\n}\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nresolveHTTPResponse.assertNotBrowser();\nasync function nodeHTTPRequestHandler(opts) {\n  var _opts$teardown;\n\n  const createContext = async function _createContext() {\n    var _opts$createContext;\n\n    return await ((_opts$createContext = opts.createContext) === null || _opts$createContext === void 0 ? void 0 : _opts$createContext.call(opts, opts));\n  };\n\n  const {\n    path,\n    router\n  } = opts;\n  const bodyResult = await getPostBody(opts);\n  const query = opts.req.query ? new url.URLSearchParams(opts.req.query) : new url.URLSearchParams(opts.req.url.split('?')[1]);\n  const req = {\n    method: opts.req.method,\n    headers: opts.req.headers,\n    query,\n    body: bodyResult.ok ? bodyResult.data : undefined\n  };\n  const result = await resolveHTTPResponse.resolveHTTPResponse({\n    batching: opts.batching,\n    responseMeta: opts.responseMeta,\n    path,\n    createContext,\n    router,\n    req,\n    error: bodyResult.ok ? null : bodyResult.error,\n\n    onError(o) {\n      var _opts$onError;\n\n      opts === null || opts === void 0 ? void 0 : (_opts$onError = opts.onError) === null || _opts$onError === void 0 ? void 0 : _opts$onError.call(opts, { ...o,\n        req: opts.req\n      });\n    }\n\n  });\n  const {\n    res\n  } = opts;\n\n  if ('status' in result && (!res.statusCode || res.statusCode === 200)) {\n    res.statusCode = result.status;\n  }\n\n  for (const [key, value] of Object.entries((_result$headers = result.headers) !== null && _result$headers !== void 0 ? _result$headers : {})) {\n    var _result$headers;\n\n    if (typeof value === 'undefined') {\n      continue;\n    }\n\n    res.setHeader(key, value);\n  }\n\n  res.end(result.body);\n  await ((_opts$teardown = opts.teardown) === null || _opts$teardown === void 0 ? void 0 : _opts$teardown.call(opts));\n}\n\nexports.nodeHTTPRequestHandler = nodeHTTPRequestHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3Qvbm9kZUhUVFBSZXF1ZXN0SGFuZGxlci05YTkzYzI1NS5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQyxnQkFBSztBQUN2QiwwQkFBMEIsbUJBQU8sQ0FBQyxpSUFBMkM7QUFDN0UsNEJBQTRCLG1CQUFPLENBQUMscUlBQTZDOztBQUVqRjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw0SkFBNEo7QUFDNUo7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQSw0SUFBNEk7QUFDNUk7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDhCQUE4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L25vZGVIVFRQUmVxdWVzdEhhbmRsZXItOWE5M2MyNTUuY2pzLmRldi5qcz9hYTc1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIHJlc29sdmVIVFRQUmVzcG9uc2UgPSByZXF1aXJlKCcuL3Jlc29sdmVIVFRQUmVzcG9uc2UtYWIwMWU0YjkuY2pzLmRldi5qcycpO1xudmFyIHRyYW5zZm9ybVRSUENSZXNwb25zZSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlLTM2YTQxNDE4LmNqcy5kZXYuanMnKTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0UG9zdEJvZHkoe1xuICByZXEsXG4gIG1heEJvZHlTaXplXG59KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBpZiAoJ2JvZHknIGluIHJlcSkge1xuICAgICAgcmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBkYXRhOiByZXEuYm9keVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGJvZHkgPSAnJztcbiAgICBsZXQgaGFzQm9keSA9IGZhbHNlO1xuICAgIHJlcS5vbignZGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBib2R5ICs9IGRhdGE7XG4gICAgICBoYXNCb2R5ID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiBtYXhCb2R5U2l6ZSA9PT0gJ251bWJlcicgJiYgYm9keS5sZW5ndGggPiBtYXhCb2R5U2l6ZSkge1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyB0cmFuc2Zvcm1UUlBDUmVzcG9uc2UuVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdQQVlMT0FEX1RPT19MQVJHRSdcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmVxLnNvY2tldC5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVxLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICByZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGRhdGE6IGhhc0JvZHkgPyBib2R5IDogdW5kZWZpbmVkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbnJlc29sdmVIVFRQUmVzcG9uc2UuYXNzZXJ0Tm90QnJvd3NlcigpO1xuYXN5bmMgZnVuY3Rpb24gbm9kZUhUVFBSZXF1ZXN0SGFuZGxlcihvcHRzKSB7XG4gIHZhciBfb3B0cyR0ZWFyZG93bjtcblxuICBjb25zdCBjcmVhdGVDb250ZXh0ID0gYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZUNvbnRleHQoKSB7XG4gICAgdmFyIF9vcHRzJGNyZWF0ZUNvbnRleHQ7XG5cbiAgICByZXR1cm4gYXdhaXQgKChfb3B0cyRjcmVhdGVDb250ZXh0ID0gb3B0cy5jcmVhdGVDb250ZXh0KSA9PT0gbnVsbCB8fCBfb3B0cyRjcmVhdGVDb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0cyRjcmVhdGVDb250ZXh0LmNhbGwob3B0cywgb3B0cykpO1xuICB9O1xuXG4gIGNvbnN0IHtcbiAgICBwYXRoLFxuICAgIHJvdXRlclxuICB9ID0gb3B0cztcbiAgY29uc3QgYm9keVJlc3VsdCA9IGF3YWl0IGdldFBvc3RCb2R5KG9wdHMpO1xuICBjb25zdCBxdWVyeSA9IG9wdHMucmVxLnF1ZXJ5ID8gbmV3IHVybC5VUkxTZWFyY2hQYXJhbXMob3B0cy5yZXEucXVlcnkpIDogbmV3IHVybC5VUkxTZWFyY2hQYXJhbXMob3B0cy5yZXEudXJsLnNwbGl0KCc/JylbMV0pO1xuICBjb25zdCByZXEgPSB7XG4gICAgbWV0aG9kOiBvcHRzLnJlcS5tZXRob2QsXG4gICAgaGVhZGVyczogb3B0cy5yZXEuaGVhZGVycyxcbiAgICBxdWVyeSxcbiAgICBib2R5OiBib2R5UmVzdWx0Lm9rID8gYm9keVJlc3VsdC5kYXRhIDogdW5kZWZpbmVkXG4gIH07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc29sdmVIVFRQUmVzcG9uc2UucmVzb2x2ZUhUVFBSZXNwb25zZSh7XG4gICAgYmF0Y2hpbmc6IG9wdHMuYmF0Y2hpbmcsXG4gICAgcmVzcG9uc2VNZXRhOiBvcHRzLnJlc3BvbnNlTWV0YSxcbiAgICBwYXRoLFxuICAgIGNyZWF0ZUNvbnRleHQsXG4gICAgcm91dGVyLFxuICAgIHJlcSxcbiAgICBlcnJvcjogYm9keVJlc3VsdC5vayA/IG51bGwgOiBib2R5UmVzdWx0LmVycm9yLFxuXG4gICAgb25FcnJvcihvKSB7XG4gICAgICB2YXIgX29wdHMkb25FcnJvcjtcblxuICAgICAgb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdHMkb25FcnJvciA9IG9wdHMub25FcnJvcikgPT09IG51bGwgfHwgX29wdHMkb25FcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdHMkb25FcnJvci5jYWxsKG9wdHMsIHsgLi4ubyxcbiAgICAgICAgcmVxOiBvcHRzLnJlcVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuICBjb25zdCB7XG4gICAgcmVzXG4gIH0gPSBvcHRzO1xuXG4gIGlmICgnc3RhdHVzJyBpbiByZXN1bHQgJiYgKCFyZXMuc3RhdHVzQ29kZSB8fCByZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSkge1xuICAgIHJlcy5zdGF0dXNDb2RlID0gcmVzdWx0LnN0YXR1cztcbiAgfVxuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKChfcmVzdWx0JGhlYWRlcnMgPSByZXN1bHQuaGVhZGVycykgIT09IG51bGwgJiYgX3Jlc3VsdCRoZWFkZXJzICE9PSB2b2lkIDAgPyBfcmVzdWx0JGhlYWRlcnMgOiB7fSkpIHtcbiAgICB2YXIgX3Jlc3VsdCRoZWFkZXJzO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHJlcy5zZXRIZWFkZXIoa2V5LCB2YWx1ZSk7XG4gIH1cblxuICByZXMuZW5kKHJlc3VsdC5ib2R5KTtcbiAgYXdhaXQgKChfb3B0cyR0ZWFyZG93biA9IG9wdHMudGVhcmRvd24pID09PSBudWxsIHx8IF9vcHRzJHRlYXJkb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0cyR0ZWFyZG93bi5jYWxsKG9wdHMpKTtcbn1cblxuZXhwb3J0cy5ub2RlSFRUUFJlcXVlc3RIYW5kbGVyID0gbm9kZUhUVFBSZXF1ZXN0SGFuZGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/dist/nodeHTTPRequestHandler-9a93c255.cjs.dev.js\n");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@trpc/server/dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nvar transformTRPCResponse = __webpack_require__(/*! ./transformTRPCResponse-36a41418.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js\");\nvar codes = __webpack_require__(/*! ./codes-130e62df.cjs.dev.js */ \"(api)/./node_modules/@trpc/server/dist/codes-130e62df.cjs.dev.js\");\n\n/* istanbul ignore file */\nfunction assertNotBrowser() {\n  if (typeof window !== 'undefined' && \"development\" !== 'test' && process.env.JEST_WORKER_ID === undefined) {\n    throw new Error('Imported server-only code in the browser');\n  }\n}\n\nconst TRPC_ERROR_CODES_BY_NUMBER = /*#__PURE__*/codes.invert(codes.TRPC_ERROR_CODES_BY_KEY);\nconst JSONRPC2_TO_HTTP_CODE = {\n  PARSE_ERROR: 400,\n  BAD_REQUEST: 400,\n  NOT_FOUND: 404,\n  INTERNAL_SERVER_ERROR: 500,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  TIMEOUT: 408,\n  CONFLICT: 409,\n  CLIENT_CLOSED_REQUEST: 499,\n  PRECONDITION_FAILED: 412,\n  PAYLOAD_TOO_LARGE: 413,\n  METHOD_NOT_SUPPORTED: 405\n};\n\nfunction getStatusCodeFromKey(code) {\n  var _JSONRPC2_TO_HTTP_COD;\n\n  return (_JSONRPC2_TO_HTTP_COD = JSONRPC2_TO_HTTP_CODE[code]) !== null && _JSONRPC2_TO_HTTP_COD !== void 0 ? _JSONRPC2_TO_HTTP_COD : 500;\n}\n\nfunction getHTTPStatusCode(json) {\n  const arr = Array.isArray(json) ? json : [json];\n  const httpStatuses = new Set(arr.map(res => {\n    if ('error' in res) {\n      const data = res.error.data;\n\n      if (typeof data.httpStatus === 'number') {\n        return data.httpStatus;\n      }\n\n      const code = TRPC_ERROR_CODES_BY_NUMBER[res.error.code];\n      return getStatusCodeFromKey(code);\n    }\n\n    return 200;\n  }));\n\n  if (httpStatuses.size !== 1) {\n    return 207;\n  }\n\n  const httpStatus = httpStatuses.values().next().value;\n  return httpStatus;\n}\nfunction getHTTPStatusCodeFromError(error) {\n  const {\n    code\n  } = error;\n  return getStatusCodeFromKey(code);\n}\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nconst HTTP_METHOD_PROCEDURE_TYPE_MAP = {\n  GET: 'query',\n  POST: 'mutation',\n  PATCH: 'subscription'\n};\n\nfunction getRawProcedureInputOrThrow(req) {\n  try {\n    if (req.method === 'GET') {\n      if (!req.query.has('input')) {\n        return undefined;\n      }\n\n      const raw = req.query.get('input');\n      return JSON.parse(raw);\n    }\n\n    return typeof req.body === 'string' ? JSON.parse(req.body) : req.body;\n  } catch (cause) {\n    throw new transformTRPCResponse.TRPCError({\n      code: 'PARSE_ERROR',\n      cause\n    });\n  }\n}\n\nasync function resolveHTTPResponse(opts) {\n  var _opts$batching$enable, _opts$batching, _HTTP_METHOD_PROCEDUR;\n\n  const {\n    createContext,\n    onError,\n    router,\n    req\n  } = opts;\n  const batchingEnabled = (_opts$batching$enable = (_opts$batching = opts.batching) === null || _opts$batching === void 0 ? void 0 : _opts$batching.enabled) !== null && _opts$batching$enable !== void 0 ? _opts$batching$enable : true;\n\n  if (req.method === 'HEAD') {\n    // can be used for lambda warmup\n    return {\n      status: 204\n    };\n  }\n\n  const type = (_HTTP_METHOD_PROCEDUR = HTTP_METHOD_PROCEDURE_TYPE_MAP[req.method]) !== null && _HTTP_METHOD_PROCEDUR !== void 0 ? _HTTP_METHOD_PROCEDUR : 'unknown';\n  let ctx = undefined;\n  let paths = undefined;\n  const isBatchCall = !!req.query.get('batch');\n\n  function endResponse(untransformedJSON, errors) {\n    var _opts$responseMeta, _opts$responseMeta2;\n\n    let status = getHTTPStatusCode(untransformedJSON);\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const meta = (_opts$responseMeta = (_opts$responseMeta2 = opts.responseMeta) === null || _opts$responseMeta2 === void 0 ? void 0 : _opts$responseMeta2.call(opts, {\n      ctx,\n      paths,\n      type,\n      data: Array.isArray(untransformedJSON) ? untransformedJSON : [untransformedJSON],\n      errors\n    })) !== null && _opts$responseMeta !== void 0 ? _opts$responseMeta : {};\n\n    for (const [key, value] of Object.entries((_meta$headers = meta.headers) !== null && _meta$headers !== void 0 ? _meta$headers : {})) {\n      var _meta$headers;\n\n      headers[key] = value;\n    }\n\n    if (meta.status) {\n      status = meta.status;\n    }\n\n    const transformedJSON = transformTRPCResponse.transformTRPCResponse(router, untransformedJSON);\n    const body = JSON.stringify(transformedJSON);\n    return {\n      body,\n      status,\n      headers\n    };\n  }\n\n  try {\n    if (opts.error) {\n      throw opts.error;\n    }\n\n    if (isBatchCall && !batchingEnabled) {\n      throw new Error(`Batching is not enabled on the server`);\n    }\n\n    if (type === 'unknown' || type === 'subscription') {\n      throw new transformTRPCResponse.TRPCError({\n        message: `Unexpected request method ${req.method}`,\n        code: 'METHOD_NOT_SUPPORTED'\n      });\n    }\n\n    const rawInput = getRawProcedureInputOrThrow(req);\n    paths = isBatchCall ? opts.path.split(',') : [opts.path];\n    ctx = await createContext();\n\n    const deserializeInputValue = rawValue => {\n      return typeof rawValue !== 'undefined' ? router._def.transformer.input.deserialize(rawValue) : rawValue;\n    };\n\n    const getInputs = () => {\n      if (!isBatchCall) {\n        return {\n          0: deserializeInputValue(rawInput)\n        };\n      }\n\n      if (rawInput == null || typeof rawInput !== 'object' || Array.isArray(rawInput)) {\n        throw new transformTRPCResponse.TRPCError({\n          code: 'BAD_REQUEST',\n          message: '\"input\" needs to be an object when doing a batch call'\n        });\n      }\n\n      const input = {};\n\n      for (const key in rawInput) {\n        const k = key;\n        const rawValue = rawInput[k];\n        const value = deserializeInputValue(rawValue);\n        input[k] = value;\n      }\n\n      return input;\n    };\n\n    const inputs = getInputs();\n    const rawResults = await Promise.all(paths.map(async (path, index) => {\n      const input = inputs[index];\n\n      try {\n        const output = await transformTRPCResponse.callProcedure({\n          ctx,\n          router,\n          path,\n          input,\n          type\n        });\n        return {\n          input,\n          path,\n          data: output\n        };\n      } catch (cause) {\n        const error = transformTRPCResponse.getErrorFromUnknown(cause);\n        onError === null || onError === void 0 ? void 0 : onError({\n          error,\n          path,\n          input,\n          ctx,\n          type: type,\n          req\n        });\n        return {\n          input,\n          path,\n          error\n        };\n      }\n    }));\n    const errors = rawResults.flatMap(obj => obj.error ? [obj.error] : []);\n    const resultEnvelopes = rawResults.map(obj => {\n      const {\n        path,\n        input\n      } = obj;\n\n      if (obj.error) {\n        const json = {\n          id: null,\n          error: router.getErrorShape({\n            error: obj.error,\n            type,\n            path,\n            input,\n            ctx\n          })\n        };\n        return json;\n      } else {\n        const json = {\n          id: null,\n          result: {\n            type: 'data',\n            data: obj.data\n          }\n        };\n        return json;\n      }\n    });\n    const result = isBatchCall ? resultEnvelopes : resultEnvelopes[0];\n    return endResponse(result, errors);\n  } catch (cause) {\n    // we get here if\n    // - batching is called when it's not enabled\n    // - `createContext()` throws\n    // - post body is too large\n    // - input deserialization fails\n    const error = transformTRPCResponse.getErrorFromUnknown(cause);\n    const json = {\n      id: null,\n      error: router.getErrorShape({\n        error,\n        type,\n        path: undefined,\n        input: undefined,\n        ctx\n      })\n    };\n    onError === null || onError === void 0 ? void 0 : onError({\n      error,\n      path: undefined,\n      input: undefined,\n      ctx,\n      type: type,\n      req\n    });\n    return endResponse(json, [error]);\n  }\n}\n\nexports.assertNotBrowser = assertNotBrowser;\nexports.getHTTPStatusCodeFromError = getHTTPStatusCodeFromError;\nexports.resolveHTTPResponse = resolveHTTPResponse;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvcmVzb2x2ZUhUVFBSZXNwb25zZS1hYjAxZTRiOS5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDRCQUE0QixtQkFBTyxDQUFDLHFJQUE2QztBQUNqRixZQUFZLG1CQUFPLENBQUMscUdBQTZCOztBQUVqRDtBQUNBO0FBQ0EsdUNBQXVDLGFBQW9CO0FBQzNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsc0lBQXNJO0FBQ3RJOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4Q0FBOEMsV0FBVztBQUN6RDtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QixrQ0FBa0M7QUFDbEMsMkJBQTJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvcmVzb2x2ZUhUVFBSZXNwb25zZS1hYjAxZTRiOS5janMuZGV2LmpzPzc0YTYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1UUlBDUmVzcG9uc2UtMzZhNDE0MTguY2pzLmRldi5qcycpO1xudmFyIGNvZGVzID0gcmVxdWlyZSgnLi9jb2Rlcy0xMzBlNjJkZi5janMuZGV2LmpzJyk7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5mdW5jdGlvbiBhc3NlcnROb3RCcm93c2VyKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJiBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbXBvcnRlZCBzZXJ2ZXItb25seSBjb2RlIGluIHRoZSBicm93c2VyJyk7XG4gIH1cbn1cblxuY29uc3QgVFJQQ19FUlJPUl9DT0RFU19CWV9OVU1CRVIgPSAvKiNfX1BVUkVfXyovY29kZXMuaW52ZXJ0KGNvZGVzLlRSUENfRVJST1JfQ09ERVNfQllfS0VZKTtcbmNvbnN0IEpTT05SUEMyX1RPX0hUVFBfQ09ERSA9IHtcbiAgUEFSU0VfRVJST1I6IDQwMCxcbiAgQkFEX1JFUVVFU1Q6IDQwMCxcbiAgTk9UX0ZPVU5EOiA0MDQsXG4gIElOVEVSTkFMX1NFUlZFUl9FUlJPUjogNTAwLFxuICBVTkFVVEhPUklaRUQ6IDQwMSxcbiAgRk9SQklEREVOOiA0MDMsXG4gIFRJTUVPVVQ6IDQwOCxcbiAgQ09ORkxJQ1Q6IDQwOSxcbiAgQ0xJRU5UX0NMT1NFRF9SRVFVRVNUOiA0OTksXG4gIFBSRUNPTkRJVElPTl9GQUlMRUQ6IDQxMixcbiAgUEFZTE9BRF9UT09fTEFSR0U6IDQxMyxcbiAgTUVUSE9EX05PVF9TVVBQT1JURUQ6IDQwNVxufTtcblxuZnVuY3Rpb24gZ2V0U3RhdHVzQ29kZUZyb21LZXkoY29kZSkge1xuICB2YXIgX0pTT05SUEMyX1RPX0hUVFBfQ09EO1xuXG4gIHJldHVybiAoX0pTT05SUEMyX1RPX0hUVFBfQ09EID0gSlNPTlJQQzJfVE9fSFRUUF9DT0RFW2NvZGVdKSAhPT0gbnVsbCAmJiBfSlNPTlJQQzJfVE9fSFRUUF9DT0QgIT09IHZvaWQgMCA/IF9KU09OUlBDMl9UT19IVFRQX0NPRCA6IDUwMDtcbn1cblxuZnVuY3Rpb24gZ2V0SFRUUFN0YXR1c0NvZGUoanNvbikge1xuICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KGpzb24pID8ganNvbiA6IFtqc29uXTtcbiAgY29uc3QgaHR0cFN0YXR1c2VzID0gbmV3IFNldChhcnIubWFwKHJlcyA9PiB7XG4gICAgaWYgKCdlcnJvcicgaW4gcmVzKSB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzLmVycm9yLmRhdGE7XG5cbiAgICAgIGlmICh0eXBlb2YgZGF0YS5odHRwU3RhdHVzID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZGF0YS5odHRwU3RhdHVzO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb2RlID0gVFJQQ19FUlJPUl9DT0RFU19CWV9OVU1CRVJbcmVzLmVycm9yLmNvZGVdO1xuICAgICAgcmV0dXJuIGdldFN0YXR1c0NvZGVGcm9tS2V5KGNvZGUpO1xuICAgIH1cblxuICAgIHJldHVybiAyMDA7XG4gIH0pKTtcblxuICBpZiAoaHR0cFN0YXR1c2VzLnNpemUgIT09IDEpIHtcbiAgICByZXR1cm4gMjA3O1xuICB9XG5cbiAgY29uc3QgaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXNlcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gIHJldHVybiBodHRwU3RhdHVzO1xufVxuZnVuY3Rpb24gZ2V0SFRUUFN0YXR1c0NvZGVGcm9tRXJyb3IoZXJyb3IpIHtcbiAgY29uc3Qge1xuICAgIGNvZGVcbiAgfSA9IGVycm9yO1xuICByZXR1cm4gZ2V0U3RhdHVzQ29kZUZyb21LZXkoY29kZSk7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbmNvbnN0IEhUVFBfTUVUSE9EX1BST0NFRFVSRV9UWVBFX01BUCA9IHtcbiAgR0VUOiAncXVlcnknLFxuICBQT1NUOiAnbXV0YXRpb24nLFxuICBQQVRDSDogJ3N1YnNjcmlwdGlvbidcbn07XG5cbmZ1bmN0aW9uIGdldFJhd1Byb2NlZHVyZUlucHV0T3JUaHJvdyhyZXEpIHtcbiAgdHJ5IHtcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIGlmICghcmVxLnF1ZXJ5LmhhcygnaW5wdXQnKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByYXcgPSByZXEucXVlcnkuZ2V0KCdpbnB1dCcpO1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZW9mIHJlcS5ib2R5ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UocmVxLmJvZHkpIDogcmVxLmJvZHk7XG4gIH0gY2F0Y2ggKGNhdXNlKSB7XG4gICAgdGhyb3cgbmV3IHRyYW5zZm9ybVRSUENSZXNwb25zZS5UUlBDRXJyb3Ioe1xuICAgICAgY29kZTogJ1BBUlNFX0VSUk9SJyxcbiAgICAgIGNhdXNlXG4gICAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUhUVFBSZXNwb25zZShvcHRzKSB7XG4gIHZhciBfb3B0cyRiYXRjaGluZyRlbmFibGUsIF9vcHRzJGJhdGNoaW5nLCBfSFRUUF9NRVRIT0RfUFJPQ0VEVVI7XG5cbiAgY29uc3Qge1xuICAgIGNyZWF0ZUNvbnRleHQsXG4gICAgb25FcnJvcixcbiAgICByb3V0ZXIsXG4gICAgcmVxXG4gIH0gPSBvcHRzO1xuICBjb25zdCBiYXRjaGluZ0VuYWJsZWQgPSAoX29wdHMkYmF0Y2hpbmckZW5hYmxlID0gKF9vcHRzJGJhdGNoaW5nID0gb3B0cy5iYXRjaGluZykgPT09IG51bGwgfHwgX29wdHMkYmF0Y2hpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzJGJhdGNoaW5nLmVuYWJsZWQpICE9PSBudWxsICYmIF9vcHRzJGJhdGNoaW5nJGVuYWJsZSAhPT0gdm9pZCAwID8gX29wdHMkYmF0Y2hpbmckZW5hYmxlIDogdHJ1ZTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0hFQUQnKSB7XG4gICAgLy8gY2FuIGJlIHVzZWQgZm9yIGxhbWJkYSB3YXJtdXBcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAyMDRcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdHlwZSA9IChfSFRUUF9NRVRIT0RfUFJPQ0VEVVIgPSBIVFRQX01FVEhPRF9QUk9DRURVUkVfVFlQRV9NQVBbcmVxLm1ldGhvZF0pICE9PSBudWxsICYmIF9IVFRQX01FVEhPRF9QUk9DRURVUiAhPT0gdm9pZCAwID8gX0hUVFBfTUVUSE9EX1BST0NFRFVSIDogJ3Vua25vd24nO1xuICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICBsZXQgcGF0aHMgPSB1bmRlZmluZWQ7XG4gIGNvbnN0IGlzQmF0Y2hDYWxsID0gISFyZXEucXVlcnkuZ2V0KCdiYXRjaCcpO1xuXG4gIGZ1bmN0aW9uIGVuZFJlc3BvbnNlKHVudHJhbnNmb3JtZWRKU09OLCBlcnJvcnMpIHtcbiAgICB2YXIgX29wdHMkcmVzcG9uc2VNZXRhLCBfb3B0cyRyZXNwb25zZU1ldGEyO1xuXG4gICAgbGV0IHN0YXR1cyA9IGdldEhUVFBTdGF0dXNDb2RlKHVudHJhbnNmb3JtZWRKU09OKTtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH07XG4gICAgY29uc3QgbWV0YSA9IChfb3B0cyRyZXNwb25zZU1ldGEgPSAoX29wdHMkcmVzcG9uc2VNZXRhMiA9IG9wdHMucmVzcG9uc2VNZXRhKSA9PT0gbnVsbCB8fCBfb3B0cyRyZXNwb25zZU1ldGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0cyRyZXNwb25zZU1ldGEyLmNhbGwob3B0cywge1xuICAgICAgY3R4LFxuICAgICAgcGF0aHMsXG4gICAgICB0eXBlLFxuICAgICAgZGF0YTogQXJyYXkuaXNBcnJheSh1bnRyYW5zZm9ybWVkSlNPTikgPyB1bnRyYW5zZm9ybWVkSlNPTiA6IFt1bnRyYW5zZm9ybWVkSlNPTl0sXG4gICAgICBlcnJvcnNcbiAgICB9KSkgIT09IG51bGwgJiYgX29wdHMkcmVzcG9uc2VNZXRhICE9PSB2b2lkIDAgPyBfb3B0cyRyZXNwb25zZU1ldGEgOiB7fTtcblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKChfbWV0YSRoZWFkZXJzID0gbWV0YS5oZWFkZXJzKSAhPT0gbnVsbCAmJiBfbWV0YSRoZWFkZXJzICE9PSB2b2lkIDAgPyBfbWV0YSRoZWFkZXJzIDoge30pKSB7XG4gICAgICB2YXIgX21ldGEkaGVhZGVycztcblxuICAgICAgaGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKG1ldGEuc3RhdHVzKSB7XG4gICAgICBzdGF0dXMgPSBtZXRhLnN0YXR1cztcbiAgICB9XG5cbiAgICBjb25zdCB0cmFuc2Zvcm1lZEpTT04gPSB0cmFuc2Zvcm1UUlBDUmVzcG9uc2UudHJhbnNmb3JtVFJQQ1Jlc3BvbnNlKHJvdXRlciwgdW50cmFuc2Zvcm1lZEpTT04pO1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh0cmFuc2Zvcm1lZEpTT04pO1xuICAgIHJldHVybiB7XG4gICAgICBib2R5LFxuICAgICAgc3RhdHVzLFxuICAgICAgaGVhZGVyc1xuICAgIH07XG4gIH1cblxuICB0cnkge1xuICAgIGlmIChvcHRzLmVycm9yKSB7XG4gICAgICB0aHJvdyBvcHRzLmVycm9yO1xuICAgIH1cblxuICAgIGlmIChpc0JhdGNoQ2FsbCAmJiAhYmF0Y2hpbmdFbmFibGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhdGNoaW5nIGlzIG5vdCBlbmFibGVkIG9uIHRoZSBzZXJ2ZXJgKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ3Vua25vd24nIHx8IHR5cGUgPT09ICdzdWJzY3JpcHRpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlLlRSUENFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBVbmV4cGVjdGVkIHJlcXVlc3QgbWV0aG9kICR7cmVxLm1ldGhvZH1gLFxuICAgICAgICBjb2RlOiAnTUVUSE9EX05PVF9TVVBQT1JURUQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByYXdJbnB1dCA9IGdldFJhd1Byb2NlZHVyZUlucHV0T3JUaHJvdyhyZXEpO1xuICAgIHBhdGhzID0gaXNCYXRjaENhbGwgPyBvcHRzLnBhdGguc3BsaXQoJywnKSA6IFtvcHRzLnBhdGhdO1xuICAgIGN0eCA9IGF3YWl0IGNyZWF0ZUNvbnRleHQoKTtcblxuICAgIGNvbnN0IGRlc2VyaWFsaXplSW5wdXRWYWx1ZSA9IHJhd1ZhbHVlID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2YgcmF3VmFsdWUgIT09ICd1bmRlZmluZWQnID8gcm91dGVyLl9kZWYudHJhbnNmb3JtZXIuaW5wdXQuZGVzZXJpYWxpemUocmF3VmFsdWUpIDogcmF3VmFsdWU7XG4gICAgfTtcblxuICAgIGNvbnN0IGdldElucHV0cyA9ICgpID0+IHtcbiAgICAgIGlmICghaXNCYXRjaENhbGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAwOiBkZXNlcmlhbGl6ZUlucHV0VmFsdWUocmF3SW5wdXQpXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChyYXdJbnB1dCA9PSBudWxsIHx8IHR5cGVvZiByYXdJbnB1dCAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyYXdJbnB1dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IHRyYW5zZm9ybVRSUENSZXNwb25zZS5UUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1wiaW5wdXRcIiBuZWVkcyB0byBiZSBhbiBvYmplY3Qgd2hlbiBkb2luZyBhIGJhdGNoIGNhbGwnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnB1dCA9IHt9O1xuXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdJbnB1dCkge1xuICAgICAgICBjb25zdCBrID0ga2V5O1xuICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHJhd0lucHV0W2tdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGRlc2VyaWFsaXplSW5wdXRWYWx1ZShyYXdWYWx1ZSk7XG4gICAgICAgIGlucHV0W2tdID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9O1xuXG4gICAgY29uc3QgaW5wdXRzID0gZ2V0SW5wdXRzKCk7XG4gICAgY29uc3QgcmF3UmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHBhdGhzLm1hcChhc3luYyAocGF0aCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzW2luZGV4XTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlLmNhbGxQcm9jZWR1cmUoe1xuICAgICAgICAgIGN0eCxcbiAgICAgICAgICByb3V0ZXIsXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlucHV0LFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgZGF0YTogb3V0cHV0XG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IHRyYW5zZm9ybVRSUENSZXNwb25zZS5nZXRFcnJvckZyb21Vbmtub3duKGNhdXNlKTtcbiAgICAgICAgb25FcnJvciA9PT0gbnVsbCB8fCBvbkVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkVycm9yKHtcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIGlucHV0LFxuICAgICAgICAgIGN0eCxcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIHJlcVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICAgIGVycm9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGVycm9ycyA9IHJhd1Jlc3VsdHMuZmxhdE1hcChvYmogPT4gb2JqLmVycm9yID8gW29iai5lcnJvcl0gOiBbXSk7XG4gICAgY29uc3QgcmVzdWx0RW52ZWxvcGVzID0gcmF3UmVzdWx0cy5tYXAob2JqID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgaW5wdXRcbiAgICAgIH0gPSBvYmo7XG5cbiAgICAgIGlmIChvYmouZXJyb3IpIHtcbiAgICAgICAgY29uc3QganNvbiA9IHtcbiAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICBlcnJvcjogcm91dGVyLmdldEVycm9yU2hhcGUoe1xuICAgICAgICAgICAgZXJyb3I6IG9iai5lcnJvcixcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBjdHhcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSB7XG4gICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0YScsXG4gICAgICAgICAgICBkYXRhOiBvYmouZGF0YVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgcmVzdWx0ID0gaXNCYXRjaENhbGwgPyByZXN1bHRFbnZlbG9wZXMgOiByZXN1bHRFbnZlbG9wZXNbMF07XG4gICAgcmV0dXJuIGVuZFJlc3BvbnNlKHJlc3VsdCwgZXJyb3JzKTtcbiAgfSBjYXRjaCAoY2F1c2UpIHtcbiAgICAvLyB3ZSBnZXQgaGVyZSBpZlxuICAgIC8vIC0gYmF0Y2hpbmcgaXMgY2FsbGVkIHdoZW4gaXQncyBub3QgZW5hYmxlZFxuICAgIC8vIC0gYGNyZWF0ZUNvbnRleHQoKWAgdGhyb3dzXG4gICAgLy8gLSBwb3N0IGJvZHkgaXMgdG9vIGxhcmdlXG4gICAgLy8gLSBpbnB1dCBkZXNlcmlhbGl6YXRpb24gZmFpbHNcbiAgICBjb25zdCBlcnJvciA9IHRyYW5zZm9ybVRSUENSZXNwb25zZS5nZXRFcnJvckZyb21Vbmtub3duKGNhdXNlKTtcbiAgICBjb25zdCBqc29uID0ge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBlcnJvcjogcm91dGVyLmdldEVycm9yU2hhcGUoe1xuICAgICAgICBlcnJvcixcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBpbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICBjdHhcbiAgICAgIH0pXG4gICAgfTtcbiAgICBvbkVycm9yID09PSBudWxsIHx8IG9uRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uRXJyb3Ioe1xuICAgICAgZXJyb3IsXG4gICAgICBwYXRoOiB1bmRlZmluZWQsXG4gICAgICBpbnB1dDogdW5kZWZpbmVkLFxuICAgICAgY3R4LFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHJlcVxuICAgIH0pO1xuICAgIHJldHVybiBlbmRSZXNwb25zZShqc29uLCBbZXJyb3JdKTtcbiAgfVxufVxuXG5leHBvcnRzLmFzc2VydE5vdEJyb3dzZXIgPSBhc3NlcnROb3RCcm93c2VyO1xuZXhwb3J0cy5nZXRIVFRQU3RhdHVzQ29kZUZyb21FcnJvciA9IGdldEhUVFBTdGF0dXNDb2RlRnJvbUVycm9yO1xuZXhwb3J0cy5yZXNvbHZlSFRUUFJlc3BvbnNlID0gcmVzb2x2ZUhUVFBSZXNwb25zZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/dist/resolveHTTPResponse-ab01e4b9.cjs.dev.js\n");

/***/ }),

/***/ "(api)/./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nasync function callProcedure(opts) {\n  const {\n    type,\n    path,\n    input\n  } = opts;\n  const caller = opts.router.createCaller(opts.ctx);\n\n  if (type === 'query') {\n    return caller.query(path, input);\n  }\n\n  if (type === 'mutation') {\n    return caller.mutation(path, input);\n  }\n\n  if (type === 'subscription') {\n    const sub = await caller.subscription(path, input);\n    return sub;\n  }\n  /* istanbul ignore next */\n\n\n  throw new Error(`Unknown procedure type ${type}`);\n}\n\nclass TRPCError extends Error {\n  /**\n   * @deprecated use `cause`\n   */\n  constructor(opts) {\n    var _opts$cause, _opts$message;\n\n    const cause = (_opts$cause = opts.cause) !== null && _opts$cause !== void 0 ? _opts$cause : opts.originalError;\n    const code = opts.code;\n    const message = (_opts$message = opts.message) !== null && _opts$message !== void 0 ? _opts$message : getMessageFromUnkownError(cause, code); // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore https://github.com/tc39/proposal-error-cause\n\n    super(message, {\n      cause\n    });\n    this.originalError = void 0;\n    this.cause = void 0;\n    this.code = void 0;\n    this.code = code;\n    this.cause = this.originalError = cause;\n    this.name = 'TRPCError';\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n\n}\n\nfunction getMessageFromUnkownError(err, fallback) {\n  if (typeof err === 'string') {\n    return err;\n  }\n\n  if (err instanceof Error && typeof err.message === 'string') {\n    return err.message;\n  }\n\n  return fallback;\n}\nfunction getErrorFromUnknown(cause) {\n  // this should ideally be an `instanceof TRPCError` but for some reason that isn't working\n  // ref https://github.com/trpc/trpc/issues/331\n  if (cause instanceof Error && cause.name === 'TRPCError') {\n    return cause;\n  }\n\n  const err = new TRPCError({\n    code: 'INTERNAL_SERVER_ERROR',\n    cause\n  }); // take stack trace from cause\n\n  if (cause instanceof Error) {\n    err.stack = cause.stack;\n    err.message = cause.message;\n  }\n\n  return err;\n}\n\nfunction transformTRPCResponseItem(router, item) {\n  if ('error' in item) {\n    return { ...item,\n      error: router._def.transformer.output.serialize(item.error)\n    };\n  }\n\n  if (item.result.type !== 'data') {\n    return item;\n  }\n\n  return { ...item,\n    result: { ...item.result,\n      data: router._def.transformer.output.serialize(item.result.data)\n    }\n  };\n}\n/**\n * Takes a unserialized `TRPCResponse` and serializes it with the router's transformers\n **/\n\n\nfunction transformTRPCResponse(router, itemOrItems) {\n  return Array.isArray(itemOrItems) ? itemOrItems.map(item => transformTRPCResponseItem(router, item)) : transformTRPCResponseItem(router, itemOrItems);\n}\n\nexports.TRPCError = TRPCError;\nexports.callProcedure = callProcedure;\nexports.getErrorFromUnknown = getErrorFromUnknown;\nexports.getMessageFromUnkownError = getMessageFromUnkownError;\nexports.transformTRPCResponse = transformTRPCResponse;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlLTM2YTQxNDE4LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLDRDQUE0QyxLQUFLO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0pBQWtKO0FBQ2xKOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEdBQUc7O0FBRU47QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVztBQUNYLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckIsMkJBQTJCO0FBQzNCLGlDQUFpQztBQUNqQyw2QkFBNkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLW5ldy8uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvZGlzdC90cmFuc2Zvcm1UUlBDUmVzcG9uc2UtMzZhNDE0MTguY2pzLmRldi5qcz84ODhiIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYXN5bmMgZnVuY3Rpb24gY2FsbFByb2NlZHVyZShvcHRzKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlLFxuICAgIHBhdGgsXG4gICAgaW5wdXRcbiAgfSA9IG9wdHM7XG4gIGNvbnN0IGNhbGxlciA9IG9wdHMucm91dGVyLmNyZWF0ZUNhbGxlcihvcHRzLmN0eCk7XG5cbiAgaWYgKHR5cGUgPT09ICdxdWVyeScpIHtcbiAgICByZXR1cm4gY2FsbGVyLnF1ZXJ5KHBhdGgsIGlucHV0KTtcbiAgfVxuXG4gIGlmICh0eXBlID09PSAnbXV0YXRpb24nKSB7XG4gICAgcmV0dXJuIGNhbGxlci5tdXRhdGlvbihwYXRoLCBpbnB1dCk7XG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHtcbiAgICBjb25zdCBzdWIgPSBhd2FpdCBjYWxsZXIuc3Vic2NyaXB0aW9uKHBhdGgsIGlucHV0KTtcbiAgICByZXR1cm4gc3ViO1xuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcHJvY2VkdXJlIHR5cGUgJHt0eXBlfWApO1xufVxuXG5jbGFzcyBUUlBDRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYGNhdXNlYFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHZhciBfb3B0cyRjYXVzZSwgX29wdHMkbWVzc2FnZTtcblxuICAgIGNvbnN0IGNhdXNlID0gKF9vcHRzJGNhdXNlID0gb3B0cy5jYXVzZSkgIT09IG51bGwgJiYgX29wdHMkY2F1c2UgIT09IHZvaWQgMCA/IF9vcHRzJGNhdXNlIDogb3B0cy5vcmlnaW5hbEVycm9yO1xuICAgIGNvbnN0IGNvZGUgPSBvcHRzLmNvZGU7XG4gICAgY29uc3QgbWVzc2FnZSA9IChfb3B0cyRtZXNzYWdlID0gb3B0cy5tZXNzYWdlKSAhPT0gbnVsbCAmJiBfb3B0cyRtZXNzYWdlICE9PSB2b2lkIDAgPyBfb3B0cyRtZXNzYWdlIDogZ2V0TWVzc2FnZUZyb21Vbmtvd25FcnJvcihjYXVzZSwgY29kZSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWVycm9yLWNhdXNlXG5cbiAgICBzdXBlcihtZXNzYWdlLCB7XG4gICAgICBjYXVzZVxuICAgIH0pO1xuICAgIHRoaXMub3JpZ2luYWxFcnJvciA9IHZvaWQgMDtcbiAgICB0aGlzLmNhdXNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29kZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuY2F1c2UgPSB0aGlzLm9yaWdpbmFsRXJyb3IgPSBjYXVzZTtcbiAgICB0aGlzLm5hbWUgPSAnVFJQQ0Vycm9yJztcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0TWVzc2FnZUZyb21Vbmtvd25FcnJvcihlcnIsIGZhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBlcnI7XG4gIH1cblxuICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgdHlwZW9mIGVyci5tZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBlcnIubWVzc2FnZTtcbiAgfVxuXG4gIHJldHVybiBmYWxsYmFjaztcbn1cbmZ1bmN0aW9uIGdldEVycm9yRnJvbVVua25vd24oY2F1c2UpIHtcbiAgLy8gdGhpcyBzaG91bGQgaWRlYWxseSBiZSBhbiBgaW5zdGFuY2VvZiBUUlBDRXJyb3JgIGJ1dCBmb3Igc29tZSByZWFzb24gdGhhdCBpc24ndCB3b3JraW5nXG4gIC8vIHJlZiBodHRwczovL2dpdGh1Yi5jb20vdHJwYy90cnBjL2lzc3Vlcy8zMzFcbiAgaWYgKGNhdXNlIGluc3RhbmNlb2YgRXJyb3IgJiYgY2F1c2UubmFtZSA9PT0gJ1RSUENFcnJvcicpIHtcbiAgICByZXR1cm4gY2F1c2U7XG4gIH1cblxuICBjb25zdCBlcnIgPSBuZXcgVFJQQ0Vycm9yKHtcbiAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICBjYXVzZVxuICB9KTsgLy8gdGFrZSBzdGFjayB0cmFjZSBmcm9tIGNhdXNlXG5cbiAgaWYgKGNhdXNlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICBlcnIuc3RhY2sgPSBjYXVzZS5zdGFjaztcbiAgICBlcnIubWVzc2FnZSA9IGNhdXNlLm1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gZXJyO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UUlBDUmVzcG9uc2VJdGVtKHJvdXRlciwgaXRlbSkge1xuICBpZiAoJ2Vycm9yJyBpbiBpdGVtKSB7XG4gICAgcmV0dXJuIHsgLi4uaXRlbSxcbiAgICAgIGVycm9yOiByb3V0ZXIuX2RlZi50cmFuc2Zvcm1lci5vdXRwdXQuc2VyaWFsaXplKGl0ZW0uZXJyb3IpXG4gICAgfTtcbiAgfVxuXG4gIGlmIChpdGVtLnJlc3VsdC50eXBlICE9PSAnZGF0YScpIHtcbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHJldHVybiB7IC4uLml0ZW0sXG4gICAgcmVzdWx0OiB7IC4uLml0ZW0ucmVzdWx0LFxuICAgICAgZGF0YTogcm91dGVyLl9kZWYudHJhbnNmb3JtZXIub3V0cHV0LnNlcmlhbGl6ZShpdGVtLnJlc3VsdC5kYXRhKVxuICAgIH1cbiAgfTtcbn1cbi8qKlxuICogVGFrZXMgYSB1bnNlcmlhbGl6ZWQgYFRSUENSZXNwb25zZWAgYW5kIHNlcmlhbGl6ZXMgaXQgd2l0aCB0aGUgcm91dGVyJ3MgdHJhbnNmb3JtZXJzXG4gKiovXG5cblxuZnVuY3Rpb24gdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlKHJvdXRlciwgaXRlbU9ySXRlbXMpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaXRlbU9ySXRlbXMpID8gaXRlbU9ySXRlbXMubWFwKGl0ZW0gPT4gdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlSXRlbShyb3V0ZXIsIGl0ZW0pKSA6IHRyYW5zZm9ybVRSUENSZXNwb25zZUl0ZW0ocm91dGVyLCBpdGVtT3JJdGVtcyk7XG59XG5cbmV4cG9ydHMuVFJQQ0Vycm9yID0gVFJQQ0Vycm9yO1xuZXhwb3J0cy5jYWxsUHJvY2VkdXJlID0gY2FsbFByb2NlZHVyZTtcbmV4cG9ydHMuZ2V0RXJyb3JGcm9tVW5rbm93biA9IGdldEVycm9yRnJvbVVua25vd247XG5leHBvcnRzLmdldE1lc3NhZ2VGcm9tVW5rb3duRXJyb3IgPSBnZXRNZXNzYWdlRnJvbVVua293bkVycm9yO1xuZXhwb3J0cy50cmFuc2Zvcm1UUlBDUmVzcG9uc2UgPSB0cmFuc2Zvcm1UUlBDUmVzcG9uc2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/@trpc/server/dist/transformTRPCResponse-36a41418.cjs.dev.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/[...nextauth].ts":
/*!*********************************************!*\
  !*** ./src/pages/api/auth/[...nextauth].ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authOptions\": () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_email__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/email */ \"next-auth/providers/email\");\n/* harmony import */ var next_auth_providers_email__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_email__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../server/db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../env/server.mjs */ \"(api)/./src/env/server.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_db_client__WEBPACK_IMPORTED_MODULE_5__, _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__]);\n([_server_db_client__WEBPACK_IMPORTED_MODULE_5__, _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable import/extensions */ \n\n\n\n// Prisma adapter for NextAuth, optional and can be removed\n\n\n\nconst authOptions = {\n    // Include user.id on session\n    callbacks: {\n        session ({ session , user  }) {\n            if (session.user) {\n                // eslint-disable-next-line no-param-reassign\n                session.user.id = user.id;\n            }\n            return session;\n        }\n    },\n    events: {\n        async createUser (message) {\n            if (message.user.name) return;\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_5__.prisma.user.update({\n                where: {\n                    id: message.user.id\n                },\n                data: {\n                    name: message.user.email?.split(\"@\")[0] || `user-${message.user.id.slice(0, 10)}`\n                }\n            });\n        }\n    },\n    // Configure one or more authentication providers\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_4__.PrismaAdapter)(_server_db_client__WEBPACK_IMPORTED_MODULE_5__.prisma),\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_ID,\n            clientSecret: _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_SECRET\n        }),\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GITHUB_CLIENT_ID,\n            clientSecret: _env_server_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GITHUB_CLIENT_SECRET\n        }),\n        next_auth_providers_email__WEBPACK_IMPORTED_MODULE_2___default()({\n            server: {\n                host: process.env.EMAIL_SERVER_HOST,\n                port: process.env.EMAIL_SERVER_PORT,\n                auth: {\n                    user: process.env.EMAIL_SERVER_USER,\n                    pass: process.env.EMAIL_SERVER_PASSWORD\n                }\n            },\n            from: process.env.EMAIL_FROM\n        }), \n    ],\n    pages: {\n        signIn: \"/auth/signin\",\n        verifyRequest: \"/auth/verify-request\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHNDQUFzQyxDQUNxQjtBQUNIO0FBQ0Y7QUFDRTtBQUN4RCwyREFBMkQ7QUFDRDtBQUNQO0FBQ0w7QUFFdkMsTUFBTU8sV0FBVyxHQUFvQjtJQUMxQyw2QkFBNkI7SUFDN0JDLFNBQVMsRUFBRTtRQUNUQyxPQUFPLEVBQUMsRUFBRUEsT0FBTyxHQUFFQyxJQUFJLEdBQUUsRUFBRTtZQUN6QixJQUFJRCxPQUFPLENBQUNDLElBQUksRUFBRTtnQkFDaEIsNkNBQTZDO2dCQUM3Q0QsT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUUsR0FBR0QsSUFBSSxDQUFDQyxFQUFFLENBQUM7YUFDM0I7WUFDRCxPQUFPRixPQUFPLENBQUM7U0FDaEI7S0FDRjtJQUNERyxNQUFNLEVBQUU7UUFDTixNQUFNQyxVQUFVLEVBQUNDLE9BQU8sRUFBRTtZQUN4QixJQUFJQSxPQUFPLENBQUNKLElBQUksQ0FBQ0ssSUFBSSxFQUFFLE9BQU87WUFDOUIsTUFBTVYsaUVBQWtCLENBQUM7Z0JBQ3ZCWSxLQUFLLEVBQUU7b0JBQ0xOLEVBQUUsRUFBRUcsT0FBTyxDQUFDSixJQUFJLENBQUNDLEVBQUU7aUJBQ3BCO2dCQUNETyxJQUFJLEVBQUU7b0JBQ0pILElBQUksRUFDRkQsT0FBTyxDQUFDSixJQUFJLENBQUNTLEtBQUssRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNqQyxDQUFDLEtBQUssRUFBRU4sT0FBTyxDQUFDSixJQUFJLENBQUNDLEVBQUUsQ0FBQ1UsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUN6QzthQUNGLENBQUMsQ0FBQztTQUNKO0tBQ0Y7SUFDRCxpREFBaUQ7SUFDakRDLE9BQU8sRUFBRWxCLHdFQUFhLENBQUNDLHFEQUFNLENBQUM7SUFDOUJrQixTQUFTLEVBQUU7UUFDVHRCLGlFQUFjLENBQUM7WUFDYnVCLFFBQVEsRUFBRWxCLGlFQUFvQjtZQUM5Qm9CLFlBQVksRUFBRXBCLHFFQUF3QjtTQUN2QyxDQUFDO1FBQ0ZILGlFQUFjLENBQUM7WUFDYnFCLFFBQVEsRUFBRWxCLGlFQUFvQjtZQUM5Qm9CLFlBQVksRUFBRXBCLHFFQUF3QjtTQUN2QyxDQUFDO1FBQ0ZKLGdFQUFhLENBQUM7WUFDWjRCLE1BQU0sRUFBRTtnQkFDTkMsSUFBSSxFQUFFQyxPQUFPLENBQUMxQixHQUFHLENBQUMyQixpQkFBaUI7Z0JBQ25DQyxJQUFJLEVBQUVGLE9BQU8sQ0FBQzFCLEdBQUcsQ0FBQzZCLGlCQUFpQjtnQkFDbkNDLElBQUksRUFBRTtvQkFDSjFCLElBQUksRUFBRXNCLE9BQU8sQ0FBQzFCLEdBQUcsQ0FBQytCLGlCQUFpQjtvQkFDbkNDLElBQUksRUFBRU4sT0FBTyxDQUFDMUIsR0FBRyxDQUFDaUMscUJBQXFCO2lCQUN4QzthQUNGO1lBQ0RDLElBQUksRUFBRVIsT0FBTyxDQUFDMUIsR0FBRyxDQUFDbUMsVUFBVTtTQUM3QixDQUFDO0tBQ0g7SUFDREMsS0FBSyxFQUFFO1FBQ0xDLE1BQU0sRUFBRSxjQUFjO1FBQ3RCQyxhQUFhLEVBQUUsc0JBQXNCO0tBQ3RDO0NBQ0YsQ0FBQztBQUVGLGlFQUFlNUMsZ0RBQVEsQ0FBQ08sV0FBVyxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLW5ldy8uL3NyYy9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzUwYTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L2V4dGVuc2lvbnMgKi9cclxuaW1wb3J0IE5leHRBdXRoLCB7IHR5cGUgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcclxuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlJztcclxuaW1wb3J0IEVtYWlsUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9lbWFpbCc7XHJcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIjtcclxuLy8gUHJpc21hIGFkYXB0ZXIgZm9yIE5leHRBdXRoLCBvcHRpb25hbCBhbmQgY2FuIGJlIHJlbW92ZWRcclxuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gJ0BuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXInO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi8uLi9zZXJ2ZXIvZGIvY2xpZW50JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vLi4vZW52L3NlcnZlci5tanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XHJcbiAgLy8gSW5jbHVkZSB1c2VyLmlkIG9uIHNlc3Npb25cclxuICBjYWxsYmFja3M6IHtcclxuICAgIHNlc3Npb24oeyBzZXNzaW9uLCB1c2VyIH0pIHtcclxuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHVzZXIuaWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZXZlbnRzOiB7XHJcbiAgICBhc3luYyBjcmVhdGVVc2VyKG1lc3NhZ2UpIHtcclxuICAgICAgaWYgKG1lc3NhZ2UudXNlci5uYW1lKSByZXR1cm47XHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBtZXNzYWdlLnVzZXIuaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBuYW1lOlxyXG4gICAgICAgICAgICBtZXNzYWdlLnVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHxcclxuICAgICAgICAgICAgYHVzZXItJHttZXNzYWdlLnVzZXIuaWQuc2xpY2UoMCwgMTApfWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgLy8gQ29uZmlndXJlIG9uZSBvciBtb3JlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyc1xyXG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIEdvb2dsZVByb3ZpZGVyKHtcclxuICAgICAgY2xpZW50SWQ6IGVudi5HT09HTEVfQ0xJRU5UX0lELFxyXG4gICAgICBjbGllbnRTZWNyZXQ6IGVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIH0pLFxyXG4gICAgR2l0SHViUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogZW52LkdJVEhVQl9DTElFTlRfSUQsXHJcbiAgICAgIGNsaWVudFNlY3JldDogZW52LkdJVEhVQl9DTElFTlRfU0VDUkVUXHJcbiAgICB9KSxcclxuICAgIEVtYWlsUHJvdmlkZXIoe1xyXG4gICAgICBzZXJ2ZXI6IHtcclxuICAgICAgICBob3N0OiBwcm9jZXNzLmVudi5FTUFJTF9TRVJWRVJfSE9TVCxcclxuICAgICAgICBwb3J0OiBwcm9jZXNzLmVudi5FTUFJTF9TRVJWRVJfUE9SVCxcclxuICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9TRVJWRVJfVVNFUixcclxuICAgICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1NFUlZFUl9QQVNTV09SRCxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9GUk9NLFxyXG4gICAgfSksXHJcbiAgXSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcclxuICAgIHZlcmlmeVJlcXVlc3Q6ICcvYXV0aC92ZXJpZnktcmVxdWVzdCcsIC8vICh1c2VkIGZvciBjaGVjayBlbWFpbCBtZXNzYWdlKVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiR29vZ2xlUHJvdmlkZXIiLCJFbWFpbFByb3ZpZGVyIiwiR2l0SHViUHJvdmlkZXIiLCJQcmlzbWFBZGFwdGVyIiwicHJpc21hIiwiZW52IiwiYXV0aE9wdGlvbnMiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiZXZlbnRzIiwiY3JlYXRlVXNlciIsIm1lc3NhZ2UiLCJuYW1lIiwidXBkYXRlIiwid2hlcmUiLCJkYXRhIiwiZW1haWwiLCJzcGxpdCIsInNsaWNlIiwiYWRhcHRlciIsInByb3ZpZGVycyIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiR0lUSFVCX0NMSUVOVF9JRCIsIkdJVEhVQl9DTElFTlRfU0VDUkVUIiwic2VydmVyIiwiaG9zdCIsInByb2Nlc3MiLCJFTUFJTF9TRVJWRVJfSE9TVCIsInBvcnQiLCJFTUFJTF9TRVJWRVJfUE9SVCIsImF1dGgiLCJFTUFJTF9TRVJWRVJfVVNFUiIsInBhc3MiLCJFTUFJTF9TRVJWRVJfUEFTU1dPUkQiLCJmcm9tIiwiRU1BSUxfRlJPTSIsInBhZ2VzIiwic2lnbkluIiwidmVyaWZ5UmVxdWVzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/trpc/[trpc].ts":
/*!**************************************!*\
  !*** ./src/pages/api/trpc/[trpc].ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server/adapters/next */ \"(api)/./node_modules/@trpc/server/adapters/next/dist/trpc-server-adapters-next.cjs.js\");\n/* harmony import */ var _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _server_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../server/router */ \"(api)/./src/server/router/index.ts\");\n/* harmony import */ var _server_router_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../server/router/context */ \"(api)/./src/server/router/context.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_router__WEBPACK_IMPORTED_MODULE_1__, _server_router_context__WEBPACK_IMPORTED_MODULE_2__]);\n([_server_router__WEBPACK_IMPORTED_MODULE_1__, _server_router_context__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/pages/api/trpc/[trpc].ts\n\n\n\n// export API handler\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__.createNextApiHandler)({\n    router: _server_router__WEBPACK_IMPORTED_MODULE_1__.appRouter,\n    createContext: _server_router_context__WEBPACK_IMPORTED_MODULE_2__.createContext\n}));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsK0JBQStCO0FBQ21DO0FBQ2Y7QUFDWTtBQUUvRCxxQkFBcUI7QUFDckIsaUVBQWVBLGdGQUFvQixDQUFDO0lBQ2xDRyxNQUFNLEVBQUVGLHFEQUFTO0lBQ2pCQyxhQUFhO0NBQ2QsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzP2NlNTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3BhZ2VzL2FwaS90cnBjL1t0cnBjXS50c1xyXG5pbXBvcnQgeyBjcmVhdGVOZXh0QXBpSGFuZGxlciB9IGZyb20gJ0B0cnBjL3NlcnZlci9hZGFwdGVycy9uZXh0JztcclxuaW1wb3J0IHsgYXBwUm91dGVyIH0gZnJvbSAnLi4vLi4vLi4vc2VydmVyL3JvdXRlcic7XHJcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9zZXJ2ZXIvcm91dGVyL2NvbnRleHQnO1xyXG5cclxuLy8gZXhwb3J0IEFQSSBoYW5kbGVyXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZU5leHRBcGlIYW5kbGVyKHtcclxuICByb3V0ZXI6IGFwcFJvdXRlcixcclxuICBjcmVhdGVDb250ZXh0LFxyXG59KTtcclxuIl0sIm5hbWVzIjpbImNyZWF0ZU5leHRBcGlIYW5kbGVyIiwiYXBwUm91dGVyIiwiY3JlYXRlQ29udGV4dCIsInJvdXRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/trpc/[trpc].ts\n");

/***/ }),

/***/ "(api)/./src/server/db/client.ts":
/*!*********************************!*\
  !*** ./src/server/db/client.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"prisma\": () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_server_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../env/server.mjs */ \"(api)/./src/env/server.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_env_server_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n_env_server_mjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// eslint-disable-next-line import/extensions\n\n// eslint-disable-next-line import/prefer-default-export\nconst prisma = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\nif (_env_server_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV !== \"production\") {\n    global.prisma = prisma;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2RiL2NsaWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQzlDLDZDQUE2QztBQUNGO0FBTzNDLHdEQUF3RDtBQUNqRCxNQUFNRSxNQUFNLEdBQ2pCQyxNQUFNLENBQUNELE1BQU0sSUFDYixJQUFJRix3REFBWSxDQUFDO0lBQ2ZJLEdBQUcsRUFBRTtRQUFDLE9BQU87S0FBQztDQUNmLENBQUMsQ0FBQztBQUVMLElBQUlILHlEQUFZLEtBQUssWUFBWSxFQUFFO0lBQ2pDRSxNQUFNLENBQUNELE1BQU0sR0FBR0EsTUFBTSxDQUFDO0NBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL2RiL2NsaWVudC50cz8yNzIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9leHRlbnNpb25zXHJcbmltcG9ydCB7IGVudiB9IGZyb20gJy4uLy4uL2Vudi9zZXJ2ZXIubWpzJztcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyLCB2YXJzLW9uLXRvcFxyXG4gIHZhciBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnRcclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsLnByaXNtYSB8fFxyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBbJ3F1ZXJ5J10sXHJcbiAgfSk7XHJcblxyXG5pZiAoZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICBnbG9iYWwucHJpc21hID0gcHJpc21hO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJlbnYiLCJwcmlzbWEiLCJnbG9iYWwiLCJsb2ciLCJOT0RFX0VOViJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/db/client.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/bookmark.ts":
/*!***************************************!*\
  !*** ./src/server/router/bookmark.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _server_router_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/server/router/utils */ \"(api)/./src/server/router/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__, _server_router_utils__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__, _server_router_utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst bookmarkRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().query(\"getAll\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).max(100).nullish(),\n        cursor: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n    }),\n    async resolve ({ ctx , input  }) {\n        const { cursor  } = input;\n        const limit = input.limit ?? 10;\n        const posts = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.post.findMany({\n            take: limit + 1,\n            where: {\n                bookmarkedBy: {\n                    some: {\n                        userId: ctx.session.user.id\n                    }\n                }\n            },\n            include: _server_router_utils__WEBPACK_IMPORTED_MODULE_3__.postDetailsInclude,\n            cursor: cursor ? {\n                id: cursor\n            } : undefined,\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        const myFollowingIds = await (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_3__.getMyFollowingIds)(ctx.session.user.id);\n        const populatedPosts = posts.map((post)=>(0,_server_router_utils__WEBPACK_IMPORTED_MODULE_3__.populatePost)(post, ctx.session.user.id, myFollowingIds));\n        // eslint-disable-next-line no-undef-init\n        let nextCursor = undefined;\n        if (populatedPosts.length > limit) {\n            const nextItem = populatedPosts.pop();\n            nextCursor = nextItem.id;\n        }\n        return {\n            posts: populatedPosts,\n            nextCursor\n        };\n    }\n}).mutation(\"add\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const data = {\n            postId: input.postId,\n            userId: ctx.session.user.id\n        };\n        const bookmark = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.bookmark.findUnique({\n            where: {\n                userId_postId: data\n            }\n        });\n        if (bookmark === null) {\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.bookmark.create({\n                data\n            });\n        } else {\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.bookmark[\"delete\"]({\n                where: {\n                    userId_postId: data\n                }\n            });\n        }\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bookmarkRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFDO2dCQUMzQnNCLEtBQUssRUFBRTtvQkFDTHVCLGFBQWEsRUFBRUgsSUFBSTtpQkFDcEI7YUFDRixDQUFDLENBQUM7U0FDSjtLQUNGO0NBQ0YsQ0FBQztBQUVKLGlFQUFlckMsY0FBYyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9ib29rbWFyay50cz9lN2Y5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL3NlcnZlci9kYi9jbGllbnQnO1xyXG5pbXBvcnQgY3JlYXRlUHJvdGVjdGVkUm91dGVyIGZyb20gJ0Avc2VydmVyL3JvdXRlci9wcm90ZWN0ZWQtcm91dGVyJztcclxuaW1wb3J0IHtcclxuICBwb3N0RGV0YWlsc0luY2x1ZGUsXHJcbiAgcG9wdWxhdGVQb3N0LFxyXG4gIGdldE15Rm9sbG93aW5nSWRzLFxyXG59IGZyb20gJ0Avc2VydmVyL3JvdXRlci91dGlscyc7XHJcblxyXG5jb25zdCBib29rbWFya1JvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRBbGwnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkubnVsbGlzaCgpLFxyXG4gICAgICBjdXJzb3I6IHouc3RyaW5nKCkubnVsbGlzaCgpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgY3R4LCBpbnB1dCB9KSB7XHJcbiAgICAgIGNvbnN0IHsgY3Vyc29yIH0gPSBpbnB1dDtcclxuICAgICAgY29uc3QgbGltaXQgPSBpbnB1dC5saW1pdCA/PyAxMDtcclxuXHJcbiAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgcHJpc21hLnBvc3QuZmluZE1hbnkoe1xyXG4gICAgICAgIHRha2U6IGxpbWl0ICsgMSxcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgYm9va21hcmtlZEJ5OiB7XHJcbiAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZTogcG9zdERldGFpbHNJbmNsdWRlLFxyXG4gICAgICAgIGN1cnNvcjogY3Vyc29yID8geyBpZDogY3Vyc29yIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb3JkZXJCeToge1xyXG4gICAgICAgICAgY3JlYXRlZEF0OiAnZGVzYycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBteUZvbGxvd2luZ0lkcyA9IGF3YWl0IGdldE15Rm9sbG93aW5nSWRzKGN0eC5zZXNzaW9uLnVzZXIuaWQpO1xyXG5cclxuICAgICAgY29uc3QgcG9wdWxhdGVkUG9zdHMgPSBwb3N0cy5tYXAoKHBvc3QpID0+XHJcbiAgICAgICAgcG9wdWxhdGVQb3N0KHBvc3QsIGN0eC5zZXNzaW9uLnVzZXIuaWQsIG15Rm9sbG93aW5nSWRzKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmLWluaXRcclxuICAgICAgbGV0IG5leHRDdXJzb3I6IHR5cGVvZiBjdXJzb3IgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBpZiAocG9wdWxhdGVkUG9zdHMubGVuZ3RoID4gbGltaXQpIHtcclxuICAgICAgICBjb25zdCBuZXh0SXRlbSA9IHBvcHVsYXRlZFBvc3RzLnBvcCgpO1xyXG4gICAgICAgIG5leHRDdXJzb3IgPSBuZXh0SXRlbSEuaWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBwb3N0czogcG9wdWxhdGVkUG9zdHMsXHJcbiAgICAgICAgbmV4dEN1cnNvcixcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ2FkZCcsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHBvc3RJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIHBvc3RJZDogaW5wdXQucG9zdElkLFxyXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGJvb2ttYXJrID0gYXdhaXQgcHJpc21hLmJvb2ttYXJrLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICB1c2VySWRfcG9zdElkOiBkYXRhLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGJvb2ttYXJrID09PSBudWxsKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmJvb2ttYXJrLmNyZWF0ZSh7IGRhdGEgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmJvb2ttYXJrLmRlbGV0ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB1c2VySWRfcG9zdElkOiBkYXRhLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGJvb2ttYXJrUm91dGVyO1xyXG4iXSwibmFtZXMiOlsieiIsInByaXNtYSIsImNyZWF0ZVByb3RlY3RlZFJvdXRlciIsInBvc3REZXRhaWxzSW5jbHVkZSIsInBvcHVsYXRlUG9zdCIsImdldE15Rm9sbG93aW5nSWRzIiwiYm9va21hcmtSb3V0ZXIiLCJxdWVyeSIsImlucHV0Iiwib2JqZWN0IiwibGltaXQiLCJudW1iZXIiLCJtaW4iLCJtYXgiLCJudWxsaXNoIiwiY3Vyc29yIiwic3RyaW5nIiwicmVzb2x2ZSIsImN0eCIsInBvc3RzIiwicG9zdCIsImZpbmRNYW55IiwidGFrZSIsIndoZXJlIiwiYm9va21hcmtlZEJ5Iiwic29tZSIsInVzZXJJZCIsInNlc3Npb24iLCJ1c2VyIiwiaWQiLCJpbmNsdWRlIiwidW5kZWZpbmVkIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsIm15Rm9sbG93aW5nSWRzIiwicG9wdWxhdGVkUG9zdHMiLCJtYXAiLCJuZXh0Q3Vyc29yIiwibGVuZ3RoIiwibmV4dEl0ZW0iLCJwb3AiLCJtdXRhdGlvbiIsInBvc3RJZCIsImRhdGEiLCJib29rbWFyayIsImZpbmRVbmlxdWUiLCJ1c2VySWRfcG9zdElkIiwiY3JlYXRlIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/router/bookmark.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/comment.ts":
/*!**************************************!*\
  !*** ./src/server/router/comment.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst commentRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().query(\"getAllByPostId\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const comments = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            where: {\n                postId: input.postId\n            },\n            include: {\n                _count: true,\n                likes: true,\n                user: true,\n                children: {\n                    select: {\n                        _count: true,\n                        id: true,\n                        isDeleted: true\n                    }\n                }\n            }\n        });\n        const filteredComments = comments// .filter((comment) => comment._count.children > 0 || !comment.isDeleted)\n        .map(({ _count , likes , user , ...commentData })=>({\n                ...commentData,\n                user: {\n                    id: user.id,\n                    name: user.name,\n                    image: user.image\n                },\n                likeCount: _count.likes,\n                repliesCount: _count.children,\n                likedByMe: likes.some((postLike)=>postLike.userId === ctx.session.user.id)\n            }));\n        const commentsMap = new Map(filteredComments.map((object)=>[\n                object.id,\n                object\n            ]));\n        const getRepliesCount = (com)=>{\n            const currentComment = commentsMap.get(com);\n            const childrenList = currentComment.children;\n            const numberOfDeletedChildren = childrenList.reduce((sum, c)=>c.isDeleted ? sum + 1 : sum, 0);\n            let directReplies = childrenList.length - numberOfDeletedChildren;\n            childrenList.map((child)=>child.id).forEach((childId)=>{\n                directReplies += getRepliesCount(childId);\n            });\n            return directReplies;\n        };\n        return filteredComments.map((commentData)=>({\n                ...commentData,\n                repliesCount: getRepliesCount(commentData.id)\n            })).filter((comment)=>comment.children.length || !comment.isDeleted);\n    }\n}).mutation(\"add\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        parentId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n        message: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const createdComment = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.create({\n            data: {\n                message: input.message,\n                parentId: input.parentId,\n                postId: input.postId,\n                userId: ctx.session.user.id\n            }\n        });\n        const post = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.post.findFirstOrThrow({\n            where: {\n                id: input.postId\n            }\n        });\n        if (input.parentId) {\n            const parentComment = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.findFirstOrThrow({\n                where: {\n                    id: input.parentId\n                }\n            });\n            if (parentComment.userId !== ctx.session.user.id) {\n                await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notification.create({\n                    data: {\n                        userId: parentComment.userId\n                    }\n                }).then((notification)=>_server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationCommentReply.create({\n                        data: {\n                            notificationId: notification.id,\n                            commentId: createdComment.id\n                        }\n                    }));\n            }\n        } else if (post.userId !== ctx.session.user.id) {\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notification.create({\n                data: {\n                    userId: post.userId\n                }\n            }).then((notification)=>_server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationPostComment.create({\n                    data: {\n                        notificationId: notification.id,\n                        commentId: createdComment.id\n                    }\n                }));\n        }\n    //   const comment = await prisma.comment.findFirstOrThrow({\n    //     where: {\n    //       id: createdComment.id,\n    //     },\n    //     include: {\n    //       _count: true,\n    //       likes: true,\n    //     },\n    //   });\n    //   // eslint-disable-next-line @typescript-eslint/naming-convention\n    //   const { _count, likes, ...commentData } = comment;\n    //   return {\n    //     ...commentData,\n    //     likeCount: _count.likes,\n    //     likedByMe: likes.some(\n    //       (postLike) => postLike.userId === ctx.session.user.id\n    //     ),\n    //   };\n    }\n}).mutation(\"delete\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        commentId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const isCurretUserPostAuthor = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.count({\n            where: {\n                id: input.commentId,\n                userId: ctx.session.user.id\n            }\n        });\n        if (!isCurretUserPostAuthor) {\n            throw Error(\"You are not the owner of the post\");\n        }\n        await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.update({\n            where: {\n                id: input.commentId\n            },\n            data: {\n                isDeleted: true\n            }\n        });\n    }\n}).mutation(\"toggleLike\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        commentId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const data = {\n            userId: ctx.session.user.id,\n            commentId: input.commentId\n        };\n        const like = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.commentLike.findFirst({\n            where: data\n        });\n        if (like) {\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.commentLike[\"delete\"]({\n                where: {\n                    userId_commentId: data\n                }\n            });\n        } else {\n            await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.commentLike.create({\n                data\n            });\n        }\n        const updatedComment = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.findFirstOrThrow({\n            where: {\n                id: input.commentId\n            },\n            include: {\n                user: true\n            }\n        });\n        return {\n            ...updatedComment,\n            likedByMe: like === null,\n            likeCount: await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.commentLike.count({\n                where: {\n                    commentId: input.commentId\n                }\n            })\n        };\n    }\n}).mutation(\"update\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        commentId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        newContent: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const isCurretUserPostAuthor = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.count({\n            where: {\n                id: input.commentId,\n                userId: ctx.session.user.id\n            }\n        });\n        if (!isCurretUserPostAuthor) {\n            throw Error(\"You are not the owner of the post\");\n        }\n        await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.update({\n            where: {\n                id: input.commentId\n            },\n            data: {\n                message: input.newContent\n            }\n        });\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (commentRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9jb21tZW50LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0I7QUFDb0I7QUFDeUI7QUFFckUsTUFBTUcsYUFBYSxHQUFHRCwyRUFBcUIsRUFBRSxDQUMxQ0UsS0FBSyxDQUFDLGdCQUFnQixFQUFFO0lBQ3ZCQyxLQUFLLEVBQUVMLHlDQUFRLENBQUM7UUFDZE8sTUFBTSxFQUFFUCx5Q0FBUSxFQUFFO0tBQ25CLENBQUM7SUFDRixNQUFNUyxPQUFPLEVBQUMsRUFBRUosS0FBSyxHQUFFSyxHQUFHLEdBQUUsRUFBRTtRQUM1QixNQUFNQyxRQUFRLEdBQUcsTUFBTVYsc0VBQXVCLENBQUM7WUFDN0NhLE9BQU8sRUFBRTtnQkFDUEMsU0FBUyxFQUFFLE1BQU07YUFDbEI7WUFDREMsS0FBSyxFQUFFO2dCQUNMVCxNQUFNLEVBQUVGLEtBQUssQ0FBQ0UsTUFBTTthQUNyQjtZQUNEVSxPQUFPLEVBQUU7Z0JBQ1BDLE1BQU0sRUFBRSxJQUFJO2dCQUNaQyxLQUFLLEVBQUUsSUFBSTtnQkFDWEMsSUFBSSxFQUFFLElBQUk7Z0JBQ1ZDLFFBQVEsRUFBRTtvQkFDUkMsTUFBTSxFQUFFO3dCQUNOSixNQUFNLEVBQUUsSUFBSTt3QkFDWkssRUFBRSxFQUFFLElBQUk7d0JBQ1JDLFNBQVMsRUFBRSxJQUFJO3FCQUNoQjtpQkFDRjthQUNGO1NBQ0YsQ0FBQztRQUVGLE1BQU1DLGdCQUFnQixHQUFHZCxRQUFRLDBFQUMyQztTQUN6RWUsR0FBRyxDQUFDLENBQUMsRUFBRVIsTUFBTSxHQUFFQyxLQUFLLEdBQUVDLElBQUksR0FBRSxHQUFHTyxXQUFXLEVBQUUsR0FBSyxDQUFDO2dCQUNqRCxHQUFHQSxXQUFXO2dCQUNkUCxJQUFJLEVBQUU7b0JBQ0pHLEVBQUUsRUFBRUgsSUFBSSxDQUFDRyxFQUFFO29CQUNYSyxJQUFJLEVBQUVSLElBQUksQ0FBQ1EsSUFBSTtvQkFDZkMsS0FBSyxFQUFFVCxJQUFJLENBQUNTLEtBQUs7aUJB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QU0sRUFBRXpCLEdBQUcsQ0FBQzBCLE9BQU8sQ0FBQ2hCLElBQUksQ0FBQ0csRUFBRTthQUM1QjtTQUNGLENBQUM7UUFDRixJQUFJLENBQUMrQyxzQkFBc0IsRUFBRTtZQUMzQixNQUFNRSxLQUFLLENBQUMsbUNBQW1DLENBQUMsQ0FBQztTQUNsRDtRQUVELE1BQU12RSxvRUFBcUIsQ0FBQztZQUMxQmUsS0FBSyxFQUFFO2dCQUNMTyxFQUFFLEVBQUVsQixLQUFLLENBQUMrRCxTQUFTO2FBQ3BCO1lBQ0RSLElBQUksRUFBRTtnQkFDSkgsT0FBTyxFQUFFcEQsS0FBSyxDQUFDMkUsVUFBVTthQUMxQjtTQUNGLENBQUMsQ0FBQztLQUNKO0NBQ0YsQ0FBQztBQUVKLGlFQUFlN0UsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9jb21tZW50LnRzPzU4YWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0Avc2VydmVyL2RiL2NsaWVudCc7XHJcbmltcG9ydCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL3Byb3RlY3RlZC1yb3V0ZXInO1xyXG5cclxuY29uc3QgY29tbWVudFJvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRBbGxCeVBvc3RJZCcsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHBvc3RJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCBjb21tZW50cyA9IGF3YWl0IHByaXNtYS5jb21tZW50LmZpbmRNYW55KHtcclxuICAgICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBwb3N0SWQ6IGlucHV0LnBvc3RJZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIF9jb3VudDogdHJ1ZSxcclxuICAgICAgICAgIGxpa2VzOiB0cnVlLFxyXG4gICAgICAgICAgdXNlcjogdHJ1ZSxcclxuICAgICAgICAgIGNoaWxkcmVuOiB7XHJcbiAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgIF9jb3VudDogdHJ1ZSxcclxuICAgICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZmlsdGVyZWRDb21tZW50cyA9IGNvbW1lbnRzXHJcbiAgICAgICAgLy8gLmZpbHRlcigoY29tbWVudCkgPT4gY29tbWVudC5fY291bnQuY2hpbGRyZW4gPiAwIHx8ICFjb21tZW50LmlzRGVsZXRlZClcclxuICAgICAgICAubWFwKCh7IF9jb3VudCwgbGlrZXMsIHVzZXIsIC4uLmNvbW1lbnREYXRhIH0pID0+ICh7XHJcbiAgICAgICAgICAuLi5jb21tZW50RGF0YSxcclxuICAgICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbGlrZUNvdW50OiBfY291bnQubGlrZXMsXHJcbiAgICAgICAgICByZXBsaWVzQ291bnQ6IF9jb3VudC5jaGlsZHJlbixcclxuICAgICAgICAgIGxpa2VkQnlNZTogbGlrZXMuc29tZShcclxuICAgICAgICAgICAgKHBvc3RMaWtlKSA9PiBwb3N0TGlrZS51c2VySWQgPT09IGN0eC5zZXNzaW9uLnVzZXIuaWRcclxuICAgICAgICAgICksXHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgY29uc3QgY29tbWVudHNNYXAgPSBuZXcgTWFwKFxyXG4gICAgICAgIGZpbHRlcmVkQ29tbWVudHMubWFwKChvYmplY3QpID0+IFtvYmplY3QuaWQsIG9iamVjdF0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBnZXRSZXBsaWVzQ291bnQgPSAoY29tOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29tbWVudCA9IGNvbW1lbnRzTWFwLmdldChjb20pITtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbkxpc3QgPSBjdXJyZW50Q29tbWVudC5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBudW1iZXJPZkRlbGV0ZWRDaGlsZHJlbiA9IGNoaWxkcmVuTGlzdC5yZWR1Y2UoXHJcbiAgICAgICAgICAoc3VtLCBjKSA9PiAoYy5pc0RlbGV0ZWQgPyBzdW0gKyAxIDogc3VtKSxcclxuICAgICAgICAgIDBcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBkaXJlY3RSZXBsaWVzID0gY2hpbGRyZW5MaXN0Lmxlbmd0aCAtIG51bWJlck9mRGVsZXRlZENoaWxkcmVuO1xyXG4gICAgICAgIGNoaWxkcmVuTGlzdFxyXG4gICAgICAgICAgLm1hcCgoY2hpbGQpID0+IGNoaWxkLmlkKVxyXG4gICAgICAgICAgLmZvckVhY2goKGNoaWxkSWQpID0+IHtcclxuICAgICAgICAgICAgZGlyZWN0UmVwbGllcyArPSBnZXRSZXBsaWVzQ291bnQoY2hpbGRJZCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRpcmVjdFJlcGxpZXM7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gZmlsdGVyZWRDb21tZW50c1xyXG4gICAgICAgIC5tYXAoKGNvbW1lbnREYXRhKSA9PiAoe1xyXG4gICAgICAgICAgLi4uY29tbWVudERhdGEsXHJcbiAgICAgICAgICByZXBsaWVzQ291bnQ6IGdldFJlcGxpZXNDb3VudChjb21tZW50RGF0YS5pZCksXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLmZpbHRlcigoY29tbWVudCkgPT4gY29tbWVudC5jaGlsZHJlbi5sZW5ndGggfHwgIWNvbW1lbnQuaXNEZWxldGVkKTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ2FkZCcsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHBvc3RJZDogei5zdHJpbmcoKSxcclxuICAgICAgcGFyZW50SWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG5cclxuICAgICAgY29uc3QgY3JlYXRlZENvbW1lbnQgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIG1lc3NhZ2U6IGlucHV0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICBwYXJlbnRJZDogaW5wdXQucGFyZW50SWQsXHJcbiAgICAgICAgICBwb3N0SWQ6IGlucHV0LnBvc3RJZCxcclxuICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBwcmlzbWEucG9zdC5maW5kRmlyc3RPclRocm93KHtcclxuICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5wb3N0SWQsXHJcbiAgICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIGlmKGlucHV0LnBhcmVudElkKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50Q29tbWVudCA9IGF3YWl0IHByaXNtYS5jb21tZW50LmZpbmRGaXJzdE9yVGhyb3coe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgaWQ6IGlucHV0LnBhcmVudElkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZihwYXJlbnRDb21tZW50LnVzZXJJZCAhPT0gY3R4LnNlc3Npb24udXNlci5pZCkge1xyXG4gICAgICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdXNlcklkOiBwYXJlbnRDb21tZW50LnVzZXJJZCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkudGhlbihub3RpZmljYXRpb249PnByaXNtYS5ub3RpZmljYXRpb25Db21tZW50UmVwbHkuY3JlYXRlKHtcclxuICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25JZDogbm90aWZpY2F0aW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudElkOiBjcmVhdGVkQ29tbWVudC5pZFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgfSBlbHNlIGlmKHBvc3QudXNlcklkICE9PSBjdHguc2Vzc2lvbi51c2VyLmlkKXtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHVzZXJJZDogcG9zdC51c2VySWQsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb249PnByaXNtYS5ub3RpZmljYXRpb25Qb3N0Q29tbWVudC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgbm90aWZpY2F0aW9uSWQ6IG5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgICAgICBjb21tZW50SWQ6IGNyZWF0ZWRDb21tZW50LmlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKVxyXG4gICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgXHJcblxyXG4gICAgLy8gICBjb25zdCBjb21tZW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuZmluZEZpcnN0T3JUaHJvdyh7XHJcbiAgICAvLyAgICAgd2hlcmU6IHtcclxuICAgIC8vICAgICAgIGlkOiBjcmVhdGVkQ29tbWVudC5pZCxcclxuICAgIC8vICAgICB9LFxyXG4gICAgLy8gICAgIGluY2x1ZGU6IHtcclxuICAgIC8vICAgICAgIF9jb3VudDogdHJ1ZSxcclxuICAgIC8vICAgICAgIGxpa2VzOiB0cnVlLFxyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgIH0pO1xyXG5cclxuICAgIC8vICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxyXG4gICAgLy8gICBjb25zdCB7IF9jb3VudCwgbGlrZXMsIC4uLmNvbW1lbnREYXRhIH0gPSBjb21tZW50O1xyXG5cclxuICAgIC8vICAgcmV0dXJuIHtcclxuICAgIC8vICAgICAuLi5jb21tZW50RGF0YSxcclxuICAgIC8vICAgICBsaWtlQ291bnQ6IF9jb3VudC5saWtlcyxcclxuICAgIC8vICAgICBsaWtlZEJ5TWU6IGxpa2VzLnNvbWUoXHJcbiAgICAvLyAgICAgICAocG9zdExpa2UpID0+IHBvc3RMaWtlLnVzZXJJZCA9PT0gY3R4LnNlc3Npb24udXNlci5pZFxyXG4gICAgLy8gICAgICksXHJcbiAgICAvLyAgIH07XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCdkZWxldGUnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBjb21tZW50SWQ6IHouc3RyaW5nKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBpbnB1dCwgY3R4IH0pIHtcclxuICAgICAgY29uc3QgaXNDdXJyZXRVc2VyUG9zdEF1dGhvciA9IGF3YWl0IHByaXNtYS5jb21tZW50LmNvdW50KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGlucHV0LmNvbW1lbnRJZCxcclxuICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCFpc0N1cnJldFVzZXJQb3N0QXV0aG9yKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ1lvdSBhcmUgbm90IHRoZSBvd25lciBvZiB0aGUgcG9zdCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBwcmlzbWEuY29tbWVudC51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZDogaW5wdXQuY29tbWVudElkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgaXNEZWxldGVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5tdXRhdGlvbigndG9nZ2xlTGlrZScsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIGNvbW1lbnRJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICBjb21tZW50SWQ6IGlucHV0LmNvbW1lbnRJZCxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgbGlrZSA9IGF3YWl0IHByaXNtYS5jb21tZW50TGlrZS5maW5kRmlyc3QoeyB3aGVyZTogZGF0YSB9KTtcclxuXHJcbiAgICAgIGlmIChsaWtlKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmNvbW1lbnRMaWtlLmRlbGV0ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB1c2VySWRfY29tbWVudElkOiBkYXRhLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdCBwcmlzbWEuY29tbWVudExpa2UuY3JlYXRlKHtcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21tZW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuZmluZEZpcnN0T3JUaHJvdyh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5jb21tZW50SWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICB1c2VyOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi51cGRhdGVkQ29tbWVudCxcclxuICAgICAgICBsaWtlZEJ5TWU6IGxpa2UgPT09IG51bGwsXHJcbiAgICAgICAgbGlrZUNvdW50OiBhd2FpdCBwcmlzbWEuY29tbWVudExpa2UuY291bnQoe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgY29tbWVudElkOiBpbnB1dC5jb21tZW50SWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5tdXRhdGlvbigndXBkYXRlJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgY29tbWVudElkOiB6LnN0cmluZygpLFxyXG4gICAgICBuZXdDb250ZW50OiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgaW5wdXQsIGN0eCB9KSB7XHJcbiAgICAgIGNvbnN0IGlzQ3VycmV0VXNlclBvc3RBdXRob3IgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jb3VudCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5jb21tZW50SWQsXHJcbiAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghaXNDdXJyZXRVc2VyUG9zdEF1dGhvcikge1xyXG4gICAgICAgIHRocm93IEVycm9yKCdZb3UgYXJlIG5vdCB0aGUgb3duZXIgb2YgdGhlIHBvc3QnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgcHJpc21hLmNvbW1lbnQudXBkYXRlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGlucHV0LmNvbW1lbnRJZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIG1lc3NhZ2U6IGlucHV0Lm5ld0NvbnRlbnQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29tbWVudFJvdXRlcjtcclxuIl0sIm5hbWVzIjpbInoiLCJwcmlzbWEiLCJjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIiLCJjb21tZW50Um91dGVyIiwicXVlcnkiLCJpbnB1dCIsIm9iamVjdCIsInBvc3RJZCIsInN0cmluZyIsInJlc29sdmUiLCJjdHgiLCJjb21tZW50cyIsImNvbW1lbnQiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ3aGVyZSIsImluY2x1ZGUiLCJfY291bnQiLCJsaWtlcyIsInVzZXIiLCJjaGlsZHJlbiIsInNlbGVjdCIsImlkIiwiaXNEZWxldGVkIiwiZmlsdGVyZWRDb21tZW50cyIsIm1hcCIsImNvbW1lbnREYXRhIiwibmFtZSIsImltYWdlIiwibGlrZUNvdW50IiwicmVwbGllc0NvdW50IiwibGlrZWRCeU1lIiwic29tZSIsInBvc3RMaWtlIiwidXNlcklkIiwic2Vzc2lvbiIsImNvbW1lbnRzTWFwIiwiTWFwIiwiZ2V0UmVwbGllc0NvdW50IiwiY29tIiwiY3VycmVudENvbW1lbnQiLCJnZXQiLCJjaGlsZHJlbkxpc3QiLCJudW1iZXJPZkRlbGV0ZWRDaGlsZHJlbiIsInJlZHVjZSIsInN1bSIsImMiLCJkaXJlY3RSZXBsaWVzIiwibGVuZ3RoIiwiY2hpbGQiLCJmb3JFYWNoIiwiY2hpbGRJZCIsImZpbHRlciIsIm11dGF0aW9uIiwicGFyZW50SWQiLCJudWxsYWJsZSIsIm1lc3NhZ2UiLCJjcmVhdGVkQ29tbWVudCIsImNyZWF0ZSIsImRhdGEiLCJwb3N0IiwiZmluZEZpcnN0T3JUaHJvdyIsInBhcmVudENvbW1lbnQiLCJub3RpZmljYXRpb24iLCJ0aGVuIiwibm90aWZpY2F0aW9uQ29tbWVudFJlcGx5Iiwibm90aWZpY2F0aW9uSWQiLCJjb21tZW50SWQiLCJub3RpZmljYXRpb25Qb3N0Q29tbWVudCIsImlzQ3VycmV0VXNlclBvc3RBdXRob3IiLCJjb3VudCIsIkVycm9yIiwidXBkYXRlIiwibGlrZSIsImNvbW1lbnRMaWtlIiwiZmluZEZpcnN0IiwiZGVsZXRlIiwidXNlcklkX2NvbW1lbnRJZCIsInVwZGF0ZWRDb21tZW50IiwibmV3Q29udGVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/router/comment.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/community.ts":
/*!****************************************!*\
  !*** ./src/server/router/community.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./src/server/router/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable @typescript-eslint/naming-convention */ \n\n\n\nconst communityRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().query(\"getAll\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).max(100).nullish(),\n        cursor: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        filter: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }),\n    async resolve ({ input , ctx  }) {\n        const { cursor  } = input;\n        const limit = 10;\n        let membersFilter;\n        if (input?.filter === \"joined\") {\n            membersFilter = {\n                some: {\n                    userId: ctx.session.user.id\n                }\n            };\n        }\n        if (input?.filter === \"owned\") {\n            membersFilter = {\n                some: {\n                    role: \"ADMIN\",\n                    userId: ctx.session.user.id\n                }\n            };\n        }\n        const communities = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findMany({\n            take: limit + 1,\n            where: {\n                category: {\n                    id: input?.categoryId\n                },\n                favouriteBy: input?.filter === \"favourite\" ? {\n                    some: {\n                        userId: ctx.session.user.id\n                    }\n                } : undefined,\n                members: membersFilter\n            },\n            include: _utils__WEBPACK_IMPORTED_MODULE_3__.communityListInclude,\n            cursor: cursor ? {\n                id: cursor\n            } : undefined,\n            orderBy: {\n                members: {\n                    _count: \"desc\"\n                }\n            }\n        });\n        const populatedList = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateCommunitiesList)(communities, ctx.session.user.id);\n        let nextCursor;\n        if (populatedList.length > limit) {\n            const nextItem = populatedList.pop();\n            nextCursor = nextItem.id;\n        }\n        return {\n            posts: populatedList,\n            nextCursor\n        };\n    }\n}).query(\"getById\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ ctx , input  }) {\n        const community = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findUniqueOrThrow({\n            where: {\n                id: input.id\n            },\n            include: {\n                category: true,\n                _count: true,\n                favouriteBy: {\n                    select: {\n                        userId: true\n                    }\n                }\n            }\n        });\n        const member = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.findUnique({\n            where: {\n                userId_communityId: {\n                    userId: ctx.session.user.id,\n                    communityId: input.id\n                }\n            }\n        });\n        const { _count , favouriteBy , ...communityData } = community;\n        return {\n            ...communityData,\n            membersCount: _count.members,\n            joinedByMe: !!member,\n            isMyfavourite: favouriteBy.some((user)=>user.userId === ctx.session.user.id),\n            isOwner: member?.role === \"ADMIN\"\n        };\n    }\n}).query(\"getMembers\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const myFollowing = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: ctx.session.user.id\n                    }\n                }\n            }\n        });\n        const myFollowingIds = myFollowing.map((user)=>user.id);\n        const members = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                communities: {\n                    some: {\n                        communityId: input.communityId\n                    }\n                }\n            },\n            include: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUsersListInclude)(myFollowingIds)\n        });\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateUsersList)(members, myFollowingIds);\n    }\n}).mutation(\"addCommunity\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        categoryId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ ctx , input  }) {\n        return _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.create({\n            data: {\n                name: input.name,\n                description: input.description,\n                category: {\n                    connect: {\n                        id: input.categoryId\n                    }\n                },\n                members: {\n                    create: {\n                        role: \"ADMIN\",\n                        userId: ctx.session.user.id\n                    }\n                }\n            }\n        });\n    }\n}).mutation(\"markAsFavourite\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ ctx , input  }) {\n        const favouriteCommunity = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.favouriteCommunity.findUnique({\n            where: {\n                userId_communityId: {\n                    userId: ctx.session.user.id,\n                    communityId: input.communityId\n                }\n            }\n        });\n        if (favouriteCommunity) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.favouriteCommunity[\"delete\"]({\n                where: {\n                    userId_communityId: {\n                        communityId: input.communityId,\n                        userId: ctx.session.user.id\n                    }\n                }\n            });\n        } else {\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.favouriteCommunity.create({\n                data: {\n                    communityId: input.communityId,\n                    userId: ctx.session.user.id\n                }\n            });\n        }\n    }\n}).query(\"popular\", {\n    async resolve () {\n        const data = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.groupBy({\n            by: [\n                \"communityId\"\n            ],\n            _count: {\n                communityId: true,\n                userId: true\n            },\n            orderBy: {\n                _count: {\n                    userId: \"desc\"\n                }\n            },\n            take: 5\n        });\n        const comminitiesIds = data.map((userCommunity)=>userCommunity.communityId);\n        const comunitiesNames = await Promise.all(comminitiesIds.map((id)=>_db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findFirstOrThrow({\n                where: {\n                    id\n                },\n                select: {\n                    name: true\n                }\n            })));\n        return data.map(({ _count , ...userCommunityData }, index)=>({\n                ...userCommunityData,\n                communityName: comunitiesNames[index]?.name,\n                members: _count.userId\n            }));\n    }\n}).query(\"getAllCategories\", {\n    async resolve () {\n        const categores = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.category.findMany({\n            include: {\n                _count: {\n                    select: {\n                        comunities: true\n                    }\n                }\n            }\n        });\n        return categores.map(({ _count , ...categoryData })=>({\n                ...categoryData,\n                communitiesCount: _count.comunities\n            }));\n    }\n}).mutation(\"toggleMembership\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const member = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.findUnique({\n            where: {\n                userId_communityId: {\n                    userId: ctx.session.user.id,\n                    communityId: input.communityId\n                }\n            }\n        });\n        if (member) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity[\"delete\"]({\n                where: {\n                    userId_communityId: {\n                        communityId: input.communityId,\n                        userId: ctx.session.user.id\n                    }\n                }\n            });\n        } else {\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.create({\n                data: {\n                    communityId: input.communityId,\n                    userId: ctx.session.user.id\n                }\n            });\n            const communityOwner = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.findFirstOrThrow({\n                where: {\n                    role: \"ADMIN\",\n                    communityId: input.communityId\n                }\n            });\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.notification.create({\n                data: {\n                    userId: communityOwner.userId\n                }\n            }).then((notification)=>_db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.notificationCommunityNewMember.create({\n                    data: {\n                        notificationId: notification.id,\n                        communityId: input.communityId,\n                        userId: ctx.session.user.id\n                    }\n                }));\n        }\n    }\n}).mutation(\"update\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        image: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        bannerImage: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        category: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }),\n    async resolve ({ ctx , input  }) {\n        const user = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.userCommunity.findUnique({\n            where: {\n                userId_communityId: {\n                    communityId: input.communityId,\n                    userId: ctx.session.user.id\n                }\n            }\n        });\n        if (user?.role !== \"ADMIN\") {\n            throw new Error(\"You dont have permissions to modify this community\");\n        }\n        await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.update({\n            where: {\n                id: input.communityId\n            },\n            data: {\n                name: input.name,\n                description: input.description,\n                image: input.image,\n                bannerImage: input.bannerImage,\n                categoryId: input.category\n            }\n        });\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (communityRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9jb21tdW5pdHkudHM/ODZjZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IGNyZWF0ZVByb3RlY3RlZFJvdXRlciBmcm9tICdAL3NlcnZlci9yb3V0ZXIvcHJvdGVjdGVkLXJvdXRlcic7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uL2RiL2NsaWVudCc7XHJcbmltcG9ydCB7XHJcbiAgY29tbXVuaXR5TGlzdEluY2x1ZGUsXHJcbiAgZ2V0VXNlcnNMaXN0SW5jbHVkZSxcclxuICBwb3B1bGF0ZUNvbW11bml0aWVzTGlzdCxcclxuICBwb3B1bGF0ZVVzZXJzTGlzdCxcclxufSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmNvbnN0IGNvbW11bml0eVJvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRBbGwnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkubnVsbGlzaCgpLFxyXG4gICAgICBjdXJzb3I6IHouc3RyaW5nKCkubnVsbGlzaCgpLFxyXG5cclxuICAgICAgY2F0ZWdvcnlJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gICAgICBmaWx0ZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCB7IGN1cnNvciB9ID0gaW5wdXQ7XHJcbiAgICAgIGNvbnN0IGxpbWl0ID0gMTA7XHJcblxyXG4gICAgICBsZXQgbWVtYmVyc0ZpbHRlcjogUHJpc21hLlVzZXJDb21tdW5pdHlMaXN0UmVsYXRpb25GaWx0ZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBpZiAoaW5wdXQ/LmZpbHRlciA9PT0gJ2pvaW5lZCcpIHtcclxuICAgICAgICBtZW1iZXJzRmlsdGVyID0ge1xyXG4gICAgICAgICAgc29tZToge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpbnB1dD8uZmlsdGVyID09PSAnb3duZWQnKSB7XHJcbiAgICAgICAgbWVtYmVyc0ZpbHRlciA9IHtcclxuICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgcm9sZTogJ0FETUlOJyxcclxuICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb21tdW5pdGllcyA9IGF3YWl0IHByaXNtYS5jb21tdW5pdHkuZmluZE1hbnkoe1xyXG4gICAgICAgIHRha2U6IGxpbWl0ICsgMSxcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgY2F0ZWdvcnk6IHtcclxuICAgICAgICAgICAgaWQ6IGlucHV0Py5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZhdm91cml0ZUJ5OlxyXG4gICAgICAgICAgICBpbnB1dD8uZmlsdGVyID09PSAnZmF2b3VyaXRlJ1xyXG4gICAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgbWVtYmVyczogbWVtYmVyc0ZpbHRlcixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IGNvbW11bml0eUxpc3RJbmNsdWRlLFxyXG4gICAgICAgIGN1cnNvcjogY3Vyc29yID8geyBpZDogY3Vyc29yIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb3JkZXJCeToge1xyXG4gICAgICAgICAgbWVtYmVyczoge1xyXG4gICAgICAgICAgICBfY291bnQ6ICdkZXNjJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBwb3B1bGF0ZWRMaXN0ID0gcG9wdWxhdGVDb21tdW5pdGllc0xpc3QoXHJcbiAgICAgICAgY29tbXVuaXRpZXMsXHJcbiAgICAgICAgY3R4LnNlc3Npb24udXNlci5pZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgbGV0IG5leHRDdXJzb3I6IHR5cGVvZiBjdXJzb3IgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBpZiAocG9wdWxhdGVkTGlzdC5sZW5ndGggPiBsaW1pdCkge1xyXG4gICAgICAgIGNvbnN0IG5leHRJdGVtID0gcG9wdWxhdGVkTGlzdC5wb3AoKTtcclxuICAgICAgICBuZXh0Q3Vyc29yID0gbmV4dEl0ZW0hLmlkO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcG9zdHM6IHBvcHVsYXRlZExpc3QsXHJcbiAgICAgICAgbmV4dEN1cnNvcixcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ2dldEJ5SWQnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBpZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGN0eCwgaW5wdXQgfSkge1xyXG4gICAgICBjb25zdCBjb21tdW5pdHkgPSBhd2FpdCBwcmlzbWEuY29tbXVuaXR5LmZpbmRVbmlxdWVPclRocm93KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGlucHV0LmlkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgY2F0ZWdvcnk6IHRydWUsXHJcbiAgICAgICAgICBfY291bnQ6IHRydWUsXHJcbiAgICAgICAgICBmYXZvdXJpdGVCeToge1xyXG4gICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICB1c2VySWQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbWVtYmVyID0gYXdhaXQgcHJpc21hLnVzZXJDb21tdW5pdHkuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHVzZXJJZF9jb21tdW5pdHlJZDoge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIGNvbW11bml0eUlkOiBpbnB1dC5pZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB7IF9jb3VudCwgZmF2b3VyaXRlQnksIC4uLmNvbW11bml0eURhdGEgfSA9IGNvbW11bml0eTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5jb21tdW5pdHlEYXRhLFxyXG4gICAgICAgIG1lbWJlcnNDb3VudDogX2NvdW50Lm1lbWJlcnMsXHJcbiAgICAgICAgam9pbmVkQnlNZTogISFtZW1iZXIsXHJcbiAgICAgICAgaXNNeWZhdm91cml0ZTogZmF2b3VyaXRlQnkuc29tZShcclxuICAgICAgICAgICh1c2VyKSA9PiB1c2VyLnVzZXJJZCA9PT0gY3R4LnNlc3Npb24udXNlci5pZFxyXG4gICAgICAgICksXHJcbiAgICAgICAgaXNPd25lcjogbWVtYmVyPy5yb2xlID09PSAnQURNSU4nLFxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5xdWVyeSgnZ2V0TWVtYmVycycsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIGNvbW11bml0eUlkOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgaW5wdXQsIGN0eCB9KSB7XHJcbiAgICAgIGNvbnN0IG15Rm9sbG93aW5nID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBmb2xsb3dlZEJ5OiB7XHJcbiAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBteUZvbGxvd2luZ0lkcyA9IG15Rm9sbG93aW5nLm1hcCgodXNlcikgPT4gdXNlci5pZCk7XHJcblxyXG4gICAgICBjb25zdCBtZW1iZXJzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjb21tdW5pdGllczoge1xyXG4gICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgY29tbXVuaXR5SWQ6IGlucHV0LmNvbW11bml0eUlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IGdldFVzZXJzTGlzdEluY2x1ZGUobXlGb2xsb3dpbmdJZHMpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBwb3B1bGF0ZVVzZXJzTGlzdChtZW1iZXJzLCBteUZvbGxvd2luZ0lkcyk7XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCdhZGRDb21tdW5pdHknLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBuYW1lOiB6LnN0cmluZygpLFxyXG4gICAgICBjYXRlZ29yeUlkOiB6LnN0cmluZygpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKVxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgY3R4LCBpbnB1dCB9KSB7XHJcbiAgICAgIHJldHVybiBwcmlzbWEuY29tbXVuaXR5LmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOmlucHV0LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6IHtcclxuICAgICAgICAgICAgY29ubmVjdDoge1xyXG4gICAgICAgICAgICAgIGlkOiBpbnB1dC5jYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1lbWJlcnM6IHtcclxuICAgICAgICAgICAgY3JlYXRlOiB7XHJcbiAgICAgICAgICAgICAgcm9sZTogJ0FETUlOJyxcclxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5tdXRhdGlvbignbWFya0FzRmF2b3VyaXRlJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgY29tbXVuaXR5SWQ6IHouc3RyaW5nKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgZmF2b3VyaXRlQ29tbXVuaXR5ID0gYXdhaXQgcHJpc21hLmZhdm91cml0ZUNvbW11bml0eS5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgdXNlcklkX2NvbW11bml0eUlkOiB7XHJcbiAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgY29tbXVuaXR5SWQ6IGlucHV0LmNvbW11bml0eUlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChmYXZvdXJpdGVDb21tdW5pdHkpIHtcclxuICAgICAgICBhd2FpdCBwcmlzbWEuZmF2b3VyaXRlQ29tbXVuaXR5LmRlbGV0ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB1c2VySWRfY29tbXVuaXR5SWQ6IHtcclxuICAgICAgICAgICAgICBjb21tdW5pdHlJZDogaW5wdXQuY29tbXVuaXR5SWQsXHJcbiAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdCBwcmlzbWEuZmF2b3VyaXRlQ29tbXVuaXR5LmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGNvbW11bml0eUlkOiBpbnB1dC5jb21tdW5pdHlJZCxcclxuICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KVxyXG4gIC5xdWVyeSgncG9wdWxhcicsIHtcclxuICAgIGFzeW5jIHJlc29sdmUoKSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcmlzbWEudXNlckNvbW11bml0eS5ncm91cEJ5KHtcclxuICAgICAgICBieTogWydjb21tdW5pdHlJZCddLFxyXG4gICAgICAgIF9jb3VudDoge1xyXG4gICAgICAgICAgY29tbXVuaXR5SWQ6IHRydWUsXHJcbiAgICAgICAgICB1c2VySWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgICAgdXNlcklkOiAnZGVzYycsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFrZTogNSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjb21taW5pdGllc0lkcyA9IGRhdGEubWFwKFxyXG4gICAgICAgICh1c2VyQ29tbXVuaXR5KSA9PiB1c2VyQ29tbXVuaXR5LmNvbW11bml0eUlkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBjb211bml0aWVzTmFtZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICBjb21taW5pdGllc0lkcy5tYXAoKGlkKSA9PlxyXG4gICAgICAgICAgcHJpc21hLmNvbW11bml0eS5maW5kRmlyc3RPclRocm93KHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIGRhdGEubWFwKCh7IF9jb3VudCwgLi4udXNlckNvbW11bml0eURhdGEgfSwgaW5kZXgpID0+ICh7XHJcbiAgICAgICAgLi4udXNlckNvbW11bml0eURhdGEsXHJcbiAgICAgICAgY29tbXVuaXR5TmFtZTogY29tdW5pdGllc05hbWVzW2luZGV4XT8ubmFtZSEsXHJcbiAgICAgICAgbWVtYmVyczogX2NvdW50LnVzZXJJZCxcclxuICAgICAgfSkpO1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5xdWVyeSgnZ2V0QWxsQ2F0ZWdvcmllcycsIHtcclxuICAgIGFzeW5jIHJlc29sdmUoKSB7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3JlcyA9IGF3YWl0IHByaXNtYS5jYXRlZ29yeS5maW5kTWFueSh7XHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgX2NvdW50OiB7XHJcbiAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgIGNvbXVuaXRpZXM6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGNhdGVnb3Jlcy5tYXAoKHsgX2NvdW50LCAuLi5jYXRlZ29yeURhdGEgfSkgPT4gKHtcclxuICAgICAgICAuLi5jYXRlZ29yeURhdGEsXHJcbiAgICAgICAgY29tbXVuaXRpZXNDb3VudDogX2NvdW50LmNvbXVuaXRpZXMsXHJcbiAgICAgIH0pKTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ3RvZ2dsZU1lbWJlcnNoaXAnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBjb21tdW5pdHlJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG5cclxuICAgICAgY29uc3QgbWVtYmVyID0gYXdhaXQgcHJpc21hLnVzZXJDb21tdW5pdHkuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHVzZXJJZF9jb21tdW5pdHlJZDoge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIGNvbW11bml0eUlkOiBpbnB1dC5jb21tdW5pdHlJZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobWVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXJDb21tdW5pdHkuZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIHVzZXJJZF9jb21tdW5pdHlJZDoge1xyXG4gICAgICAgICAgICAgIGNvbW11bml0eUlkOiBpbnB1dC5jb21tdW5pdHlJZCxcclxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyQ29tbXVuaXR5LmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGNvbW11bml0eUlkOiBpbnB1dC5jb21tdW5pdHlJZCxcclxuICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tbXVuaXR5T3duZXIgPSBhd2FpdCBwcmlzbWEudXNlckNvbW11bml0eS5maW5kRmlyc3RPclRocm93KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIHJvbGU6IFwiQURNSU5cIixcclxuICAgICAgICAgICAgY29tbXVuaXR5SWQ6IGlucHV0LmNvbW11bml0eUlkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGNvbW11bml0eU93bmVyLnVzZXJJZCxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbj0+cHJpc21hLm5vdGlmaWNhdGlvbkNvbW11bml0eU5ld01lbWJlci5jcmVhdGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgbm90aWZpY2F0aW9uSWQ6IG5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgICAgICBjb21tdW5pdHlJZDogaW5wdXQuY29tbXVuaXR5SWQsXHJcbiAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCd1cGRhdGUnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBjb21tdW5pdHlJZDogei5zdHJpbmcoKSxcclxuICAgICAgbmFtZTogei5zdHJpbmcoKSxcclxuICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXHJcbiAgICAgIGltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICAgIGJhbm5lckltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICAgIGNhdGVnb3J5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyQ29tbXVuaXR5LmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICB1c2VySWRfY29tbXVuaXR5SWQ6IHtcclxuICAgICAgICAgICAgY29tbXVuaXR5SWQ6IGlucHV0LmNvbW11bml0eUlkLFxyXG4gICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHVzZXI/LnJvbGUgIT09ICdBRE1JTicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBkb250IGhhdmUgcGVybWlzc2lvbnMgdG8gbW9kaWZ5IHRoaXMgY29tbXVuaXR5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHByaXNtYS5jb21tdW5pdHkudXBkYXRlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGlucHV0LmNvbW11bml0eUlkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgIGltYWdlOiBpbnB1dC5pbWFnZSxcclxuICAgICAgICAgIGJhbm5lckltYWdlOiBpbnB1dC5iYW5uZXJJbWFnZSxcclxuICAgICAgICAgIGNhdGVnb3J5SWQ6IGlucHV0LmNhdGVnb3J5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbW11bml0eVJvdXRlcjtcclxuIl0sIm5hbWVzIjpbInoiLCJjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIiLCJwcmlzbWEiLCJjb21tdW5pdHlMaXN0SW5jbHVkZSIsImdldFVzZXJzTGlzdEluY2x1ZGUiLCJwb3B1bGF0ZUNvbW11bml0aWVzTGlzdCIsInBvcHVsYXRlVXNlcnNMaXN0IiwiY29tbXVuaXR5Um91dGVyIiwicXVlcnkiLCJpbnB1dCIsIm9iamVjdCIsImxpbWl0IiwibnVtYmVyIiwibWluIiwibWF4IiwibnVsbGlzaCIsImN1cnNvciIsInN0cmluZyIsImNhdGVnb3J5SWQiLCJvcHRpb25hbCIsImZpbHRlciIsInJlc29sdmUiLCJjdHgiLCJtZW1iZXJzRmlsdGVyIiwic29tZSIsInVzZXJJZCIsInNlc3Npb24iLCJ1c2VyIiwiaWQiLCJyb2xlIiwiY29tbXVuaXRpZXMiLCJjb21tdW5pdHkiLCJmaW5kTWFueSIsInRha2UiLCJ3aGVyZSIsImNhdGVnb3J5IiwiZmF2b3VyaXRlQnkiLCJ1bmRlZmluZWQiLCJtZW1iZXJzIiwiaW5jbHVkZSIsIm9yZGVyQnkiLCJfY291bnQiLCJwb3B1bGF0ZWRMaXN0IiwibmV4dEN1cnNvciIsImxlbmd0aCIsIm5leHRJdGVtIiwicG9wIiwicG9zdHMiLCJmaW5kVW5pcXVlT3JUaHJvdyIsInNlbGVjdCIsIm1lbWJlciIsInVzZXJDb21tdW5pdHkiLCJmaW5kVW5pcXVlIiwidXNlcklkX2NvbW11bml0eUlkIiwiY29tbXVuaXR5SWQiLCJjb21tdW5pdHlEYXRhIiwibWVtYmVyc0NvdW50Iiwiam9pbmVkQnlNZSIsImlzTXlmYXZvdXJpdGUiLCJpc093bmVyIiwibXlGb2xsb3dpbmciLCJmb2xsb3dlZEJ5IiwibXlGb2xsb3dpbmdJZHMiLCJtYXAiLCJtdXRhdGlvbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImNyZWF0ZSIsImRhdGEiLCJjb25uZWN0IiwiZmF2b3VyaXRlQ29tbXVuaXR5IiwiZGVsZXRlIiwiZ3JvdXBCeSIsImJ5IiwiY29tbWluaXRpZXNJZHMiLCJjb211bml0aWVzTmFtZXMiLCJQcm9taXNlIiwiYWxsIiwiZmluZEZpcnN0T3JUaHJvdyIsInVzZXJDb21tdW5pdHlEYXRhIiwiaW5kZXgiLCJjb21tdW5pdHlOYW1lIiwiY2F0ZWdvcmVzIiwiY29tdW5pdGllcyIsImNhdGVnb3J5RGF0YSIsImNvbW11bml0aWVzQ291bnQiLCJjb21tdW5pdHlPd25lciIsIm5vdGlmaWNhdGlvbiIsInRoZW4iLCJub3RpZmljYXRpb25Db21tdW5pdHlOZXdNZW1iZXIiLCJub3RpZmljYXRpb25JZCIsImltYWdlIiwiYmFubmVySW1hZ2UiLCJFcnJvciIsInVwZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/router/community.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/context.ts":
/*!**************************************!*\
  !*** ./src/server/router/context.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createContext\": () => (/* binding */ createContext),\n/* harmony export */   \"createRouter\": () => (/* binding */ createRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_trpc_server__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../pages/api/auth/[...nextauth] */ \"(api)/./src/pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__, _db_client__WEBPACK_IMPORTED_MODULE_3__]);\n([_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__, _db_client__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/server/router/context.ts\n\n\n\n\nconst createContext = async (opts)=>{\n    const req = opts?.req;\n    const res = opts?.res;\n    const session = req && res && await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.unstable_getServerSession)(req, res, _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_2__.authOptions);\n    return {\n        req,\n        res,\n        session,\n        prisma: _db_client__WEBPACK_IMPORTED_MODULE_3__.prisma\n    };\n};\nconst createRouter = ()=>_trpc_server__WEBPACK_IMPORTED_MODULE_0__.router();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9jb250ZXh0LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsK0JBQStCO0FBQ007QUFFcUM7QUFFVTtBQUM5QztBQUUvQixNQUFNTSxhQUFhLEdBQUcsT0FDM0JDLElBQXdDLEdBQ3JDO0lBQ0gsTUFBTUMsR0FBRyxHQUFHRCxJQUFJLEVBQUVDLEdBQUc7SUFDckIsTUFBTUMsR0FBRyxHQUFHRixJQUFJLEVBQUVFLEdBQUc7SUFFckIsTUFBTUMsT0FBTyxHQUNYRixHQUFHLElBQUlDLEdBQUcsSUFBSyxNQUFNUCxvRUFBZ0IsQ0FBQ00sR0FBRyxFQUFFQyxHQUFHLEVBQUVMLGtFQUFlLENBQUM7SUFFbEUsT0FBTztRQUNMSSxHQUFHO1FBQ0hDLEdBQUc7UUFDSEMsT0FBTztRQUNQTCxNQUFNO0tBQ1AsQ0FBQztDQUNILENBQUM7QUFJSyxNQUFNTSxZQUFZLEdBQUcsSUFBTVgsZ0RBQVcsRUFBVyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9jb250ZXh0LnRzPzY2NmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NlcnZlci9yb3V0ZXIvY29udGV4dC50c1xyXG5pbXBvcnQgKiBhcyB0cnBjIGZyb20gJ0B0cnBjL3NlcnZlcic7XHJcbmltcG9ydCAqIGFzIHRycGNOZXh0IGZyb20gJ0B0cnBjL3NlcnZlci9hZGFwdGVycy9uZXh0JztcclxuaW1wb3J0IHsgdW5zdGFibGVfZ2V0U2VydmVyU2Vzc2lvbiBhcyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcclxuXHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIGFzIG5leHRBdXRoT3B0aW9ucyB9IGZyb20gJy4uLy4uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0nO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9kYi9jbGllbnQnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbnRleHQgPSBhc3luYyAoXHJcbiAgb3B0cz86IHRycGNOZXh0LkNyZWF0ZU5leHRDb250ZXh0T3B0aW9uc1xyXG4pID0+IHtcclxuICBjb25zdCByZXEgPSBvcHRzPy5yZXE7XHJcbiAgY29uc3QgcmVzID0gb3B0cz8ucmVzO1xyXG5cclxuICBjb25zdCBzZXNzaW9uID1cclxuICAgIHJlcSAmJiByZXMgJiYgKGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIG5leHRBdXRoT3B0aW9ucykpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVxLFxyXG4gICAgcmVzLFxyXG4gICAgc2Vzc2lvbixcclxuICAgIHByaXNtYSxcclxuICB9O1xyXG59O1xyXG5cclxudHlwZSBDb250ZXh0ID0gdHJwYy5pbmZlckFzeW5jUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ29udGV4dD47XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUm91dGVyID0gKCkgPT4gdHJwYy5yb3V0ZXI8Q29udGV4dD4oKTtcclxuIl0sIm5hbWVzIjpbInRycGMiLCJ1bnN0YWJsZV9nZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwibmV4dEF1dGhPcHRpb25zIiwicHJpc21hIiwiY3JlYXRlQ29udGV4dCIsIm9wdHMiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwiY3JlYXRlUm91dGVyIiwicm91dGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/router/context.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/explore.ts":
/*!**************************************!*\
  !*** ./src/server/router/explore.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _protected_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./src/server/router/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst exploreRouter = (0,_protected_router__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().query(\"getSuggestedUsers\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).optional()\n    }).optional(),\n    async resolve ({ ctx , input  }) {\n        const limit = input?.limit || 10;\n        const myFollowing = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: ctx.session.user.id\n                    }\n                }\n            }\n        });\n        const myFollowingIds = myFollowing.map((user)=>user.id);\n        const suggestedUsers = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: {\n                            in: myFollowingIds\n                        }\n                    }\n                },\n                id: {\n                    notIn: [\n                        ...myFollowingIds,\n                        ctx.session.user.id\n                    ]\n                }\n            },\n            include: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUsersListInclude)(myFollowingIds)\n        });\n        const suggestedUsersIds = suggestedUsers.map((user)=>user.id);\n        const popularUsers = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                id: {\n                    notIn: [\n                        ...myFollowingIds,\n                        ...suggestedUsersIds,\n                        ctx.session.user.id, \n                    ]\n                }\n            },\n            include: {\n                followedBy: true,\n                _count: {\n                    select: {\n                        followedBy: true\n                    }\n                }\n            },\n            orderBy: {\n                followedBy: {\n                    _count: \"desc\"\n                }\n            },\n            take: limit\n        });\n        const populatedPopularUsers = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateUsersList)(popularUsers, myFollowingIds);\n        const populatedSuggestedUsers = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateUsersList)(suggestedUsers, myFollowingIds);\n        return [\n            ...populatedSuggestedUsers,\n            ...populatedPopularUsers\n        ].slice(0, limit);\n    }\n}).query(\"getSuggestedCommunities\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).optional()\n    }).optional(),\n    async resolve ({ ctx , input  }) {\n        const limit = input?.limit || 10;\n        const userCommunities = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findMany({\n            where: {\n                members: {\n                    some: {\n                        userId: ctx.session.user.id\n                    }\n                }\n            }\n        });\n        const userCommunitiesIds = userCommunities.map((user)=>user.id);\n        const userCommunitiesCategoryIds = userCommunities.map((user)=>user.categoryId);\n        const suggestedCommunities = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findMany({\n            where: {\n                categoryId: {\n                    in: userCommunitiesCategoryIds\n                },\n                id: {\n                    notIn: userCommunitiesIds\n                }\n            },\n            include: _utils__WEBPACK_IMPORTED_MODULE_3__.communityListInclude\n        });\n        const suggestedCommunitiesIds = suggestedCommunities.map((community)=>community.id);\n        const popularCommunities = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findMany({\n            where: {\n                id: {\n                    notIn: [\n                        ...userCommunitiesIds,\n                        ...suggestedCommunitiesIds\n                    ]\n                }\n            },\n            include: _utils__WEBPACK_IMPORTED_MODULE_3__.communityListInclude,\n            take: limit\n        });\n        const populatedSuggestedCommunities = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateCommunitiesList)(suggestedCommunities, ctx.session.user.id);\n        const populatedPopularCommunitiesList = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateCommunitiesList)(popularCommunities, ctx.session.user.id);\n        return [\n            ...populatedSuggestedCommunities,\n            ...populatedPopularCommunitiesList, \n        ].slice(0, limit);\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (exploreRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBQztpQkFDM0Q7YUFDRjtZQUNEbEIsT0FBTyxFQUFFM0Isd0RBQW9CO1lBQzdCaUMsSUFBSSxFQUFFekIsS0FBSztTQUNaLENBQUM7UUFFRixNQUFNdUMsNkJBQTZCLEdBQUc3QywrREFBdUIsQ0FDM0QwQyxvQkFBb0IsRUFDcEIvQixHQUFHLENBQUNRLE9BQU8sQ0FBQ04sSUFBSSxDQUFDSyxFQUFFLENBQ3BCO1FBRUQsTUFBTTRCLCtCQUErQixHQUFHOUMsK0RBQXVCLENBQzdENEMsa0JBQWtCLEVBQ2xCakMsR0FBRyxDQUFDUSxPQUFPLENBQUNOLElBQUksQ0FBQ0ssRUFBRSxDQUNwQjtRQUVELE9BQU87ZUFDRjJCLDZCQUE2QjtlQUM3QkMsK0JBQStCO1NBQ25DLENBQUNaLEtBQUssQ0FBQyxDQUFDLEVBQUU1QixLQUFLLENBQUMsQ0FBQztLQUNuQjtDQUNGLENBQUM7QUFFSixpRUFBZUosYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9leHBsb3JlLnRzP2MyODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIgZnJvbSAnLi9wcm90ZWN0ZWQtcm91dGVyJztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vZGIvY2xpZW50JztcclxuaW1wb3J0IHtcclxuICBjb21tdW5pdHlMaXN0SW5jbHVkZSxcclxuICBnZXRVc2Vyc0xpc3RJbmNsdWRlLFxyXG4gIHBvcHVsYXRlQ29tbXVuaXRpZXNMaXN0LFxyXG4gIHBvcHVsYXRlVXNlcnNMaXN0LFxyXG59IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuY29uc3QgZXhwbG9yZVJvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRTdWdnZXN0ZWRVc2VycycsIHtcclxuICAgIGlucHV0OiB6XHJcbiAgICAgIC5vYmplY3Qoe1xyXG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm1pbigxKS5vcHRpb25hbCgpLFxyXG4gICAgICB9KVxyXG4gICAgICAub3B0aW9uYWwoKSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgbGltaXQgPSBpbnB1dD8ubGltaXQgfHwgMTA7XHJcbiAgICAgIGNvbnN0IG15Rm9sbG93aW5nID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBmb2xsb3dlZEJ5OiB7XHJcbiAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBteUZvbGxvd2luZ0lkcyA9IG15Rm9sbG93aW5nLm1hcCgodXNlcikgPT4gdXNlci5pZCk7XHJcblxyXG4gICAgICBjb25zdCBzdWdnZXN0ZWRVc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgZm9sbG93ZWRCeToge1xyXG4gICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgaWQ6IHtcclxuICAgICAgICAgICAgICAgIGluOiBteUZvbGxvd2luZ0lkcyxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGlkOiB7XHJcbiAgICAgICAgICAgIG5vdEluOiBbLi4ubXlGb2xsb3dpbmdJZHMsIGN0eC5zZXNzaW9uLnVzZXIuaWRdLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IGdldFVzZXJzTGlzdEluY2x1ZGUobXlGb2xsb3dpbmdJZHMpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN1Z2dlc3RlZFVzZXJzSWRzID0gc3VnZ2VzdGVkVXNlcnMubWFwKCh1c2VyKSA9PiB1c2VyLmlkKTtcclxuXHJcbiAgICAgIGNvbnN0IHBvcHVsYXJVc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IHtcclxuICAgICAgICAgICAgbm90SW46IFtcclxuICAgICAgICAgICAgICAuLi5teUZvbGxvd2luZ0lkcyxcclxuICAgICAgICAgICAgICAuLi5zdWdnZXN0ZWRVc2Vyc0lkcyxcclxuICAgICAgICAgICAgICBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIGZvbGxvd2VkQnk6IHRydWUsXHJcbiAgICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgZm9sbG93ZWRCeTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgICBmb2xsb3dlZEJ5OiB7XHJcbiAgICAgICAgICAgIF9jb3VudDogJ2Rlc2MnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRha2U6IGxpbWl0LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHBvcHVsYXRlZFBvcHVsYXJVc2VycyA9IHBvcHVsYXRlVXNlcnNMaXN0KFxyXG4gICAgICAgIHBvcHVsYXJVc2VycyxcclxuICAgICAgICBteUZvbGxvd2luZ0lkc1xyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcG9wdWxhdGVkU3VnZ2VzdGVkVXNlcnMgPSBwb3B1bGF0ZVVzZXJzTGlzdChcclxuICAgICAgICBzdWdnZXN0ZWRVc2VycyxcclxuICAgICAgICBteUZvbGxvd2luZ0lkc1xyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIFsuLi5wb3B1bGF0ZWRTdWdnZXN0ZWRVc2VycywgLi4ucG9wdWxhdGVkUG9wdWxhclVzZXJzXS5zbGljZShcclxuICAgICAgICAwLFxyXG4gICAgICAgIGxpbWl0XHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLnF1ZXJ5KCdnZXRTdWdnZXN0ZWRDb21tdW5pdGllcycsIHtcclxuICAgIGlucHV0OiB6XHJcbiAgICAgIC5vYmplY3Qoe1xyXG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm1pbigxKS5vcHRpb25hbCgpLFxyXG4gICAgICB9KVxyXG4gICAgICAub3B0aW9uYWwoKSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgbGltaXQgPSBpbnB1dD8ubGltaXQgfHwgMTA7XHJcbiAgICAgIGNvbnN0IHVzZXJDb21tdW5pdGllcyA9IGF3YWl0IHByaXNtYS5jb21tdW5pdHkuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBtZW1iZXJzOiB7XHJcbiAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdXNlckNvbW11bml0aWVzSWRzID0gdXNlckNvbW11bml0aWVzLm1hcCgodXNlcikgPT4gdXNlci5pZCk7XHJcbiAgICAgIGNvbnN0IHVzZXJDb21tdW5pdGllc0NhdGVnb3J5SWRzID0gdXNlckNvbW11bml0aWVzLm1hcChcclxuICAgICAgICAodXNlcikgPT4gdXNlci5jYXRlZ29yeUlkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBzdWdnZXN0ZWRDb21tdW5pdGllcyA9IGF3YWl0IHByaXNtYS5jb21tdW5pdHkuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjYXRlZ29yeUlkOiB7XHJcbiAgICAgICAgICAgIGluOiB1c2VyQ29tbXVuaXRpZXNDYXRlZ29yeUlkcyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICBub3RJbjogdXNlckNvbW11bml0aWVzSWRzLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IGNvbW11bml0eUxpc3RJbmNsdWRlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN1Z2dlc3RlZENvbW11bml0aWVzSWRzID0gc3VnZ2VzdGVkQ29tbXVuaXRpZXMubWFwKFxyXG4gICAgICAgIChjb21tdW5pdHkpID0+IGNvbW11bml0eS5pZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcG9wdWxhckNvbW11bml0aWVzID0gYXdhaXQgcHJpc21hLmNvbW11bml0eS5maW5kTWFueSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiB7XHJcbiAgICAgICAgICAgIG5vdEluOiBbLi4udXNlckNvbW11bml0aWVzSWRzLCAuLi5zdWdnZXN0ZWRDb21tdW5pdGllc0lkc10sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZTogY29tbXVuaXR5TGlzdEluY2x1ZGUsXHJcbiAgICAgICAgdGFrZTogbGltaXQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcG9wdWxhdGVkU3VnZ2VzdGVkQ29tbXVuaXRpZXMgPSBwb3B1bGF0ZUNvbW11bml0aWVzTGlzdChcclxuICAgICAgICBzdWdnZXN0ZWRDb21tdW5pdGllcyxcclxuICAgICAgICBjdHguc2Vzc2lvbi51c2VyLmlkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBwb3B1bGF0ZWRQb3B1bGFyQ29tbXVuaXRpZXNMaXN0ID0gcG9wdWxhdGVDb21tdW5pdGllc0xpc3QoXHJcbiAgICAgICAgcG9wdWxhckNvbW11bml0aWVzLFxyXG4gICAgICAgIGN0eC5zZXNzaW9uLnVzZXIuaWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiBbXHJcbiAgICAgICAgLi4ucG9wdWxhdGVkU3VnZ2VzdGVkQ29tbXVuaXRpZXMsXHJcbiAgICAgICAgLi4ucG9wdWxhdGVkUG9wdWxhckNvbW11bml0aWVzTGlzdCxcclxuICAgICAgXS5zbGljZSgwLCBsaW1pdCk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZXhwbG9yZVJvdXRlcjtcclxuIl0sIm5hbWVzIjpbInoiLCJjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIiLCJwcmlzbWEiLCJjb21tdW5pdHlMaXN0SW5jbHVkZSIsImdldFVzZXJzTGlzdEluY2x1ZGUiLCJwb3B1bGF0ZUNvbW11bml0aWVzTGlzdCIsInBvcHVsYXRlVXNlcnNMaXN0IiwiZXhwbG9yZVJvdXRlciIsInF1ZXJ5IiwiaW5wdXQiLCJvYmplY3QiLCJsaW1pdCIsIm51bWJlciIsIm1pbiIsIm9wdGlvbmFsIiwicmVzb2x2ZSIsImN0eCIsIm15Rm9sbG93aW5nIiwidXNlciIsImZpbmRNYW55Iiwid2hlcmUiLCJmb2xsb3dlZEJ5Iiwic29tZSIsImlkIiwic2Vzc2lvbiIsIm15Rm9sbG93aW5nSWRzIiwibWFwIiwic3VnZ2VzdGVkVXNlcnMiLCJpbiIsIm5vdEluIiwiaW5jbHVkZSIsInN1Z2dlc3RlZFVzZXJzSWRzIiwicG9wdWxhclVzZXJzIiwiX2NvdW50Iiwic2VsZWN0Iiwib3JkZXJCeSIsInRha2UiLCJwb3B1bGF0ZWRQb3B1bGFyVXNlcnMiLCJwb3B1bGF0ZWRTdWdnZXN0ZWRVc2VycyIsInNsaWNlIiwidXNlckNvbW11bml0aWVzIiwiY29tbXVuaXR5IiwibWVtYmVycyIsInVzZXJJZCIsInVzZXJDb21tdW5pdGllc0lkcyIsInVzZXJDb21tdW5pdGllc0NhdGVnb3J5SWRzIiwiY2F0ZWdvcnlJZCIsInN1Z2dlc3RlZENvbW11bml0aWVzIiwic3VnZ2VzdGVkQ29tbXVuaXRpZXNJZHMiLCJwb3B1bGFyQ29tbXVuaXRpZXMiLCJwb3B1bGF0ZWRTdWdnZXN0ZWRDb21tdW5pdGllcyIsInBvcHVsYXRlZFBvcHVsYXJDb21tdW5pdGllc0xpc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/router/explore.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/index.ts":
/*!************************************!*\
  !*** ./src/server/router/index.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"appRouter\": () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! superjson */ \"superjson\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(superjson__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _server_router_posts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/router/posts */ \"(api)/./src/server/router/posts.ts\");\n/* harmony import */ var _server_router_comment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/comment */ \"(api)/./src/server/router/comment.ts\");\n/* harmony import */ var _server_router_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/server/router/user */ \"(api)/./src/server/router/user.ts\");\n/* harmony import */ var _server_router_bookmark__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/server/router/bookmark */ \"(api)/./src/server/router/bookmark.ts\");\n/* harmony import */ var _server_router_tag__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/server/router/tag */ \"(api)/./src/server/router/tag.ts\");\n/* harmony import */ var _server_router_community__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/server/router/community */ \"(api)/./src/server/router/community.ts\");\n/* harmony import */ var _server_router_search__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/server/router/search */ \"(api)/./src/server/router/search.ts\");\n/* harmony import */ var _server_router_explore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/server/router/explore */ \"(api)/./src/server/router/explore.ts\");\n/* harmony import */ var _server_router_notification__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/server/router/notification */ \"(api)/./src/server/router/notification.ts\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./context */ \"(api)/./src/server/router/context.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_router_posts__WEBPACK_IMPORTED_MODULE_1__, _server_router_comment__WEBPACK_IMPORTED_MODULE_2__, _server_router_user__WEBPACK_IMPORTED_MODULE_3__, _server_router_bookmark__WEBPACK_IMPORTED_MODULE_4__, _server_router_tag__WEBPACK_IMPORTED_MODULE_5__, _server_router_community__WEBPACK_IMPORTED_MODULE_6__, _server_router_search__WEBPACK_IMPORTED_MODULE_7__, _server_router_explore__WEBPACK_IMPORTED_MODULE_8__, _server_router_notification__WEBPACK_IMPORTED_MODULE_9__, _context__WEBPACK_IMPORTED_MODULE_10__]);\n([_server_router_posts__WEBPACK_IMPORTED_MODULE_1__, _server_router_comment__WEBPACK_IMPORTED_MODULE_2__, _server_router_user__WEBPACK_IMPORTED_MODULE_3__, _server_router_bookmark__WEBPACK_IMPORTED_MODULE_4__, _server_router_tag__WEBPACK_IMPORTED_MODULE_5__, _server_router_community__WEBPACK_IMPORTED_MODULE_6__, _server_router_search__WEBPACK_IMPORTED_MODULE_7__, _server_router_explore__WEBPACK_IMPORTED_MODULE_8__, _server_router_notification__WEBPACK_IMPORTED_MODULE_9__, _context__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/server/router/index.ts\n\n\n\n\n\n\n\n\n\n\n\nconst appRouter = (0,_context__WEBPACK_IMPORTED_MODULE_10__.createRouter)().transformer((superjson__WEBPACK_IMPORTED_MODULE_0___default())).merge(\"post.\", _server_router_posts__WEBPACK_IMPORTED_MODULE_1__[\"default\"]).merge(\"comment.\", _server_router_comment__WEBPACK_IMPORTED_MODULE_2__[\"default\"]).merge(\"user.\", _server_router_user__WEBPACK_IMPORTED_MODULE_3__[\"default\"]).merge(\"bookmarks.\", _server_router_bookmark__WEBPACK_IMPORTED_MODULE_4__[\"default\"]).merge(\"tags.\", _server_router_tag__WEBPACK_IMPORTED_MODULE_5__[\"default\"]).merge(\"community.\", _server_router_community__WEBPACK_IMPORTED_MODULE_6__[\"default\"]).merge(\"search.\", _server_router_search__WEBPACK_IMPORTED_MODULE_7__[\"default\"]).merge(\"explore.\", _server_router_explore__WEBPACK_IMPORTED_MODULE_8__[\"default\"]).merge(\"notification.\", _server_router_notification__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkJBQTZCO0FBQ0s7QUFDYTtBQUNLO0FBQ047QUFDUTtBQUNWO0FBQ1k7QUFDTjtBQUNFO0FBQ1U7QUFDckI7QUFFbEMsTUFBTVcsU0FBUyxHQUFHRCx1REFBWSxFQUFFLENBQ3BDRSxXQUFXLENBQUNaLGtEQUFTLENBQUMsQ0FDdEJhLEtBQUssQ0FBQyxPQUFPLEVBQUVaLDREQUFVLENBQUMsQ0FDMUJZLEtBQUssQ0FBQyxVQUFVLEVBQUVYLDhEQUFhLENBQUMsQ0FDaENXLEtBQUssQ0FBQyxPQUFPLEVBQUVWLDJEQUFVLENBQUMsQ0FDMUJVLEtBQUssQ0FBQyxZQUFZLEVBQUVULCtEQUFjLENBQUMsQ0FDbkNTLEtBQUssQ0FBQyxPQUFPLEVBQUVSLDBEQUFTLENBQUMsQ0FDekJRLEtBQUssQ0FBQyxZQUFZLEVBQUVQLGdFQUFlLENBQUMsQ0FDcENPLEtBQUssQ0FBQyxTQUFTLEVBQUVOLDZEQUFZLENBQUMsQ0FDOUJNLEtBQUssQ0FBQyxVQUFVLEVBQUVMLDhEQUFhLENBQUMsQ0FDaENLLEtBQUssQ0FBQyxlQUFlLEVBQUVKLG1FQUFrQixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLW5ldy8uL3NyYy9zZXJ2ZXIvcm91dGVyL2luZGV4LnRzP2NhMWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NlcnZlci9yb3V0ZXIvaW5kZXgudHNcclxuaW1wb3J0IHN1cGVyanNvbiBmcm9tICdzdXBlcmpzb24nO1xyXG5pbXBvcnQgcG9zdFJvdXRlciBmcm9tICdAL3NlcnZlci9yb3V0ZXIvcG9zdHMnO1xyXG5pbXBvcnQgY29tbWVudFJvdXRlciBmcm9tICdAL3NlcnZlci9yb3V0ZXIvY29tbWVudCc7XHJcbmltcG9ydCB1c2VyUm91dGVyIGZyb20gJ0Avc2VydmVyL3JvdXRlci91c2VyJztcclxuaW1wb3J0IGJvb2ttYXJrUm91dGVyIGZyb20gJ0Avc2VydmVyL3JvdXRlci9ib29rbWFyayc7XHJcbmltcG9ydCB0YWdSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL3RhZyc7XHJcbmltcG9ydCBjb21tdW5pdHlSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL2NvbW11bml0eSc7XHJcbmltcG9ydCBzZWFyY2hSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL3NlYXJjaCc7XHJcbmltcG9ydCBleHBsb3JlUm91dGVyIGZyb20gJ0Avc2VydmVyL3JvdXRlci9leHBsb3JlJztcclxuaW1wb3J0IG5vdGlmaWNhdGlvblJvdXRlciBmcm9tICdAL3NlcnZlci9yb3V0ZXIvbm90aWZpY2F0aW9uJztcclxuaW1wb3J0IHsgY3JlYXRlUm91dGVyIH0gZnJvbSAnLi9jb250ZXh0JztcclxuXHJcbmV4cG9ydCBjb25zdCBhcHBSb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoKVxyXG4gIC50cmFuc2Zvcm1lcihzdXBlcmpzb24pXHJcbiAgLm1lcmdlKCdwb3N0LicsIHBvc3RSb3V0ZXIpXHJcbiAgLm1lcmdlKCdjb21tZW50LicsIGNvbW1lbnRSb3V0ZXIpXHJcbiAgLm1lcmdlKCd1c2VyLicsIHVzZXJSb3V0ZXIpXHJcbiAgLm1lcmdlKCdib29rbWFya3MuJywgYm9va21hcmtSb3V0ZXIpXHJcbiAgLm1lcmdlKCd0YWdzLicsIHRhZ1JvdXRlcilcclxuICAubWVyZ2UoJ2NvbW11bml0eS4nLCBjb21tdW5pdHlSb3V0ZXIpXHJcbiAgLm1lcmdlKCdzZWFyY2guJywgc2VhcmNoUm91dGVyKVxyXG4gIC5tZXJnZSgnZXhwbG9yZS4nLCBleHBsb3JlUm91dGVyKVxyXG4gIC5tZXJnZSgnbm90aWZpY2F0aW9uLicsIG5vdGlmaWNhdGlvblJvdXRlcik7XHJcblxyXG4vLyBleHBvcnQgdHlwZSBkZWZpbml0aW9uIG9mIEFQSVxyXG5leHBvcnQgdHlwZSBBcHBSb3V0ZXIgPSB0eXBlb2YgYXBwUm91dGVyO1xyXG4iXSwibmFtZXMiOlsic3VwZXJqc29uIiwicG9zdFJvdXRlciIsImNvbW1lbnRSb3V0ZXIiLCJ1c2VyUm91dGVyIiwiYm9va21hcmtSb3V0ZXIiLCJ0YWdSb3V0ZXIiLCJjb21tdW5pdHlSb3V0ZXIiLCJzZWFyY2hSb3V0ZXIiLCJleHBsb3JlUm91dGVyIiwibm90aWZpY2F0aW9uUm91dGVyIiwiY3JlYXRlUm91dGVyIiwiYXBwUm91dGVyIiwidHJhbnNmb3JtZXIiLCJtZXJnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/router/index.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/notification.ts":
/*!*******************************************!*\
  !*** ./src/server/router/notification.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ \"(api)/./src/server/router/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst notificationRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().query(\"getAll\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        unread: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n    }),\n    async resolve ({ ctx , input  }) {\n        const { unread  } = input;\n        const notificationMentions = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationMention.findMany({\n            where: {\n                notification: {\n                    userId: ctx.session.user.id,\n                    isRead: unread ? false : undefined\n                }\n            },\n            include: {\n                notification: true,\n                post: {\n                    include: {\n                        user: {\n                            select: {\n                                image: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        const notificationsStartFollow = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationStartFollow.findMany({\n            where: {\n                notification: {\n                    userId: ctx.session.user.id,\n                    isRead: unread ? false : undefined\n                }\n            },\n            include: {\n                notification: true,\n                userNotificationStartFollow: {\n                    select: {\n                        name: true,\n                        image: true\n                    }\n                }\n            }\n        });\n        const notificationsCommunityNewMember = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationCommunityNewMember.findMany({\n            where: {\n                notification: {\n                    userId: ctx.session.user.id,\n                    isRead: unread ? false : undefined\n                }\n            },\n            include: {\n                notification: true,\n                user: {\n                    select: {\n                        id: true,\n                        image: true,\n                        name: true\n                    }\n                },\n                community: true\n            }\n        });\n        const notificationsPostComment = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationPostComment.findMany({\n            where: {\n                notification: {\n                    userId: ctx.session.user.id,\n                    isRead: unread ? false : undefined\n                }\n            },\n            include: {\n                notification: true,\n                comment: {\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                image: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        const notificationsCommentReply = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notificationCommentReply.findMany({\n            where: {\n                notification: {\n                    userId: ctx.session.user.id,\n                    isRead: unread ? false : undefined\n                }\n            },\n            include: {\n                notification: true,\n                comment: {\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                image: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        const notifications = {\n            notificationsMentions: notificationMentions.map((m)=>({\n                    id: m.notification.id,\n                    isRead: m.notification.isRead,\n                    createdAt: m.notification.createdAt,\n                    type: _types__WEBPACK_IMPORTED_MODULE_3__.NotificationKind.MENTION,\n                    postId: m.postId,\n                    postContent: m.post.content,\n                    postAutor: {\n                        name: m.post.user.name,\n                        image: m.post.user.image\n                    }\n                })),\n            notificationsStartFollow: notificationsStartFollow.map((n)=>({\n                    id: n.notification.id,\n                    isRead: n.notification.isRead,\n                    createdAt: n.notification.createdAt,\n                    type: _types__WEBPACK_IMPORTED_MODULE_3__.NotificationKind.START_FOLLOW,\n                    user: n.userNotificationStartFollow,\n                    userId: n.userIdNotificationStartFollow\n                })),\n            notificationsCommunityNewMember: notificationsCommunityNewMember.map((n)=>({\n                    id: n.notification.id,\n                    isRead: n.notification.isRead,\n                    createdAt: n.notification.createdAt,\n                    type: _types__WEBPACK_IMPORTED_MODULE_3__.NotificationKind.COMMUNITY_NEW_MEMBER,\n                    user: n.user,\n                    community: {\n                        id: n.communityId,\n                        name: n.community.name,\n                        image: n.community.image\n                    }\n                })),\n            notificationsPostComment: notificationsPostComment.map((n)=>({\n                    id: n.notification.id,\n                    isRead: n.notification.isRead,\n                    createdAt: n.notification.createdAt,\n                    type: _types__WEBPACK_IMPORTED_MODULE_3__.NotificationKind.POST_COMMENT,\n                    user: n.comment.user,\n                    commentMessage: n.comment.message,\n                    postId: n.comment.postId,\n                    comentId: n.commentId\n                })),\n            notificationsCommentReply: notificationsCommentReply.map((n)=>({\n                    id: n.notification.id,\n                    isRead: n.notification.isRead,\n                    createdAt: n.notification.createdAt,\n                    type: _types__WEBPACK_IMPORTED_MODULE_3__.NotificationKind.COMMENT_REPLY,\n                    user: n.comment.user,\n                    commentMessage: n.comment.message,\n                    postId: n.comment.postId,\n                    comentId: n.commentId\n                }))\n        };\n        return notifications;\n    }\n}).query(\"count\", {\n    async resolve ({ ctx  }) {\n        return _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notification.count({\n            where: {\n                userId: ctx.session.user.id,\n                isRead: false\n            }\n        });\n    }\n}).mutation(\"markAsRead\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        notificationId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input  }) {\n        await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notification.update({\n            where: {\n                id: input.notificationId\n            },\n            data: {\n                isRead: true\n            }\n        });\n    }\n}).mutation(\"markAllAsRead\", {\n    async resolve ({ ctx  }) {\n        return _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.notification.updateMany({\n            where: {\n                userId: ctx.session.user.id\n            },\n            data: {\n                isRead: true\n            }\n        });\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (notificationRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9ub3RpZmljYXRpb24udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0I7QUFDb0I7QUFDeUI7QUFDMUI7QUFFM0MsTUFBTUksa0JBQWtCLEdBQUdGLDJFQUFxQixFQUFFLENBQy9DRyxLQUFLLENBQUMsUUFBUSxFQUFFO0lBQ2ZDLEtBQUssRUFBRU4seUNBQVEsQ0FBQztRQUNiUSxNQUFNLEVBQUVSLDBDQUFTLEVBQUUsQ0FBQ1UsUUFBUSxFQUFFO0tBQ2hDLENBQUM7SUFFRixNQUFNQyxPQUFPLEVBQUMsRUFBRUMsR0FBRyxHQUFFTixLQUFLLEdBQUUsRUFBRTtRQUM1QixNQUFNLEVBQUNFLE1BQU0sR0FBQyxHQUFHRixLQUFLO1FBRXRCLE1BQU1PLG9CQUFvQixHQUFHLE1BQU1aLGtGQUFtQyxDQUFDO1lBQ3JFZSxLQUFLLEVBQUU7Z0JBQ0xDLFlBQVksRUFBRTtvQkFDWkMsTUFBTSxFQUFFTixHQUFHLENBQUNPLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO29CQUMzQkMsTUFBTSxFQUFFZCxNQUFNLEdBQUcsS0FBSyxHQUFHZSxTQUFTO2lCQUNuQzthQUNGO1lBQ0RDLE9BQU8sRUFBRTtnQkFDUFAsWUFBWSxFQUFFLElBQUk7Z0JBQ2xCUSxJQUFJLEVBQUU7b0JBQ0pELE9BQU8sRUFBRTt3QkFDUEosSUFBSSxFQUFFOzRCQUNKTSxNQUFNLEVBQUU7Z0NBQ05DLEtBQUssRUFBRSxJQUFJO2dDQUNYQyxJQUFJLEVBQUUsSUFBSTs2QkFDWDt5QkFDRjtxQkFDRjtpQkFDRjthQUNGO1NBQ0YsQ0FBQztRQUVGLE1BQU1DLHdCQUF3QixHQUM1QixNQUFNNUIsc0ZBQXVDLENBQUM7WUFDNUNlLEtBQUssRUFBRTtnQkFDTEMsWUFBWSxFQUFFO29CQUNaQyxNQUFNLEVBQUVOLEdBQUcsQ0FBQ08sT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7b0JBQzNCQyxNQUFNLEVBQUVkLE1BQU0sR0FBRyxLQUFLLEdB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QUUsRUFBRTtRQUNyQixPQUFPWCx3RUFBeUIsQ0FBQztZQUMvQmUsS0FBSyxFQUFFO2dCQUNMRSxNQUFNLEVBQUVOLEdBQUcsQ0FBQ08sT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7Z0JBQzNCQyxNQUFNLEVBQUUsS0FBSzthQUNkO1NBQ0YsQ0FBQyxDQUFDO0tBQ0o7Q0FDRixDQUFDLENBQ0R5QyxRQUFRLENBQUMsWUFBWSxFQUFFO0lBQ3RCekQsS0FBSyxFQUFFTix5Q0FBUSxDQUFDO1FBQ2RnRSxjQUFjLEVBQUVoRSx5Q0FBUSxFQUFFO0tBQzNCLENBQUM7SUFDRixNQUFNVyxPQUFPLEVBQUMsRUFBRUwsS0FBSyxHQUFFLEVBQUU7UUFDdkIsTUFBTUwseUVBQTBCLENBQUM7WUFDL0JlLEtBQUssRUFBRTtnQkFDTEssRUFBRSxFQUFFZixLQUFLLENBQUMwRCxjQUFjO2FBQ3pCO1lBQ0RHLElBQUksRUFBRTtnQkFDSjdDLE1BQU0sRUFBRSxJQUFJO2FBQ2I7U0FDRixDQUFDLENBQUM7S0FDSjtDQUNGLENBQUMsQ0FDRHlDLFFBQVEsQ0FBQyxlQUFlLEVBQUU7SUFDekIsTUFBTXBELE9BQU8sRUFBQyxFQUFFQyxHQUFHLEdBQUUsRUFBRTtRQUNyQixPQUFPWCw2RUFBOEIsQ0FBQztZQUNwQ2UsS0FBSyxFQUFFO2dCQUNMRSxNQUFNLEVBQUVOLEdBQUcsQ0FBQ08sT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7YUFDNUI7WUFDRDhDLElBQUksRUFBRTtnQkFDSjdDLE1BQU0sRUFBRSxJQUFJO2FBQ2I7U0FDRixDQUFDLENBQUM7S0FDSjtDQUNGLENBQUM7QUFFSixpRUFBZWxCLGtCQUFrQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9ub3RpZmljYXRpb24udHM/ZjlmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9zZXJ2ZXIvZGIvY2xpZW50JztcclxuaW1wb3J0IGNyZWF0ZVByb3RlY3RlZFJvdXRlciBmcm9tICdAL3NlcnZlci9yb3V0ZXIvcHJvdGVjdGVkLXJvdXRlcic7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbktpbmQgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmNvbnN0IG5vdGlmaWNhdGlvblJvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRBbGwnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICAgdW5yZWFkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpXHJcbiAgICB9KSxcclxuXHJcbiAgICBhc3luYyByZXNvbHZlKHsgY3R4LCBpbnB1dCB9KSB7XHJcbiAgICAgIGNvbnN0IHt1bnJlYWR9ID0gaW5wdXRcclxuXHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbk1lbnRpb25zID0gYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbk1lbnRpb24uZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBub3RpZmljYXRpb246IHtcclxuICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICBpc1JlYWQ6IHVucmVhZCA/IGZhbHNlIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgbm90aWZpY2F0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgcG9zdDoge1xyXG4gICAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgIGltYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnNTdGFydEZvbGxvdyA9XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvblN0YXJ0Rm9sbG93LmZpbmRNYW55KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjoge1xyXG4gICAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgICBpc1JlYWQ6IHVucmVhZCA/IGZhbHNlIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHVzZXJOb3RpZmljYXRpb25TdGFydEZvbGxvdzoge1xyXG4gICAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGltYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc0NvbW11bml0eU5ld01lbWJlciA9XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbkNvbW11bml0eU5ld01lbWJlci5maW5kTWFueSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb246IHtcclxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgICAgaXNSZWFkOiB1bnJlYWQgPyBmYWxzZSA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGltYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21tdW5pdHk6IHRydWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc1Bvc3RDb21tZW50ID1cclxuICAgICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uUG9zdENvbW1lbnQuZmluZE1hbnkoe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICAgIGlzUmVhZDogdW5yZWFkID8gZmFsc2UgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgY29tbWVudDoge1xyXG4gICAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBub3RpZmljYXRpb25zQ29tbWVudFJlcGx5ID1cclxuICAgICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uQ29tbWVudFJlcGx5LmZpbmRNYW55KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbjoge1xyXG4gICAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgICBpc1JlYWQ6IHVucmVhZCA/IGZhbHNlIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IHtcclxuICAgICAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IHtcclxuICAgICAgICBub3RpZmljYXRpb25zTWVudGlvbnM6IG5vdGlmaWNhdGlvbk1lbnRpb25zLm1hcCgobSkgPT4gKHtcclxuICAgICAgICAgIGlkOiBtLm5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgIGlzUmVhZDogbS5ub3RpZmljYXRpb24uaXNSZWFkLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBtLm5vdGlmaWNhdGlvbi5jcmVhdGVkQXQsXHJcbiAgICAgICAgICB0eXBlOiBOb3RpZmljYXRpb25LaW5kLk1FTlRJT04sXHJcbiAgICAgICAgICBwb3N0SWQ6IG0ucG9zdElkLFxyXG4gICAgICAgICAgcG9zdENvbnRlbnQ6IG0ucG9zdC5jb250ZW50LFxyXG4gICAgICAgICAgcG9zdEF1dG9yOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IG0ucG9zdC51c2VyLm5hbWUsXHJcbiAgICAgICAgICAgIGltYWdlOiBtLnBvc3QudXNlci5pbWFnZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkpLFxyXG4gICAgICAgIG5vdGlmaWNhdGlvbnNTdGFydEZvbGxvdzogbm90aWZpY2F0aW9uc1N0YXJ0Rm9sbG93Lm1hcCgobikgPT4gKHtcclxuICAgICAgICAgIGlkOiBuLm5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgIGlzUmVhZDogbi5ub3RpZmljYXRpb24uaXNSZWFkLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuLm5vdGlmaWNhdGlvbi5jcmVhdGVkQXQsXHJcbiAgICAgICAgICB0eXBlOiBOb3RpZmljYXRpb25LaW5kLlNUQVJUX0ZPTExPVyxcclxuICAgICAgICAgIHVzZXI6IG4udXNlck5vdGlmaWNhdGlvblN0YXJ0Rm9sbG93LFxyXG4gICAgICAgICAgdXNlcklkOiBuLnVzZXJJZE5vdGlmaWNhdGlvblN0YXJ0Rm9sbG93LFxyXG4gICAgICAgIH0pKSxcclxuICAgICAgICBub3RpZmljYXRpb25zQ29tbXVuaXR5TmV3TWVtYmVyOiBub3RpZmljYXRpb25zQ29tbXVuaXR5TmV3TWVtYmVyLm1hcChcclxuICAgICAgICAgIChuKSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogbi5ub3RpZmljYXRpb24uaWQsXHJcbiAgICAgICAgICAgIGlzUmVhZDogbi5ub3RpZmljYXRpb24uaXNSZWFkLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG4ubm90aWZpY2F0aW9uLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgdHlwZTogTm90aWZpY2F0aW9uS2luZC5DT01NVU5JVFlfTkVXX01FTUJFUixcclxuICAgICAgICAgICAgdXNlcjogbi51c2VyLFxyXG4gICAgICAgICAgICBjb21tdW5pdHk6IHtcclxuICAgICAgICAgICAgICBpZDogbi5jb21tdW5pdHlJZCxcclxuICAgICAgICAgICAgICBuYW1lOiBuLmNvbW11bml0eS5uYW1lLFxyXG4gICAgICAgICAgICAgIGltYWdlOiBuLmNvbW11bml0eS5pbWFnZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbm90aWZpY2F0aW9uc1Bvc3RDb21tZW50OiBub3RpZmljYXRpb25zUG9zdENvbW1lbnQubWFwKChuKSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IG4ubm90aWZpY2F0aW9uLmlkLFxyXG4gICAgICAgICAgaXNSZWFkOiBuLm5vdGlmaWNhdGlvbi5pc1JlYWQsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG4ubm90aWZpY2F0aW9uLmNyZWF0ZWRBdCxcclxuICAgICAgICAgIHR5cGU6IE5vdGlmaWNhdGlvbktpbmQuUE9TVF9DT01NRU5ULFxyXG4gICAgICAgICAgdXNlcjogbi5jb21tZW50LnVzZXIsXHJcbiAgICAgICAgICBjb21tZW50TWVzc2FnZTogbi5jb21tZW50Lm1lc3NhZ2UsXHJcbiAgICAgICAgICBwb3N0SWQ6IG4uY29tbWVudC5wb3N0SWQsXHJcbiAgICAgICAgICBjb21lbnRJZDogbi5jb21tZW50SWRcclxuICAgICAgICB9KSksXHJcbiAgICAgICAgbm90aWZpY2F0aW9uc0NvbW1lbnRSZXBseTogbm90aWZpY2F0aW9uc0NvbW1lbnRSZXBseS5tYXAoKG4pID0+ICh7XHJcbiAgICAgICAgICBpZDogbi5ub3RpZmljYXRpb24uaWQsXHJcbiAgICAgICAgICBpc1JlYWQ6IG4ubm90aWZpY2F0aW9uLmlzUmVhZCxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbi5ub3RpZmljYXRpb24uY3JlYXRlZEF0LFxyXG4gICAgICAgICAgdHlwZTogTm90aWZpY2F0aW9uS2luZC5DT01NRU5UX1JFUExZLFxyXG4gICAgICAgICAgdXNlcjogbi5jb21tZW50LnVzZXIsXHJcbiAgICAgICAgICBjb21tZW50TWVzc2FnZTogbi5jb21tZW50Lm1lc3NhZ2UsXHJcbiAgICAgICAgICBwb3N0SWQ6IG4uY29tbWVudC5wb3N0SWQsXHJcbiAgICAgICAgICBjb21lbnRJZDogbi5jb21tZW50SWRcclxuICAgICAgICB9KSksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gbm90aWZpY2F0aW9ucztcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ2NvdW50Jywge1xyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGN0eCB9KSB7XHJcbiAgICAgIHJldHVybiBwcmlzbWEubm90aWZpY2F0aW9uLmNvdW50KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgaXNSZWFkOiBmYWxzZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ21hcmtBc1JlYWQnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBub3RpZmljYXRpb25JZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0IH0pIHtcclxuICAgICAgYXdhaXQgcHJpc21hLm5vdGlmaWNhdGlvbi51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZDogaW5wdXQubm90aWZpY2F0aW9uSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBpc1JlYWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCdtYXJrQWxsQXNSZWFkJywge1xyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGN0eCB9KSB7XHJcbiAgICAgIHJldHVybiBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBpc1JlYWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbm90aWZpY2F0aW9uUm91dGVyO1xyXG4iXSwibmFtZXMiOlsieiIsInByaXNtYSIsImNyZWF0ZVByb3RlY3RlZFJvdXRlciIsIk5vdGlmaWNhdGlvbktpbmQiLCJub3RpZmljYXRpb25Sb3V0ZXIiLCJxdWVyeSIsImlucHV0Iiwib2JqZWN0IiwidW5yZWFkIiwiYm9vbGVhbiIsIm9wdGlvbmFsIiwicmVzb2x2ZSIsImN0eCIsIm5vdGlmaWNhdGlvbk1lbnRpb25zIiwibm90aWZpY2F0aW9uTWVudGlvbiIsImZpbmRNYW55Iiwid2hlcmUiLCJub3RpZmljYXRpb24iLCJ1c2VySWQiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiaXNSZWFkIiwidW5kZWZpbmVkIiwiaW5jbHVkZSIsInBvc3QiLCJzZWxlY3QiLCJpbWFnZSIsIm5hbWUiLCJub3RpZmljYXRpb25zU3RhcnRGb2xsb3ciLCJub3RpZmljYXRpb25TdGFydEZvbGxvdyIsInVzZXJOb3RpZmljYXRpb25TdGFydEZvbGxvdyIsIm5vdGlmaWNhdGlvbnNDb21tdW5pdHlOZXdNZW1iZXIiLCJub3RpZmljYXRpb25Db21tdW5pdHlOZXdNZW1iZXIiLCJjb21tdW5pdHkiLCJub3RpZmljYXRpb25zUG9zdENvbW1lbnQiLCJub3RpZmljYXRpb25Qb3N0Q29tbWVudCIsImNvbW1lbnQiLCJub3RpZmljYXRpb25zQ29tbWVudFJlcGx5Iiwibm90aWZpY2F0aW9uQ29tbWVudFJlcGx5Iiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbnNNZW50aW9ucyIsIm1hcCIsIm0iLCJjcmVhdGVkQXQiLCJ0eXBlIiwiTUVOVElPTiIsInBvc3RJZCIsInBvc3RDb250ZW50IiwiY29udGVudCIsInBvc3RBdXRvciIsIm4iLCJTVEFSVF9GT0xMT1ciLCJ1c2VySWROb3RpZmljYXRpb25TdGFydEZvbGxvdyIsIkNPTU1VTklUWV9ORVdfTUVNQkVSIiwiY29tbXVuaXR5SWQiLCJQT1NUX0NPTU1FTlQiLCJjb21tZW50TWVzc2FnZSIsIm1lc3NhZ2UiLCJjb21lbnRJZCIsImNvbW1lbnRJZCIsIkNPTU1FTlRfUkVQTFkiLCJjb3VudCIsIm11dGF0aW9uIiwibm90aWZpY2F0aW9uSWQiLCJzdHJpbmciLCJ1cGRhdGUiLCJkYXRhIiwidXBkYXRlTWFueSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/router/notification.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/posts.ts":
/*!************************************!*\
  !*** ./src/server/router/posts.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_trpc_server__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server_router_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/utils */ \"(api)/./src/server/router/utils.ts\");\n/* harmony import */ var _protected_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_utils__WEBPACK_IMPORTED_MODULE_2__, _protected_router__WEBPACK_IMPORTED_MODULE_3__, _db_client__WEBPACK_IMPORTED_MODULE_4__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_utils__WEBPACK_IMPORTED_MODULE_2__, _protected_router__WEBPACK_IMPORTED_MODULE_3__, _db_client__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable @typescript-eslint/naming-convention */ \n\n\n\n\nconst getCreatedAtCondition = (time)=>{\n    if (time === \"day\") return (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.getDateXDaysAgo)(1, new Date());\n    if (time === \"week\") return (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.getDateXDaysAgo)(7, new Date());\n    throw new Error(\"wrong time\");\n};\nconst postRouter = (0,_protected_router__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().query(\"getById\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const post = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.findFirstOrThrow({\n            where: {\n                id: input.postId\n            },\n            include: _server_router_utils__WEBPACK_IMPORTED_MODULE_2__.postDetailsInclude\n        });\n        if (post.isDeleted) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Post was deleted\"\n            });\n        }\n        const myFollowingIds = await (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.getMyFollowingIds)(ctx.session.user.id);\n        return (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.populatePost)(post, ctx.session.user.id, myFollowingIds);\n    }\n}).query(\"getInfiniteFeed\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        cursor: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        sort: zod__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n            \"top\"\n        ]).optional(),\n        time: zod__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n            \"day\",\n            \"week\"\n        ]).optional()\n    }),\n    async resolve ({ ctx , input  }) {\n        const { cursor  } = input;\n        const limit = 5;\n        const posts = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.findMany({\n            take: limit + 1,\n            where: {\n                OR: [\n                    {\n                        user: {\n                            followedBy: {\n                                some: {\n                                    id: ctx.session.user.id\n                                }\n                            }\n                        }\n                    },\n                    {\n                        community: {\n                            members: {\n                                some: {\n                                    userId: ctx.session.user.id\n                                }\n                            }\n                        }\n                    },\n                    {\n                        sharedBy: {\n                            some: {\n                                user: {\n                                    followedBy: {\n                                        some: {\n                                            id: ctx.session.user.id\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    {\n                        likes: {\n                            some: {\n                                user: {\n                                    followedBy: {\n                                        some: {\n                                            id: ctx.session.user.id\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }, \n                ],\n                createdAt: input.sort === \"top\" && (input.time === \"day\" || input.time === \"week\") ? {\n                    gte: getCreatedAtCondition(input.time)\n                } : undefined,\n                isDeleted: false,\n                NOT: {\n                    userId: ctx.session.user.id\n                }\n            },\n            include: _server_router_utils__WEBPACK_IMPORTED_MODULE_2__.postDetailsInclude,\n            cursor: cursor ? {\n                id: cursor\n            } : undefined,\n            orderBy: input.sort === \"top\" ? {\n                likes: {\n                    _count: \"desc\"\n                }\n            } : {\n                createdAt: \"desc\"\n            }\n        });\n        const myFollowingIds = await (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.getMyFollowingIds)(ctx.session.user.id);\n        const populatedPosts = posts.map((post)=>(0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.populatePost)(post, ctx.session.user.id, myFollowingIds));\n        // eslint-disable-next-line no-undef-init\n        let nextCursor = undefined;\n        if (populatedPosts.length > limit) {\n            const nextItem = populatedPosts.pop();\n            nextCursor = nextItem.id;\n        }\n        return {\n            posts: populatedPosts,\n            nextCursor\n        };\n    }\n}).query(\"getAll\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).max(100).nullish(),\n        cursor: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        tagName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        sort: zod__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n            \"top\"\n        ]).optional(),\n        time: zod__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n            \"day\",\n            \"week\"\n        ]).optional(),\n        withImage: (0,zod__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional(),\n        likedByUsedId: (0,zod__WEBPACK_IMPORTED_MODULE_0__.string)().optional()\n    }),\n    async resolve ({ ctx , input  }) {\n        const { cursor  } = input;\n        const limit = input.limit ?? 10;\n        const posts = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.findMany({\n            take: limit + 1,\n            where: {\n                createdAt: input.sort === \"top\" && (input.time === \"day\" || input.time === \"week\") ? {\n                    gte: getCreatedAtCondition(input.time)\n                } : undefined,\n                OR: input.userId ? [\n                    {\n                        user: {\n                            id: input.userId\n                        }\n                    },\n                    {\n                        sharedBy: input.userId ? {\n                            some: {\n                                userId: input.userId\n                            }\n                        } : undefined\n                    }, \n                ] : undefined,\n                community: {\n                    id: input.communityId\n                },\n                tags: input.tagName ? {\n                    some: {\n                        tagName: input.tagName\n                    }\n                } : undefined,\n                isDeleted: false,\n                images: input.withImage ? {\n                    some: {}\n                } : undefined,\n                likes: input.likedByUsedId ? {\n                    some: {\n                        userId: input.likedByUsedId\n                    }\n                } : undefined\n            },\n            include: _server_router_utils__WEBPACK_IMPORTED_MODULE_2__.postDetailsInclude,\n            cursor: cursor ? {\n                id: cursor\n            } : undefined,\n            orderBy: input.sort === \"top\" ? {\n                likes: {\n                    _count: \"desc\"\n                }\n            } : {\n                createdAt: \"desc\"\n            }\n        });\n        const myFollowingIds = await (0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.getMyFollowingIds)(ctx.session.user.id);\n        const populatedPosts = posts.map((post)=>(0,_server_router_utils__WEBPACK_IMPORTED_MODULE_2__.populatePost)(post, ctx.session.user.id, myFollowingIds));\n        // eslint-disable-next-line no-undef-init\n        let nextCursor = undefined;\n        if (populatedPosts.length > limit) {\n            const nextItem = populatedPosts.pop();\n            nextCursor = nextItem.id;\n        }\n        return {\n            posts: populatedPosts,\n            nextCursor\n        };\n    }\n}).mutation(\"addPost\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        isQuoteShare: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n        content: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        link: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        images: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            imageAlt: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            width: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            height: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            fallbackUrl: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n        })).nullable(),\n        tags: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).nullable(),\n        mentions: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).nullable(),\n        shareParentId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        communityId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }),\n    async resolve ({ input , ctx  }) {\n        if (!input.content) {\n            throw new Error(\"Post must have content text\");\n        }\n        const trimmedContent = input.content.trim();\n        if (trimmedContent.length === 0) {\n            throw new Error(\"Post must have content text\");\n        }\n        if (trimmedContent.length > 280) {\n            throw new Error(\"Post content must be up to 280 characters\");\n        }\n        let formattedLink = input.link;\n        if (input.link && !/^(http:\\/\\/|https:\\/\\/)/i.test(input.link)) {\n            formattedLink = `http://${input.link}`;\n        }\n        const post = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.create({\n            data: {\n                content: input.content,\n                userId: ctx.session.user.id,\n                shareParentId: input.shareParentId,\n                communityId: input.communityId,\n                link: formattedLink\n            }\n        });\n        if (input.mentions?.length) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.mention.createMany({\n                data: input.mentions?.map((mention)=>({\n                        postId: post.id,\n                        userId: mention\n                    }))\n            });\n            const filteredMentions = input.mentions.filter((mention)=>mention !== ctx.session.user.id);\n            const mentions = filteredMentions.map((m)=>_db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.notification.create({\n                    data: {\n                        userId: m\n                    }\n                }).then((notification)=>_db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.notificationMention.create({\n                        data: {\n                            notificationId: notification.id,\n                            postId: post.id\n                        }\n                    })));\n            await Promise.all(mentions);\n        }\n        if (input.images?.length) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.image.createMany({\n                data: input.images.map((image)=>({\n                        fallbackUrl: image.fallbackUrl,\n                        alt: image.imageAlt,\n                        url: image.imageUrl,\n                        postId: post.id,\n                        width: image.width,\n                        height: image.height\n                    }))\n            });\n        }\n        const getRandomColor = ()=>// eslint-disable-next-line no-bitwise, prefer-template\n            \"#\" + ((1 << 24) * Math.random() | 0).toString(16);\n        if (input.tags) {\n            const tagsAlreadyInDB = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.tag.findMany({\n                where: {\n                    name: {\n                        in: input.tags.map((tag)=>tag)\n                    }\n                }\n            });\n            const tagsNameAlreadyInDB = tagsAlreadyInDB.map((tag)=>tag.name);\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.tag.createMany({\n                data: input.tags.filter((tag)=>!tagsNameAlreadyInDB.includes(tag)).map((tag)=>({\n                        name: tag,\n                        color: getRandomColor()\n                    }))\n            });\n            const tags = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.tag.findMany({\n                where: {\n                    name: {\n                        in: input.tags.map((tag)=>tag)\n                    }\n                }\n            });\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.postTag.createMany({\n                data: tags.map((tag)=>({\n                        tagName: tag.name,\n                        postId: post.id\n                    }))\n            });\n        }\n    }\n}).mutation(\"toggleShare\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const data = {\n            postId: input.postId,\n            userId: ctx.session.user.id\n        };\n        const userShare = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.userShare.findUnique({\n            where: {\n                userId_postId: data\n            }\n        });\n        if (userShare === null) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.userShare.create({\n                data\n            });\n        } else {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.userShare[\"delete\"]({\n                where: {\n                    userId_postId: data\n                }\n            });\n        }\n    }\n}).mutation(\"toggleLike\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const data = {\n            postId: input.postId,\n            userId: ctx.session.user.id\n        };\n        const like = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.postLike.findUnique({\n            where: {\n                userId_postId: data\n            }\n        });\n        if (like === null) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.postLike.create({\n                data\n            });\n        } else {\n            await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.postLike[\"delete\"]({\n                where: {\n                    userId_postId: data\n                }\n            });\n        }\n        const updatedPost = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.findUniqueOrThrow({\n            where: {\n                id: input.postId\n            },\n            include: {\n                _count: {\n                    select: {\n                        likes: true\n                    }\n                }\n            }\n        });\n        const { _count , ...postData } = updatedPost;\n        return {\n            updatedPost: {\n                ...postData,\n                likesCount: _count.likes,\n                likedByMe: like === null\n            }\n        };\n    }\n}).mutation(\"remove\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        postId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ ctx , input  }) {\n        const isCurrentUserPostAuthor = await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.count({\n            where: {\n                id: input.postId,\n                userId: ctx.session.user.id\n            }\n        });\n        if (!isCurrentUserPostAuthor) {\n            throw Error(\"You are not the owner of the post\");\n        }\n        await _db_client__WEBPACK_IMPORTED_MODULE_4__.prisma.post.update({\n            where: {\n                id: input.postId\n            },\n            data: {\n                isDeleted: true\n            }\n        });\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (postRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBVyxFQUFFO2dCQUNYLEdBQUdHLFFBQVE7Z0JBQ1hDLFVBQVUsRUFBRXZFLE1BQU0sQ0FBQ04sS0FBSztnQkFDeEI4RSxTQUFTLEVBQUVQLElBQUksS0FBSyxJQUFJO2FBQ3pCO1NBQ0YsQ0FBQztLQUNIO0NBQ0YsQ0FBQyxDQUNEakQsUUFBUSxDQUFDLFFBQVEsRUFBRTtJQUNsQnRELEtBQUssRUFBRWQseUNBQVEsQ0FBQztRQUNkZ0IsTUFBTSxFQUFFaEIseUNBQVEsRUFBRTtLQUNuQixDQUFDO0lBQ0YsTUFBTWlCLE9BQU8sRUFBQyxFQUFFQyxHQUFHLEdBQUVKLEtBQUssR0FBRSxFQUFFO1FBQzVCLE1BQU0rRyx1QkFBdUIsR0FBRyxNQUFNdEgseURBQWlCLENBQUM7WUFDdERjLEtBQUssRUFBRTtnQkFDTEMsRUFBRSxFQUFFUixLQUFLLENBQUNFLE1BQU07Z0JBQ2hCNEIsTUFBTSxFQUFFMUIsR0FBRyxDQUFDVSxPQUFPLENBQUNDLElBQUksQ0FBQ1AsRUFBRTthQUM1QjtTQUNGLENBQUM7UUFDRixJQUFJLENBQUN1Ryx1QkFBdUIsRUFBRTtZQUM1QixNQUFNbEgsS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7U0FDbEQ7UUFFRCxNQUFNSiwwREFBa0IsQ0FBQztZQUN2QmMsS0FBSyxFQUFFO2dCQUNMQyxFQUFFLEVBQUVSLEtBQUssQ0FBQ0UsTUFBTTthQUNqQjtZQUNEc0UsSUFBSSxFQUFFO2dCQUNKOUQsU0FBUyxFQUFFLElBQUk7YUFDaEI7U0FDRixDQUFDLENBQUM7S0FDSjtDQUNGLENBQUM7QUFFSixpRUFBZVosVUFBVSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9wb3N0cy50cz9jNjliIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xyXG5pbXBvcnQgeyBib29sZWFuLCBzdHJpbmcsIHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInO1xyXG5pbXBvcnQge1xyXG4gIHBvcHVsYXRlUG9zdCxcclxuICBwb3N0RGV0YWlsc0luY2x1ZGUsXHJcbiAgZ2V0RGF0ZVhEYXlzQWdvLFxyXG4gIGdldE15Rm9sbG93aW5nSWRzLFxyXG59IGZyb20gJ0Avc2VydmVyL3JvdXRlci91dGlscyc7XHJcbmltcG9ydCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIgZnJvbSAnLi9wcm90ZWN0ZWQtcm91dGVyJztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi4vZGIvY2xpZW50JztcclxuXHJcbmNvbnN0IGdldENyZWF0ZWRBdENvbmRpdGlvbiA9ICh0aW1lOiAnZGF5JyB8ICd3ZWVrJykgPT4ge1xyXG4gIGlmICh0aW1lID09PSAnZGF5JykgcmV0dXJuIGdldERhdGVYRGF5c0FnbygxLCBuZXcgRGF0ZSgpKTtcclxuICBpZiAodGltZSA9PT0gJ3dlZWsnKSByZXR1cm4gZ2V0RGF0ZVhEYXlzQWdvKDcsIG5ldyBEYXRlKCkpO1xyXG4gIHRocm93IG5ldyBFcnJvcignd3JvbmcgdGltZScpO1xyXG59O1xyXG5cclxuY29uc3QgcG9zdFJvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRCeUlkJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgcG9zdElkOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgaW5wdXQsIGN0eCB9KSB7XHJcbiAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBwcmlzbWEucG9zdC5maW5kRmlyc3RPclRocm93KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGlucHV0LnBvc3RJZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHBvc3REZXRhaWxzSW5jbHVkZSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocG9zdC5pc0RlbGV0ZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1Bvc3Qgd2FzIGRlbGV0ZWQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG15Rm9sbG93aW5nSWRzID0gYXdhaXQgZ2V0TXlGb2xsb3dpbmdJZHMoY3R4LnNlc3Npb24udXNlci5pZCk7XHJcbiAgICAgIHJldHVybiBwb3B1bGF0ZVBvc3QocG9zdCwgY3R4LnNlc3Npb24udXNlci5pZCwgbXlGb2xsb3dpbmdJZHMpO1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5xdWVyeSgnZ2V0SW5maW5pdGVGZWVkJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgY3Vyc29yOiB6LnN0cmluZygpLm51bGxpc2goKSxcclxuICAgICAgc29ydDogei5lbnVtKFsndG9wJ10pLm9wdGlvbmFsKCksXHJcbiAgICAgIHRpbWU6IHouZW51bShbJ2RheScsICd3ZWVrJ10pLm9wdGlvbmFsKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgeyBjdXJzb3IgfSA9IGlucHV0O1xyXG4gICAgICBjb25zdCBsaW1pdCA9IDU7XHJcblxyXG4gICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IHByaXNtYS5wb3N0LmZpbmRNYW55KHtcclxuICAgICAgICB0YWtlOiBsaW1pdCArIDEsXHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIE9SOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICBmb2xsb3dlZEJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbW11bml0eToge1xyXG4gICAgICAgICAgICAgICAgbWVtYmVyczoge1xyXG4gICAgICAgICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgc2hhcmVkQnk6IHtcclxuICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbGxvd2VkQnk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsaWtlczoge1xyXG4gICAgICAgICAgICAgICAgc29tZToge1xyXG4gICAgICAgICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sbG93ZWRCeToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc29tZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6XHJcbiAgICAgICAgICAgIGlucHV0LnNvcnQgPT09ICd0b3AnICYmXHJcbiAgICAgICAgICAgIChpbnB1dC50aW1lID09PSAnZGF5JyB8fCBpbnB1dC50aW1lID09PSAnd2VlaycpXHJcbiAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgIGd0ZTogZ2V0Q3JlYXRlZEF0Q29uZGl0aW9uKGlucHV0LnRpbWUpLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgaXNEZWxldGVkOiBmYWxzZSxcclxuICAgICAgICAgIE5PVDogeyB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHBvc3REZXRhaWxzSW5jbHVkZSxcclxuICAgICAgICBjdXJzb3I6IGN1cnNvciA/IHsgaWQ6IGN1cnNvciB9IDogdW5kZWZpbmVkLFxyXG4gICAgICAgIG9yZGVyQnk6XHJcbiAgICAgICAgICBpbnB1dC5zb3J0ID09PSAndG9wJ1xyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgIGxpa2VzOiB7XHJcbiAgICAgICAgICAgICAgICAgIF9jb3VudDogJ2Rlc2MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDoge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiAnZGVzYycsXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBteUZvbGxvd2luZ0lkcyA9IGF3YWl0IGdldE15Rm9sbG93aW5nSWRzKGN0eC5zZXNzaW9uLnVzZXIuaWQpO1xyXG5cclxuICAgICAgY29uc3QgcG9wdWxhdGVkUG9zdHMgPSBwb3N0cy5tYXAoKHBvc3QpID0+XHJcbiAgICAgICAgcG9wdWxhdGVQb3N0KHBvc3QsIGN0eC5zZXNzaW9uLnVzZXIuaWQsIG15Rm9sbG93aW5nSWRzKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmLWluaXRcclxuICAgICAgbGV0IG5leHRDdXJzb3I6IHR5cGVvZiBjdXJzb3IgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICBpZiAocG9wdWxhdGVkUG9zdHMubGVuZ3RoID4gbGltaXQpIHtcclxuICAgICAgICBjb25zdCBuZXh0SXRlbSA9IHBvcHVsYXRlZFBvc3RzLnBvcCgpO1xyXG4gICAgICAgIG5leHRDdXJzb3IgPSBuZXh0SXRlbSEuaWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBwb3N0czogcG9wdWxhdGVkUG9zdHMsXHJcbiAgICAgICAgbmV4dEN1cnNvcixcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ2dldEFsbCcsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm1pbigxKS5tYXgoMTAwKS5udWxsaXNoKCksXHJcbiAgICAgIGN1cnNvcjogei5zdHJpbmcoKS5udWxsaXNoKCksXHJcblxyXG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgICAgdGFnTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gICAgICBjb21tdW5pdHlJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG5cclxuICAgICAgc29ydDogei5lbnVtKFsndG9wJ10pLm9wdGlvbmFsKCksXHJcbiAgICAgIHRpbWU6IHouZW51bShbJ2RheScsICd3ZWVrJ10pLm9wdGlvbmFsKCksXHJcbiAgICAgIHdpdGhJbWFnZTogYm9vbGVhbigpLm9wdGlvbmFsKCksXHJcbiAgICAgIGxpa2VkQnlVc2VkSWQ6IHN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgeyBjdXJzb3IgfSA9IGlucHV0O1xyXG4gICAgICBjb25zdCBsaW1pdCA9IGlucHV0LmxpbWl0ID8/IDEwO1xyXG5cclxuICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBwcmlzbWEucG9zdC5maW5kTWFueSh7XHJcbiAgICAgICAgdGFrZTogbGltaXQgKyAxLFxyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjcmVhdGVkQXQ6XHJcbiAgICAgICAgICAgIGlucHV0LnNvcnQgPT09ICd0b3AnICYmXHJcbiAgICAgICAgICAgIChpbnB1dC50aW1lID09PSAnZGF5JyB8fCBpbnB1dC50aW1lID09PSAnd2VlaycpXHJcbiAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgIGd0ZTogZ2V0Q3JlYXRlZEF0Q29uZGl0aW9uKGlucHV0LnRpbWUpLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgT1I6IGlucHV0LnVzZXJJZFxyXG4gICAgICAgICAgICA/IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpbnB1dC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBzaGFyZWRCeTogaW5wdXQudXNlcklkXHJcbiAgICAgICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGlucHV0LnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGNvbW11bml0eToge1xyXG4gICAgICAgICAgICBpZDogaW5wdXQuY29tbXVuaXR5SWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGFnczogaW5wdXQudGFnTmFtZVxyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgdGFnTmFtZTogaW5wdXQudGFnTmFtZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICBpbWFnZXM6IGlucHV0LndpdGhJbWFnZVxyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgIHNvbWU6IHt9LFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBsaWtlczogaW5wdXQubGlrZWRCeVVzZWRJZFxyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICAgICAgdXNlcklkOiBpbnB1dC5saWtlZEJ5VXNlZElkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZTogcG9zdERldGFpbHNJbmNsdWRlLFxyXG4gICAgICAgIGN1cnNvcjogY3Vyc29yID8geyBpZDogY3Vyc29yIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgb3JkZXJCeTpcclxuICAgICAgICAgIGlucHV0LnNvcnQgPT09ICd0b3AnXHJcbiAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgbGlrZXM6IHtcclxuICAgICAgICAgICAgICAgICAgX2NvdW50OiAnZGVzYycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IG15Rm9sbG93aW5nSWRzID0gYXdhaXQgZ2V0TXlGb2xsb3dpbmdJZHMoY3R4LnNlc3Npb24udXNlci5pZCk7XHJcbiAgICAgIGNvbnN0IHBvcHVsYXRlZFBvc3RzID0gcG9zdHMubWFwKChwb3N0KSA9PlxyXG4gICAgICAgIHBvcHVsYXRlUG9zdChwb3N0LCBjdHguc2Vzc2lvbi51c2VyLmlkLCBteUZvbGxvd2luZ0lkcylcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZi1pbml0XHJcbiAgICAgIGxldCBuZXh0Q3Vyc29yOiB0eXBlb2YgY3Vyc29yIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgaWYgKHBvcHVsYXRlZFBvc3RzLmxlbmd0aCA+IGxpbWl0KSB7XHJcbiAgICAgICAgY29uc3QgbmV4dEl0ZW0gPSBwb3B1bGF0ZWRQb3N0cy5wb3AoKTtcclxuICAgICAgICBuZXh0Q3Vyc29yID0gbmV4dEl0ZW0hLmlkO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcG9zdHM6IHBvcHVsYXRlZFBvc3RzLFxyXG4gICAgICAgIG5leHRDdXJzb3IsXHJcbiAgICAgIH07XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCdhZGRQb3N0Jywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgaXNRdW90ZVNoYXJlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxyXG4gICAgICBjb250ZW50OiB6LnN0cmluZygpLFxyXG4gICAgICBsaW5rOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICAgIGltYWdlczogelxyXG4gICAgICAgIC5hcnJheShcclxuICAgICAgICAgIHoub2JqZWN0KHtcclxuICAgICAgICAgICAgaW1hZ2VVcmw6IHouc3RyaW5nKCksXHJcbiAgICAgICAgICAgIGltYWdlQWx0OiB6LnN0cmluZygpLFxyXG4gICAgICAgICAgICB3aWR0aDogei5udW1iZXIoKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiB6Lm51bWJlcigpLFxyXG4gICAgICAgICAgICBmYWxsYmFja1VybDogei5zdHJpbmcoKSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5udWxsYWJsZSgpLFxyXG4gICAgICB0YWdzOiB6LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCksXHJcbiAgICAgIG1lbnRpb25zOiB6LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCksXHJcbiAgICAgIHNoYXJlUGFyZW50SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgICAgY29tbXVuaXR5SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBpZiAoIWlucHV0LmNvbnRlbnQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3QgbXVzdCBoYXZlIGNvbnRlbnQgdGV4dCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0cmltbWVkQ29udGVudCA9IGlucHV0LmNvbnRlbnQudHJpbSgpO1xyXG5cclxuICAgICAgaWYgKHRyaW1tZWRDb250ZW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdCBtdXN0IGhhdmUgY29udGVudCB0ZXh0Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0cmltbWVkQ29udGVudC5sZW5ndGggPiAyODApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3QgY29udGVudCBtdXN0IGJlIHVwIHRvIDI4MCBjaGFyYWN0ZXJzJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBmb3JtYXR0ZWRMaW5rID0gaW5wdXQubGluaztcclxuICAgICAgaWYgKGlucHV0LmxpbmsgJiYgIS9eKGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcLykvaS50ZXN0KGlucHV0LmxpbmspKSB7XHJcbiAgICAgICAgZm9ybWF0dGVkTGluayA9IGBodHRwOi8vJHtpbnB1dC5saW5rfWA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBwcmlzbWEucG9zdC5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LmNvbnRlbnQsXHJcbiAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICBzaGFyZVBhcmVudElkOiBpbnB1dC5zaGFyZVBhcmVudElkLFxyXG4gICAgICAgICAgY29tbXVuaXR5SWQ6IGlucHV0LmNvbW11bml0eUlkLFxyXG4gICAgICAgICAgbGluazogZm9ybWF0dGVkTGluayxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChpbnB1dC5tZW50aW9ucz8ubGVuZ3RoKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLm1lbnRpb24uY3JlYXRlTWFueSh7XHJcbiAgICAgICAgICBkYXRhOiBpbnB1dC5tZW50aW9ucz8ubWFwKChtZW50aW9uKSA9PiAoe1xyXG4gICAgICAgICAgICBwb3N0SWQ6IHBvc3QuaWQsXHJcbiAgICAgICAgICAgIHVzZXJJZDogbWVudGlvbixcclxuICAgICAgICAgIH0pKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVyZWRNZW50aW9ucyA9IGlucHV0Lm1lbnRpb25zLmZpbHRlcihtZW50aW9uPT5tZW50aW9uICE9PSBjdHguc2Vzc2lvbi51c2VyLmlkKVxyXG5cclxuICAgICAgICBjb25zdCBtZW50aW9ucyA9IGZpbHRlcmVkTWVudGlvbnMubWFwKChtKSA9PlxyXG4gICAgICAgICAgcHJpc21hLm5vdGlmaWNhdGlvblxyXG4gICAgICAgICAgICAuY3JlYXRlKHtcclxuICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKG5vdGlmaWNhdGlvbikgPT4gcHJpc21hLm5vdGlmaWNhdGlvbk1lbnRpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uSWQ6IG5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgcG9zdElkOiBwb3N0LmlkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9KSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChtZW50aW9ucyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpbnB1dC5pbWFnZXM/Lmxlbmd0aCkge1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS5pbWFnZS5jcmVhdGVNYW55KHtcclxuICAgICAgICAgIGRhdGE6IGlucHV0LmltYWdlcy5tYXAoKGltYWdlKSA9PiAoe1xyXG4gICAgICAgICAgICBmYWxsYmFja1VybDogaW1hZ2UuZmFsbGJhY2tVcmwsXHJcbiAgICAgICAgICAgIGFsdDogaW1hZ2UuaW1hZ2VBbHQsXHJcbiAgICAgICAgICAgIHVybDogaW1hZ2UuaW1hZ2VVcmwsXHJcbiAgICAgICAgICAgIHBvc3RJZDogcG9zdC5pZCxcclxuICAgICAgICAgICAgd2lkdGg6IGltYWdlLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGltYWdlLmhlaWdodCxcclxuICAgICAgICAgIH0pKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZ2V0UmFuZG9tQ29sb3IgPSAoKSA9PlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlLCBwcmVmZXItdGVtcGxhdGVcclxuICAgICAgICAnIycgKyAoKCgxIDw8IDI0KSAqIE1hdGgucmFuZG9tKCkpIHwgMCkudG9TdHJpbmcoMTYpO1xyXG5cclxuICAgICAgaWYgKGlucHV0LnRhZ3MpIHtcclxuICAgICAgICBjb25zdCB0YWdzQWxyZWFkeUluREIgPSBhd2FpdCBwcmlzbWEudGFnLmZpbmRNYW55KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgICBpbjogaW5wdXQudGFncy5tYXAoKHRhZykgPT4gdGFnKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhZ3NOYW1lQWxyZWFkeUluREIgPSB0YWdzQWxyZWFkeUluREIubWFwKCh0YWcpID0+IHRhZy5uYW1lKTtcclxuXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnRhZy5jcmVhdGVNYW55KHtcclxuICAgICAgICAgIGRhdGE6IGlucHV0LnRhZ3NcclxuICAgICAgICAgICAgLmZpbHRlcigodGFnKSA9PiAhdGFnc05hbWVBbHJlYWR5SW5EQi5pbmNsdWRlcyh0YWcpKVxyXG4gICAgICAgICAgICAubWFwKCh0YWcpID0+ICh7XHJcbiAgICAgICAgICAgICAgbmFtZTogdGFnLFxyXG4gICAgICAgICAgICAgIGNvbG9yOiBnZXRSYW5kb21Db2xvcigpLFxyXG4gICAgICAgICAgICB9KSksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhZ3MgPSBhd2FpdCBwcmlzbWEudGFnLmZpbmRNYW55KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgICBpbjogaW5wdXQudGFncy5tYXAoKHRhZykgPT4gdGFnKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IHByaXNtYS5wb3N0VGFnLmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgZGF0YTogdGFncy5tYXAoKHRhZykgPT4gKHsgdGFnTmFtZTogdGFnLm5hbWUsIHBvc3RJZDogcG9zdC5pZCB9KSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ3RvZ2dsZVNoYXJlJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgcG9zdElkOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgaW5wdXQsIGN0eCB9KSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgcG9zdElkOiBpbnB1dC5wb3N0SWQsXHJcbiAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCB1c2VyU2hhcmUgPSBhd2FpdCBwcmlzbWEudXNlclNoYXJlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICB1c2VySWRfcG9zdElkOiBkYXRhLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHVzZXJTaGFyZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyU2hhcmUuY3JlYXRlKHsgZGF0YSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdCBwcmlzbWEudXNlclNoYXJlLmRlbGV0ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB1c2VySWRfcG9zdElkOiBkYXRhLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KVxyXG4gIC5tdXRhdGlvbigndG9nZ2xlTGlrZScsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHBvc3RJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIHBvc3RJZDogaW5wdXQucG9zdElkLFxyXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgbGlrZSA9IGF3YWl0IHByaXNtYS5wb3N0TGlrZS5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgdXNlcklkX3Bvc3RJZDogZGF0YSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChsaWtlID09PSBudWxsKSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnBvc3RMaWtlLmNyZWF0ZSh7IGRhdGEgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnBvc3RMaWtlLmRlbGV0ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB1c2VySWRfcG9zdElkOiBkYXRhLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSBhd2FpdCBwcmlzbWEucG9zdC5maW5kVW5pcXVlT3JUaHJvdyh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5wb3N0SWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgbGlrZXM6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgeyBfY291bnQsIC4uLnBvc3REYXRhIH0gPSB1cGRhdGVkUG9zdDtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXBkYXRlZFBvc3Q6IHtcclxuICAgICAgICAgIC4uLnBvc3REYXRhLFxyXG4gICAgICAgICAgbGlrZXNDb3VudDogX2NvdW50Lmxpa2VzLFxyXG4gICAgICAgICAgbGlrZWRCeU1lOiBsaWtlID09PSBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCdyZW1vdmUnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBwb3N0SWQ6IHouc3RyaW5nKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgY29uc3QgaXNDdXJyZW50VXNlclBvc3RBdXRob3IgPSBhd2FpdCBwcmlzbWEucG9zdC5jb3VudCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5wb3N0SWQsXHJcbiAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghaXNDdXJyZW50VXNlclBvc3RBdXRob3IpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcignWW91IGFyZSBub3QgdGhlIG93bmVyIG9mIHRoZSBwb3N0Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHByaXNtYS5wb3N0LnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBpbnB1dC5wb3N0SWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBpc0RlbGV0ZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcG9zdFJvdXRlcjtcclxuIl0sIm5hbWVzIjpbImJvb2xlYW4iLCJzdHJpbmciLCJ6IiwiVFJQQ0Vycm9yIiwicG9wdWxhdGVQb3N0IiwicG9zdERldGFpbHNJbmNsdWRlIiwiZ2V0RGF0ZVhEYXlzQWdvIiwiZ2V0TXlGb2xsb3dpbmdJZHMiLCJjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIiLCJwcmlzbWEiLCJnZXRDcmVhdGVkQXRDb25kaXRpb24iLCJ0aW1lIiwiRGF0ZSIsIkVycm9yIiwicG9zdFJvdXRlciIsInF1ZXJ5IiwiaW5wdXQiLCJvYmplY3QiLCJwb3N0SWQiLCJyZXNvbHZlIiwiY3R4IiwicG9zdCIsImZpbmRGaXJzdE9yVGhyb3ciLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsImlzRGVsZXRlZCIsImNvZGUiLCJtZXNzYWdlIiwibXlGb2xsb3dpbmdJZHMiLCJzZXNzaW9uIiwidXNlciIsImN1cnNvciIsIm51bGxpc2giLCJzb3J0IiwiZW51bSIsIm9wdGlvbmFsIiwibGltaXQiLCJwb3N0cyIsImZpbmRNYW55IiwidGFrZSIsIk9SIiwiZm9sbG93ZWRCeSIsInNvbWUiLCJjb21tdW5pdHkiLCJtZW1iZXJzIiwidXNlcklkIiwic2hhcmVkQnkiLCJsaWtlcyIsImNyZWF0ZWRBdCIsImd0ZSIsInVuZGVmaW5lZCIsIk5PVCIsIm9yZGVyQnkiLCJfY291bnQiLCJwb3B1bGF0ZWRQb3N0cyIsIm1hcCIsIm5leHRDdXJzb3IiLCJsZW5ndGgiLCJuZXh0SXRlbSIsInBvcCIsIm51bWJlciIsIm1pbiIsIm1heCIsInRhZ05hbWUiLCJjb21tdW5pdHlJZCIsIndpdGhJbWFnZSIsImxpa2VkQnlVc2VkSWQiLCJ0YWdzIiwiaW1hZ2VzIiwibXV0YXRpb24iLCJpc1F1b3RlU2hhcmUiLCJjb250ZW50IiwibGluayIsImFycmF5IiwiaW1hZ2VVcmwiLCJpbWFnZUFsdCIsIndpZHRoIiwiaGVpZ2h0IiwiZmFsbGJhY2tVcmwiLCJudWxsYWJsZSIsIm1lbnRpb25zIiwic2hhcmVQYXJlbnRJZCIsInRyaW1tZWRDb250ZW50IiwidHJpbSIsImZvcm1hdHRlZExpbmsiLCJ0ZXN0IiwiY3JlYXRlIiwiZGF0YSIsIm1lbnRpb24iLCJjcmVhdGVNYW55IiwiZmlsdGVyZWRNZW50aW9ucyIsImZpbHRlciIsIm0iLCJub3RpZmljYXRpb24iLCJ0aGVuIiwibm90aWZpY2F0aW9uTWVudGlvbiIsIm5vdGlmaWNhdGlvbklkIiwiUHJvbWlzZSIsImFsbCIsImltYWdlIiwiYWx0IiwidXJsIiwiZ2V0UmFuZG9tQ29sb3IiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJ0YWdzQWxyZWFkeUluREIiLCJ0YWciLCJuYW1lIiwiaW4iLCJ0YWdzTmFtZUFscmVhZHlJbkRCIiwiaW5jbHVkZXMiLCJjb2xvciIsInBvc3RUYWciLCJ1c2VyU2hhcmUiLCJmaW5kVW5pcXVlIiwidXNlcklkX3Bvc3RJZCIsImRlbGV0ZSIsImxpa2UiLCJwb3N0TGlrZSIsInVwZGF0ZWRQb3N0IiwiZmluZFVuaXF1ZU9yVGhyb3ciLCJzZWxlY3QiLCJwb3N0RGF0YSIsImxpa2VzQ291bnQiLCJsaWtlZEJ5TWUiLCJpc0N1cnJlbnRVc2VyUG9zdEF1dGhvciIsImNvdW50IiwidXBkYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/router/posts.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/protected-router.ts":
/*!***********************************************!*\
  !*** ./src/server/router/protected-router.ts ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_trpc_server__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context */ \"(api)/./src/server/router/context.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_context__WEBPACK_IMPORTED_MODULE_1__]);\n_context__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nfunction createProtectedRouter() {\n    return (0,_context__WEBPACK_IMPORTED_MODULE_1__.createRouter)().middleware(({ ctx , next  })=>{\n        if (!ctx.session || !ctx.session.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                code: \"UNAUTHORIZED\"\n            });\n        }\n        return next({\n            ctx: {\n                ...ctx,\n                // infers that `session` is non-nullable to downstream resolvers\n                session: {\n                    ...ctx.session,\n                    user: ctx.session.user\n                }\n            }\n        });\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createProtectedRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9wcm90ZWN0ZWQtcm91dGVyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUM7QUFDSTtBQUV6QyxTQUFTRSxxQkFBcUIsR0FBRztJQUMvQixPQUFPRCxzREFBWSxFQUFFLENBQUNFLFVBQVUsQ0FBQyxDQUFDLEVBQUVDLEdBQUcsR0FBRUMsSUFBSSxHQUFFLEdBQUs7UUFDbEQsSUFBSSxDQUFDRCxHQUFHLENBQUNFLE9BQU8sSUFBSSxDQUFDRixHQUFHLENBQUNFLE9BQU8sQ0FBQ0MsSUFBSSxFQUFFO1lBQ3JDLE1BQU0sSUFBSVAsbURBQWMsQ0FBQztnQkFBRVMsSUFBSSxFQUFFLGNBQWM7YUFBRSxDQUFDLENBQUM7U0FDcEQ7UUFDRCxPQUFPSixJQUFJLENBQUM7WUFDVkQsR0FBRyxFQUFFO2dCQUNILEdBQUdBLEdBQUc7Z0JBQ04sZ0VBQWdFO2dCQUNoRUUsT0FBTyxFQUFFO29CQUFFLEdBQUdGLEdBQUcsQ0FBQ0UsT0FBTztvQkFBRUMsSUFBSSxFQUFFSCxHQUFHLENBQUNFLE9BQU8sQ0FBQ0MsSUFBSTtpQkFBRTthQUNwRDtTQUNGLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztDQUNKO0FBRUQsaUVBQWVMLHFCQUFxQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci9wcm90ZWN0ZWQtcm91dGVyLnRzPzRkZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdHJwYyBmcm9tICdAdHJwYy9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVSb3V0ZXIgfSBmcm9tICcuL2NvbnRleHQnO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvdGVjdGVkUm91dGVyKCkge1xyXG4gIHJldHVybiBjcmVhdGVSb3V0ZXIoKS5taWRkbGV3YXJlKCh7IGN0eCwgbmV4dCB9KSA9PiB7XHJcbiAgICBpZiAoIWN0eC5zZXNzaW9uIHx8ICFjdHguc2Vzc2lvbi51c2VyKSB7XHJcbiAgICAgIHRocm93IG5ldyB0cnBjLlRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoe1xyXG4gICAgICBjdHg6IHtcclxuICAgICAgICAuLi5jdHgsXHJcbiAgICAgICAgLy8gaW5mZXJzIHRoYXQgYHNlc3Npb25gIGlzIG5vbi1udWxsYWJsZSB0byBkb3duc3RyZWFtIHJlc29sdmVyc1xyXG4gICAgICAgIHNlc3Npb246IHsgLi4uY3R4LnNlc3Npb24sIHVzZXI6IGN0eC5zZXNzaW9uLnVzZXIgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXI7XHJcbiJdLCJuYW1lcyI6WyJ0cnBjIiwiY3JlYXRlUm91dGVyIiwiY3JlYXRlUHJvdGVjdGVkUm91dGVyIiwibWlkZGxld2FyZSIsImN0eCIsIm5leHQiLCJzZXNzaW9uIiwidXNlciIsIlRSUENFcnJvciIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/router/protected-router.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/search.ts":
/*!*************************************!*\
  !*** ./src/server/router/search.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ \"(api)/./src/server/router/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable no-underscore-dangle */ \n\n\n\nconst searchRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().query(\"getBySearchPhrase\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        searchPhrase: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input  }) {\n        if (!input.searchPhrase.trim()) {\n            return [];\n        }\n        const matchingUsers = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                name: {\n                    contains: input.searchPhrase\n                }\n            },\n            include: {\n                _count: {\n                    select: {\n                        followedBy: true\n                    }\n                }\n            },\n            take: 5\n        });\n        const matchingCommunities = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.community.findMany({\n            where: {\n                name: {\n                    contains: input.searchPhrase\n                }\n            },\n            include: {\n                _count: {\n                    select: {\n                        members: true\n                    }\n                }\n            },\n            take: 5\n        });\n        const matchingUsersWithFollows = matchingUsers.map((user)=>({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.SearchType.USER,\n                id: user.id,\n                title: user.name,\n                image: user.image,\n                followersCount: user._count.followedBy\n            }));\n        const matchingCommunitiesWithFollows = matchingCommunities.map((comunity)=>({\n                type: _types__WEBPACK_IMPORTED_MODULE_3__.SearchType.COMMUNITY,\n                id: comunity.id,\n                title: comunity.name,\n                image: comunity.image,\n                followersCount: comunity._count.members\n            }));\n        return [\n            ...matchingUsersWithFollows,\n            ...matchingCommunitiesWithFollows\n        ].sort((a, b)=>b.followersCount - a.followersCount).slice(0, 5);\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (searchRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci9zZWFyY2gudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx5Q0FBeUMsQ0FDakI7QUFDNkM7QUFDL0I7QUFDRDtBQUVyQyxNQUFNSSxZQUFZLEdBQUdILDJFQUFxQixFQUFFLENBQUNJLEtBQUssQ0FBQyxtQkFBbUIsRUFBRTtJQUN0RUMsS0FBSyxFQUFFTix5Q0FBUSxDQUFDO1FBQ2RRLFlBQVksRUFBRVIseUNBQVEsRUFBRTtLQUN6QixDQUFDO0lBRUYsTUFBTVUsT0FBTyxFQUFDLEVBQUVKLEtBQUssR0FBRSxFQUFFO1FBQ3ZCLElBQUksQ0FBQ0EsS0FBSyxDQUFDRSxZQUFZLENBQUNHLElBQUksRUFBRSxFQUFFO1lBQzlCLE9BQU8sRUFBRSxDQUFDO1NBQ1g7UUFDRCxNQUFNQyxhQUFhLEdBQUcsTUFBTVYsNERBQW9CLENBQUM7WUFDL0NhLEtBQUssRUFBRTtnQkFDTEMsSUFBSSxFQUFFO29CQUNKQyxRQUFRLEVBQUVYLEtBQUssQ0FBQ0UsWUFBWTtpQkFDN0I7YUFDRjtZQUNEVSxPQUFPLEVBQUU7Z0JBQ1BDLE1BQU0sRUFBRTtvQkFDTkMsTUFBTSxFQUFFO3dCQUNOQyxVQUFVLEVBQUUsSUFBSTtxQkFDakI7aUJBQ0Y7YUFDRjtZQUNEQyxJQUFJLEVBQUUsQ0FBQztTQUNSLENBQUM7UUFFRixNQUFNQyxtQkFBbUIsR0FBRyxNQUFNckIsaUVBQXlCLENBQUM7WUFDMURhLEtBQUssRUFBRTtnQkFDTEMsSUFBSSxFQUFFO29CQUNKQyxRQUFRLEVBQUVYLEtBQUssQ0FBQ0UsWUFBWTtpQkFDN0I7YUFDRjtZQUNEVSxPQUFPLEVBQUU7Z0JBQ1BDLE1BQU0sRUFBRTtvQkFDTkMsTUFBTSxFQUFFO3dCQUNOSyxPQUFPLEVBQUUsSUFBSTtxQkFDZDtpQkFDRjthQUNGO1lBQ0RILElBQUksRUFBRSxDQUFDO1NBQ1IsQ0FBQztRQUVGLE1BQU1JLHdCQUF3QixHQUFHZCxhQUFhLENBQUNlLEdBQUcsQ0FBQyxDQUFDZCxJQUFJLEdBQUssQ0FBQztnQkFDNURlLElBQUksRUFBRXpCLG1EQUFlO2dCQUNyQjJCLEVBQUUsRUFBRWpCLElBQUksQ0FBQ2lCLEVBQUU7Z0JBQ1hDLEtBQUssRUFBRWxCLElBQUksQ0FBQ0csSUFBSTtnQkFDaEJnQixLQUFLLEVBQUVuQixJQUFJLENBQUNtQixLQUFLO2dCQUNqQkMsY0FBYyxFQUFFcEIsSUFBSSxDQUFDTSxNQUFNLENBQUNFLFVBQVU7YUFDdkMsQ0FBQyxDQUFDO1FBRUgsTUFBTWEsOEJBQThCLEdBQUdYLG1CQUFtQixDQUFDSSxHQUFHLENBQzVELENBQUNRLFFBQVEsR0FBSyxDQUFDO2dCQUNiUCxJQUFJLEVBQUV6Qix3REFBb0I7Z0JBQzFCMkIsRUFBRSxFQUFFSyxRQUFRLENBQUNMLEVBQUU7Z0JBQ2ZDLEtBQUssRUFBRUksUUFBUSxDQUFDbkIsSUFBSTtnQkFDcEJnQixLQUFLLEVBQUVHLFFBQVEsQ0FBQ0gsS0FBSztnQkFDckJDLGNBQWMsRUFBRUUsUUFBUSxDQUFDaEIsTUFBTSxDQUFDTSxPQUFPO2FBQ3hDLENBQUMsQ0FDSDtRQUVELE9BQU87ZUFBSUMsd0JBQXdCO2VBQUtRLDhCQUE4QjtTQUFDLENBQ3BFRyxJQUFJLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFQyxDQUFDLEdBQUtBLENBQUMsQ0FBQ04sY0FBYyxHQUFHSyxDQUFDLENBQUNMLGNBQWMsQ0FBQyxDQUNuRE8sS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUNoQjtDQUNGLENBQUM7QUFFRixpRUFBZXBDLFlBQVksRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL3NlcnZlci9yb3V0ZXIvc2VhcmNoLnRzPzQ5YTYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL3Byb3RlY3RlZC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9kYi9jbGllbnQnO1xyXG5pbXBvcnQgeyBTZWFyY2hUeXBlIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5jb25zdCBzZWFyY2hSb3V0ZXIgPSBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIoKS5xdWVyeSgnZ2V0QnlTZWFyY2hQaHJhc2UnLCB7XHJcbiAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgIHNlYXJjaFBocmFzZTogei5zdHJpbmcoKSxcclxuICB9KSxcclxuXHJcbiAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0IH0pIHtcclxuICAgIGlmICghaW5wdXQuc2VhcmNoUGhyYXNlLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYXRjaGluZ1VzZXJzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgIGNvbnRhaW5zOiBpbnB1dC5zZWFyY2hQaHJhc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIF9jb3VudDoge1xyXG4gICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIGZvbGxvd2VkQnk6IHRydWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHRha2U6IDUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBtYXRjaGluZ0NvbW11bml0aWVzID0gYXdhaXQgcHJpc21hLmNvbW11bml0eS5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgY29udGFpbnM6IGlucHV0LnNlYXJjaFBocmFzZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgX2NvdW50OiB7XHJcbiAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgbWVtYmVyczogdHJ1ZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgdGFrZTogNSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG1hdGNoaW5nVXNlcnNXaXRoRm9sbG93cyA9IG1hdGNoaW5nVXNlcnMubWFwKCh1c2VyKSA9PiAoe1xyXG4gICAgICB0eXBlOiBTZWFyY2hUeXBlLlVTRVIsXHJcbiAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICB0aXRsZTogdXNlci5uYW1lLFxyXG4gICAgICBpbWFnZTogdXNlci5pbWFnZSxcclxuICAgICAgZm9sbG93ZXJzQ291bnQ6IHVzZXIuX2NvdW50LmZvbGxvd2VkQnksXHJcbiAgICB9KSk7XHJcblxyXG4gICAgY29uc3QgbWF0Y2hpbmdDb21tdW5pdGllc1dpdGhGb2xsb3dzID0gbWF0Y2hpbmdDb21tdW5pdGllcy5tYXAoXHJcbiAgICAgIChjb211bml0eSkgPT4gKHtcclxuICAgICAgICB0eXBlOiBTZWFyY2hUeXBlLkNPTU1VTklUWSxcclxuICAgICAgICBpZDogY29tdW5pdHkuaWQsXHJcbiAgICAgICAgdGl0bGU6IGNvbXVuaXR5Lm5hbWUsXHJcbiAgICAgICAgaW1hZ2U6IGNvbXVuaXR5LmltYWdlLFxyXG4gICAgICAgIGZvbGxvd2Vyc0NvdW50OiBjb211bml0eS5fY291bnQubWVtYmVycyxcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIFsuLi5tYXRjaGluZ1VzZXJzV2l0aEZvbGxvd3MsIC4uLm1hdGNoaW5nQ29tbXVuaXRpZXNXaXRoRm9sbG93c11cclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuZm9sbG93ZXJzQ291bnQgLSBhLmZvbGxvd2Vyc0NvdW50KVxyXG4gICAgICAuc2xpY2UoMCwgNSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzZWFyY2hSb3V0ZXI7XHJcbiJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlUHJvdGVjdGVkUm91dGVyIiwicHJpc21hIiwiU2VhcmNoVHlwZSIsInNlYXJjaFJvdXRlciIsInF1ZXJ5IiwiaW5wdXQiLCJvYmplY3QiLCJzZWFyY2hQaHJhc2UiLCJzdHJpbmciLCJyZXNvbHZlIiwidHJpbSIsIm1hdGNoaW5nVXNlcnMiLCJ1c2VyIiwiZmluZE1hbnkiLCJ3aGVyZSIsIm5hbWUiLCJjb250YWlucyIsImluY2x1ZGUiLCJfY291bnQiLCJzZWxlY3QiLCJmb2xsb3dlZEJ5IiwidGFrZSIsIm1hdGNoaW5nQ29tbXVuaXRpZXMiLCJjb21tdW5pdHkiLCJtZW1iZXJzIiwibWF0Y2hpbmdVc2Vyc1dpdGhGb2xsb3dzIiwibWFwIiwidHlwZSIsIlVTRVIiLCJpZCIsInRpdGxlIiwiaW1hZ2UiLCJmb2xsb3dlcnNDb3VudCIsIm1hdGNoaW5nQ29tbXVuaXRpZXNXaXRoRm9sbG93cyIsImNvbXVuaXR5IiwiQ09NTVVOSVRZIiwic29ydCIsImEiLCJiIiwic2xpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/router/search.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/tag.ts":
/*!**********************************!*\
  !*** ./src/server/router/tag.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/server/db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/router/protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./src/server/router/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_db_client__WEBPACK_IMPORTED_MODULE_1__, _server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable no-underscore-dangle */ \n\n\n\nconst tagRouter = (0,_server_router_protected_router__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().query(\"getBySearchPhrase\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        searchPhrase: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input  }) {\n        if (!input.searchPhrase) {\n            return [];\n        }\n        const tags = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.tag.findMany({\n            where: {\n                name: {\n                    contains: input.searchPhrase\n                }\n            },\n            orderBy: {\n                name: \"asc\"\n            },\n            take: 5\n        });\n        return tags.map((tag)=>tag.name);\n    }\n}).query(\"trending\", {\n    async resolve () {\n        const data = await _server_db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.postTag.groupBy({\n            by: [\n                \"tagName\"\n            ],\n            where: {\n                post: {\n                    isDeleted: false,\n                    createdAt: {\n                        gte: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getDateXDaysAgo)(7, new Date())\n                    }\n                }\n            },\n            _count: {\n                postId: true\n            },\n            orderBy: {\n                _count: {\n                    postId: \"desc\"\n                }\n            },\n            take: 4\n        });\n        return data.map((tagData)=>({\n                tagName: tagData.tagName,\n                postsCount: tagData._count.postId\n            }));\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (tagRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci90YWcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx5Q0FBeUMsQ0FDakI7QUFDb0I7QUFDeUI7QUFDM0I7QUFFMUMsTUFBTUksU0FBUyxHQUFHRiwyRUFBcUIsRUFBRSxDQUN0Q0csS0FBSyxDQUFDLG1CQUFtQixFQUFFO0lBQzFCQyxLQUFLLEVBQUVOLHlDQUFRLENBQUM7UUFDZFEsWUFBWSxFQUFFUix5Q0FBUSxFQUFFO0tBQ3pCLENBQUM7SUFDRixNQUFNVSxPQUFPLEVBQUMsRUFBRUosS0FBSyxHQUFFLEVBQUU7UUFDdkIsSUFBSSxDQUFDQSxLQUFLLENBQUNFLFlBQVksRUFBRTtZQUN2QixPQUFPLEVBQUUsQ0FBQztTQUNYO1FBQ0QsTUFBTUcsSUFBSSxHQUFHLE1BQU1WLGtFQUFtQixDQUFDO1lBQ3JDYSxLQUFLLEVBQUU7Z0JBQ0xDLElBQUksRUFBRTtvQkFDSkMsUUFBUSxFQUFFVixLQUFLLENBQUNFLFlBQVk7aUJBQzdCO2FBQ0Y7WUFDRFMsT0FBTyxFQUFFO2dCQUNQRixJQUFJLEVBQUUsS0FBSzthQUNaO1lBQ0RHLElBQUksRUFBRSxDQUFDO1NBQ1IsQ0FBQztRQUNGLE9BQU9QLElBQUksQ0FBQ1EsR0FBRyxDQUFDLENBQUNQLEdBQUcsR0FBS0EsR0FBRyxDQUFDRyxJQUFJLENBQUMsQ0FBQztLQUNwQztDQUNGLENBQUMsQ0FDRFYsS0FBSyxDQUFDLFVBQVUsRUFBRTtJQUNqQixNQUFNSyxPQUFPLElBQUc7UUFDZCxNQUFNVSxJQUFJLEdBQUcsTUFBTW5CLHFFQUFzQixDQUFDO1lBQ3hDc0IsRUFBRSxFQUFFO2dCQUFDLFNBQVM7YUFBQztZQUNmVCxLQUFLLEVBQUU7Z0JBQ0xVLElBQUksRUFBRTtvQkFDSkMsU0FBUyxFQUFFLEtBQUs7b0JBQ2hCQyxTQUFTLEVBQUU7d0JBQ1RDLEdBQUcsRUFBRXhCLHVEQUFlLENBQUMsQ0FBQyxFQUFFLElBQUl5QixJQUFJLEVBQUUsQ0FBQztxQkFDcEM7aUJBQ0Y7YUFDRjtZQUNEQyxNQUFNLEVBQUU7Z0JBQ05DLE1BQU0sRUFBRSxJQUFJO2FBQ2I7WUFDRGIsT0FBTyxFQUFFO2dCQUNQWSxNQUFNLEVBQUU7b0JBQ05DLE1BQU0sRUFBRSxNQUFNO2lCQUNmO2FBQ0Y7WUFDRFosSUFBSSxFQUFFLENBQUM7U0FDUixDQUFDO1FBRUYsT0FBT0UsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQ1ksT0FBTyxHQUFLLENBQUM7Z0JBQzVCQyxPQUFPLEVBQUVELE9BQU8sQ0FBQ0MsT0FBTztnQkFDeEJDLFVBQVUsRUFBRUYsT0FBTyxDQUFDRixNQUFNLENBQUNDLE1BQU07YUFDbEMsQ0FBQyxDQUFDLENBQUM7S0FDTDtDQUNGLENBQUM7QUFFSixpRUFBZTFCLFNBQVMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL3NlcnZlci9yb3V0ZXIvdGFnLnRzPzY5YmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0Avc2VydmVyL2RiL2NsaWVudCc7XHJcbmltcG9ydCBjcmVhdGVQcm90ZWN0ZWRSb3V0ZXIgZnJvbSAnQC9zZXJ2ZXIvcm91dGVyL3Byb3RlY3RlZC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBnZXREYXRlWERheXNBZ28gfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmNvbnN0IHRhZ1JvdXRlciA9IGNyZWF0ZVByb3RlY3RlZFJvdXRlcigpXHJcbiAgLnF1ZXJ5KCdnZXRCeVNlYXJjaFBocmFzZScsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHNlYXJjaFBocmFzZTogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0IH0pIHtcclxuICAgICAgaWYgKCFpbnB1dC5zZWFyY2hQaHJhc2UpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdGFncyA9IGF3YWl0IHByaXNtYS50YWcuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5zOiBpbnB1dC5zZWFyY2hQaHJhc2UsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3JkZXJCeToge1xyXG4gICAgICAgICAgbmFtZTogJ2FzYycsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YWtlOiA1LFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRhZ3MubWFwKCh0YWcpID0+IHRhZy5uYW1lKTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ3RyZW5kaW5nJywge1xyXG4gICAgYXN5bmMgcmVzb2x2ZSgpIHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHByaXNtYS5wb3N0VGFnLmdyb3VwQnkoe1xyXG4gICAgICAgIGJ5OiBbJ3RhZ05hbWUnXSxcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgcG9zdDoge1xyXG4gICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHtcclxuICAgICAgICAgICAgICBndGU6IGdldERhdGVYRGF5c0Fnbyg3LCBuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgIHBvc3RJZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICAgIF9jb3VudDoge1xyXG4gICAgICAgICAgICBwb3N0SWQ6ICdkZXNjJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YWtlOiA0LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBkYXRhLm1hcCgodGFnRGF0YSkgPT4gKHtcclxuICAgICAgICB0YWdOYW1lOiB0YWdEYXRhLnRhZ05hbWUsXHJcbiAgICAgICAgcG9zdHNDb3VudDogdGFnRGF0YS5fY291bnQucG9zdElkLFxyXG4gICAgICB9KSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdGFnUm91dGVyO1xyXG4iXSwibmFtZXMiOlsieiIsInByaXNtYSIsImNyZWF0ZVByb3RlY3RlZFJvdXRlciIsImdldERhdGVYRGF5c0FnbyIsInRhZ1JvdXRlciIsInF1ZXJ5IiwiaW5wdXQiLCJvYmplY3QiLCJzZWFyY2hQaHJhc2UiLCJzdHJpbmciLCJyZXNvbHZlIiwidGFncyIsInRhZyIsImZpbmRNYW55Iiwid2hlcmUiLCJuYW1lIiwiY29udGFpbnMiLCJvcmRlckJ5IiwidGFrZSIsIm1hcCIsImRhdGEiLCJwb3N0VGFnIiwiZ3JvdXBCeSIsImJ5IiwicG9zdCIsImlzRGVsZXRlZCIsImNyZWF0ZWRBdCIsImd0ZSIsIkRhdGUiLCJfY291bnQiLCJwb3N0SWQiLCJ0YWdEYXRhIiwidGFnTmFtZSIsInBvc3RzQ291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/router/tag.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/types.ts":
/*!************************************!*\
  !*** ./src/server/router/types.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CommunityFilterType\": () => (/* binding */ CommunityFilterType),\n/* harmony export */   \"NotificationKind\": () => (/* binding */ NotificationKind),\n/* harmony export */   \"SearchType\": () => (/* binding */ SearchType)\n/* harmony export */ });\nvar SearchType;\n(function(SearchType) {\n    SearchType[SearchType[\"COMMUNITY\"] = 0] = \"COMMUNITY\";\n    SearchType[SearchType[\"USER\"] = 1] = \"USER\";\n})(SearchType || (SearchType = {}));\nvar CommunityFilterType;\n(function(CommunityFilterType) {\n    CommunityFilterType[\"JOINED\"] = \"joined\";\n    CommunityFilterType[\"OWNED\"] = \"owned\";\n    CommunityFilterType[\"FAVOURITE\"] = \"favourite\";\n})(CommunityFilterType || (CommunityFilterType = {}));\nvar NotificationKind;\n(function(NotificationKind) {\n    NotificationKind[\"MENTION\"] = \"mention\";\n    NotificationKind[\"START_FOLLOW\"] = \"start_follow\";\n    NotificationKind[\"COMMUNITY_NEW_MEMBER\"] = \"community_new_member\";\n    NotificationKind[\"POST_COMMENT\"] = \"post_comment\";\n    NotificationKind[\"COMMENT_REPLY\"] = \"comment_reply\";\n})(NotificationKind || (NotificationKind = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci90eXBlcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxjQUdOO1VBSFdBLFVBQVU7SUFBVkEsVUFBVSxDQUFWQSxVQUFVLENBQ3BCQyxXQUFTLElBQVRBLENBQVMsSUFBVEEsV0FBUztJQURDRCxVQUFVLENBQVZBLFVBQVUsQ0FFcEJFLE1BQUksSUFBSkEsQ0FBSSxJQUFKQSxNQUFJO0dBRk1GLFVBQVUsS0FBVkEsVUFBVTtJQUtmLG1CQUlOO1VBSldHLG1CQUFtQjtJQUFuQkEsbUJBQW1CLENBQzdCQyxRQUFNLElBQUcsUUFBUTtJQURQRCxtQkFBbUIsQ0FFN0JFLE9BQUssSUFBRyxPQUFPO0lBRkxGLG1CQUFtQixDQUc3QkcsV0FBUyxJQUFHLFdBQVc7R0FIYkgsbUJBQW1CLEtBQW5CQSxtQkFBbUI7SUFNeEIsZ0JBTU47VUFOV0ksZ0JBQWdCO0lBQWhCQSxnQkFBZ0IsQ0FDMUJDLFNBQU8sSUFBRyxTQUFTO0lBRFRELGdCQUFnQixDQUUxQkUsY0FBWSxJQUFHLGNBQWM7SUFGbkJGLGdCQUFnQixDQUcxQkcsc0JBQW9CLElBQUcsc0JBQXNCO0lBSG5DSCxnQkFBZ0IsQ0FJMUJJLGNBQVksSUFBRyxjQUFjO0lBSm5CSixnQkFBZ0IsQ0FLMUJLLGVBQWEsSUFBRyxlQUFlO0dBTHJCTCxnQkFBZ0IsS0FBaEJBLGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL3NlcnZlci9yb3V0ZXIvdHlwZXMudHM/NGNmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBTZWFyY2hUeXBlIHtcclxuICBDT01NVU5JVFksXHJcbiAgVVNFUixcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29tbXVuaXR5RmlsdGVyVHlwZSB7XHJcbiAgSk9JTkVEID0gJ2pvaW5lZCcsXHJcbiAgT1dORUQgPSAnb3duZWQnLFxyXG4gIEZBVk9VUklURSA9ICdmYXZvdXJpdGUnLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOb3RpZmljYXRpb25LaW5kIHtcclxuICBNRU5USU9OID0gJ21lbnRpb24nLFxyXG4gIFNUQVJUX0ZPTExPVyA9ICdzdGFydF9mb2xsb3cnLFxyXG4gIENPTU1VTklUWV9ORVdfTUVNQkVSID0gJ2NvbW11bml0eV9uZXdfbWVtYmVyJyxcclxuICBQT1NUX0NPTU1FTlQgPSAncG9zdF9jb21tZW50JyxcclxuICBDT01NRU5UX1JFUExZID0gJ2NvbW1lbnRfcmVwbHknLFxyXG59Il0sIm5hbWVzIjpbIlNlYXJjaFR5cGUiLCJDT01NVU5JVFkiLCJVU0VSIiwiQ29tbXVuaXR5RmlsdGVyVHlwZSIsIkpPSU5FRCIsIk9XTkVEIiwiRkFWT1VSSVRFIiwiTm90aWZpY2F0aW9uS2luZCIsIk1FTlRJT04iLCJTVEFSVF9GT0xMT1ciLCJDT01NVU5JVFlfTkVXX01FTUJFUiIsIlBPU1RfQ09NTUVOVCIsIkNPTU1FTlRfUkVQTFkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/router/types.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/user.ts":
/*!***********************************!*\
  !*** ./src/server/router/user.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _protected_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./protected-router */ \"(api)/./src/server/router/protected-router.ts\");\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./src/server/router/utils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _protected_router__WEBPACK_IMPORTED_MODULE_1__, _db_client__WEBPACK_IMPORTED_MODULE_2__, _utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable @typescript-eslint/naming-convention */ \n\n\n\nconst userRouter = (0,_protected_router__WEBPACK_IMPORTED_MODULE_1__[\"default\"])().query(\"getById\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const user = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                id: input.userId\n            },\n            include: {\n                followedBy: true,\n                _count: {\n                    select: {\n                        followedBy: true,\n                        following: true\n                    }\n                }\n            }\n        });\n        if (!user) throw new Error(\"no user with id\");\n        const { _count , followedBy , ...userData } = user;\n        return {\n            ...userData,\n            followingCount: _count.following,\n            followedByCount: _count.followedBy,\n            followedByMe: followedBy.some((follower)=>follower.id === ctx.session.user.id)\n        };\n    }\n}).query(\"me\", {\n    async resolve ({ ctx  }) {\n        return ctx.session.user;\n    }\n}).query(\"getFollowing\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const myFollowing = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: ctx.session.user.id\n                    }\n                }\n            }\n        });\n        const myFollowingIds = myFollowing.map((user)=>user.id);\n        const users = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: input.userId\n                    }\n                }\n            },\n            include: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUsersListInclude)(myFollowingIds)\n        });\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateUsersList)(users, myFollowingIds);\n    }\n}).query(\"getFollowers\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input , ctx  }) {\n        const myFollowing = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                followedBy: {\n                    some: {\n                        id: ctx.session.user.id\n                    }\n                }\n            }\n        });\n        const myFollowingIds = myFollowing.map((user)=>user.id);\n        const users = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                following: {\n                    some: {\n                        id: input.userId\n                    }\n                }\n            },\n            include: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getUsersListInclude)(myFollowingIds)\n        });\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.populateUsersList)(users, myFollowingIds);\n    }\n}).query(\"getBySearchPhrase\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        searchPhrase: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ input  }) {\n        if (!input.searchPhrase) {\n            return [];\n        }\n        const matchingUsers = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findMany({\n            where: {\n                name: {\n                    contains: input.searchPhrase\n                }\n            },\n            select: {\n                id: true,\n                name: true\n            },\n            take: 5\n        });\n        return matchingUsers;\n    }\n}).mutation(\"followUser\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }),\n    async resolve ({ ctx , input  }) {\n        if (input.userId === ctx.session.user.id) {\n            throw new Error(\"U cant follow yourself\");\n        }\n        const user = await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findFirst({\n            where: {\n                id: ctx.session.user.id\n            },\n            select: {\n                following: true\n            }\n        });\n        const isUserFollowed = user?.following.some((u)=>u.id === input.userId) || false;\n        await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.update({\n            where: {\n                id: ctx.session.user.id\n            },\n            data: {\n                following: isUserFollowed ? {\n                    disconnect: {\n                        id: input.userId\n                    }\n                } : {\n                    connect: {\n                        id: input.userId\n                    }\n                }\n            }\n        });\n        if (!isUserFollowed) {\n            await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.notification.create({\n                data: {\n                    userId: input.userId\n                }\n            }).then((notification)=>_db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.notificationStartFollow.create({\n                    data: {\n                        notificationId: notification.id,\n                        userIdNotificationStartFollow: ctx.session.user.id\n                    }\n                }));\n        }\n    }\n}).mutation(\"update\", {\n    input: zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        bio: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        image: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        bannerImage: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }),\n    async resolve ({ ctx , input  }) {\n        await _db_client__WEBPACK_IMPORTED_MODULE_2__.prisma.user.update({\n            where: {\n                id: ctx.session.user.id\n            },\n            data: {\n                name: input.name,\n                bio: input.bio,\n                image: input.image,\n                bannerImage: input.bannerImage\n            }\n        });\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userRouter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDOEIsSUFBSTtnQkFDaEJpQixHQUFHLEVBQUUvQyxLQUFLLENBQUMrQyxHQUFHO2dCQUVkQyxLQUFLLEVBQUVoRCxLQUFLLENBQUNnRCxLQUFLO2dCQUNsQkUsV0FBVyxFQUFFbEQsS0FBSyxDQUFDa0QsV0FBVzthQUMvQjtTQUNGLENBQUMsQ0FBQztLQUNKO0NBQ0YsQ0FBQztBQUVKLGlFQUFlcEQsVUFBVSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci91c2VyLnRzPzU5MjIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5pbXBvcnQgY3JlYXRlUHJvdGVjdGVkUm91dGVyIGZyb20gJy4vcHJvdGVjdGVkLXJvdXRlcic7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uL2RiL2NsaWVudCc7XHJcbmltcG9ydCB7IGdldFVzZXJzTGlzdEluY2x1ZGUsIHBvcHVsYXRlVXNlcnNMaXN0IH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5jb25zdCB1c2VyUm91dGVyID0gY3JlYXRlUHJvdGVjdGVkUm91dGVyKClcclxuICAucXVlcnkoJ2dldEJ5SWQnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBpbnB1dCwgY3R4IH0pIHtcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZDogaW5wdXQudXNlcklkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgZm9sbG93ZWRCeTogdHJ1ZSxcclxuICAgICAgICAgIF9jb3VudDoge1xyXG4gICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICBmb2xsb3dlZEJ5OiB0cnVlLFxyXG4gICAgICAgICAgICAgIGZvbGxvd2luZzogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcignbm8gdXNlciB3aXRoIGlkJyk7XHJcblxyXG4gICAgICBjb25zdCB7IF9jb3VudCwgZm9sbG93ZWRCeSwgLi4udXNlckRhdGEgfSA9IHVzZXI7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnVzZXJEYXRhLFxyXG4gICAgICAgIGZvbGxvd2luZ0NvdW50OiBfY291bnQuZm9sbG93aW5nLFxyXG4gICAgICAgIGZvbGxvd2VkQnlDb3VudDogX2NvdW50LmZvbGxvd2VkQnksXHJcbiAgICAgICAgZm9sbG93ZWRCeU1lOiBmb2xsb3dlZEJ5LnNvbWUoXHJcbiAgICAgICAgICAoZm9sbG93ZXIpID0+IGZvbGxvd2VyLmlkID09PSBjdHguc2Vzc2lvbi51c2VyLmlkXHJcbiAgICAgICAgKSxcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ21lJywge1xyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGN0eCB9KSB7XHJcbiAgICAgIHJldHVybiBjdHguc2Vzc2lvbi51c2VyO1xyXG4gICAgfSxcclxuICB9KVxyXG4gIC5xdWVyeSgnZ2V0Rm9sbG93aW5nJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgdXNlcklkOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcbiAgICBhc3luYyByZXNvbHZlKHsgaW5wdXQsIGN0eCB9KSB7XHJcbiAgICAgIGNvbnN0IG15Rm9sbG93aW5nID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBmb2xsb3dlZEJ5OiB7XHJcbiAgICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBteUZvbGxvd2luZ0lkcyA9IG15Rm9sbG93aW5nLm1hcCgodXNlcikgPT4gdXNlci5pZCk7XHJcblxyXG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgZm9sbG93ZWRCeToge1xyXG4gICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgaWQ6IGlucHV0LnVzZXJJZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmNsdWRlOiBnZXRVc2Vyc0xpc3RJbmNsdWRlKG15Rm9sbG93aW5nSWRzKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcG9wdWxhdGVVc2Vyc0xpc3QodXNlcnMsIG15Rm9sbG93aW5nSWRzKTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ2dldEZvbGxvd2VycycsIHtcclxuICAgIGlucHV0OiB6Lm9iamVjdCh7XHJcbiAgICAgIHVzZXJJZDogei5zdHJpbmcoKSxcclxuICAgIH0pLFxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0LCBjdHggfSkge1xyXG4gICAgICBjb25zdCBteUZvbGxvd2luZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgZm9sbG93ZWRCeToge1xyXG4gICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgaWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbXlGb2xsb3dpbmdJZHMgPSBteUZvbGxvd2luZy5tYXAoKHVzZXIpID0+IHVzZXIuaWQpO1xyXG5cclxuICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGZvbGxvd2luZzoge1xyXG4gICAgICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICAgICAgaWQ6IGlucHV0LnVzZXJJZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbmNsdWRlOiBnZXRVc2Vyc0xpc3RJbmNsdWRlKG15Rm9sbG93aW5nSWRzKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcG9wdWxhdGVVc2Vyc0xpc3QodXNlcnMsIG15Rm9sbG93aW5nSWRzKTtcclxuICAgIH0sXHJcbiAgfSlcclxuICAucXVlcnkoJ2dldEJ5U2VhcmNoUGhyYXNlJywge1xyXG4gICAgaW5wdXQ6IHoub2JqZWN0KHtcclxuICAgICAgc2VhcmNoUGhyYXNlOiB6LnN0cmluZygpLFxyXG4gICAgfSksXHJcblxyXG4gICAgYXN5bmMgcmVzb2x2ZSh7IGlucHV0IH0pIHtcclxuICAgICAgaWYgKCFpbnB1dC5zZWFyY2hQaHJhc2UpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbWF0Y2hpbmdVc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICBjb250YWluczogaW5wdXQuc2VhcmNoUGhyYXNlLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFrZTogNSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gbWF0Y2hpbmdVc2VycztcclxuICAgIH0sXHJcbiAgfSlcclxuICAubXV0YXRpb24oJ2ZvbGxvd1VzZXInLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCksXHJcbiAgICB9KSxcclxuXHJcbiAgICBhc3luYyByZXNvbHZlKHsgY3R4LCBpbnB1dCB9KSB7XHJcbiAgICAgIGlmIChpbnB1dC51c2VySWQgPT09IGN0eC5zZXNzaW9uLnVzZXIuaWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1UgY2FudCBmb2xsb3cgeW91cnNlbGYnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICBmb2xsb3dpbmc6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBpc1VzZXJGb2xsb3dlZCA9XHJcbiAgICAgICAgdXNlcj8uZm9sbG93aW5nLnNvbWUoKHUpID0+IHUuaWQgPT09IGlucHV0LnVzZXJJZCkgfHwgZmFsc2U7XHJcblxyXG4gICAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZDogY3R4LnNlc3Npb24udXNlci5pZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGZvbGxvd2luZzogaXNVc2VyRm9sbG93ZWRcclxuICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgIGlkOiBpbnB1dC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgIGlkOiBpbnB1dC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZighaXNVc2VyRm9sbG93ZWQpIHtcclxuICAgICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHVzZXJJZDogaW5wdXQudXNlcklkLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uPT5wcmlzbWEubm90aWZpY2F0aW9uU3RhcnRGb2xsb3cuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIG5vdGlmaWNhdGlvbklkOiBub3RpZmljYXRpb24uaWQsXHJcbiAgICAgICAgICAgICAgdXNlcklkTm90aWZpY2F0aW9uU3RhcnRGb2xsb3c6IGN0eC5zZXNzaW9uLnVzZXIuaWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gIH0pXHJcbiAgLm11dGF0aW9uKCd1cGRhdGUnLCB7XHJcbiAgICBpbnB1dDogei5vYmplY3Qoe1xyXG4gICAgICBuYW1lOiB6LnN0cmluZygpLFxyXG4gICAgICBiaW86IHouc3RyaW5nKCksXHJcbiAgICAgIGltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICAgIGJhbm5lckltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICB9KSxcclxuICAgIGFzeW5jIHJlc29sdmUoeyBjdHgsIGlucHV0IH0pIHtcclxuICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgaWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBuYW1lOiBpbnB1dC5uYW1lLFxyXG4gICAgICAgICAgYmlvOiBpbnB1dC5iaW8sXHJcblxyXG4gICAgICAgICAgaW1hZ2U6IGlucHV0LmltYWdlLFxyXG4gICAgICAgICAgYmFubmVySW1hZ2U6IGlucHV0LmJhbm5lckltYWdlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZXJSb3V0ZXI7XHJcbiJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlUHJvdGVjdGVkUm91dGVyIiwicHJpc21hIiwiZ2V0VXNlcnNMaXN0SW5jbHVkZSIsInBvcHVsYXRlVXNlcnNMaXN0IiwidXNlclJvdXRlciIsInF1ZXJ5IiwiaW5wdXQiLCJvYmplY3QiLCJ1c2VySWQiLCJzdHJpbmciLCJyZXNvbHZlIiwiY3R4IiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsImZvbGxvd2VkQnkiLCJfY291bnQiLCJzZWxlY3QiLCJmb2xsb3dpbmciLCJFcnJvciIsInVzZXJEYXRhIiwiZm9sbG93aW5nQ291bnQiLCJmb2xsb3dlZEJ5Q291bnQiLCJmb2xsb3dlZEJ5TWUiLCJzb21lIiwiZm9sbG93ZXIiLCJzZXNzaW9uIiwibXlGb2xsb3dpbmciLCJmaW5kTWFueSIsIm15Rm9sbG93aW5nSWRzIiwibWFwIiwidXNlcnMiLCJzZWFyY2hQaHJhc2UiLCJtYXRjaGluZ1VzZXJzIiwibmFtZSIsImNvbnRhaW5zIiwidGFrZSIsIm11dGF0aW9uIiwiZmluZEZpcnN0IiwiaXNVc2VyRm9sbG93ZWQiLCJ1IiwidXBkYXRlIiwiZGF0YSIsImRpc2Nvbm5lY3QiLCJjb25uZWN0Iiwibm90aWZpY2F0aW9uIiwiY3JlYXRlIiwidGhlbiIsIm5vdGlmaWNhdGlvblN0YXJ0Rm9sbG93Iiwibm90aWZpY2F0aW9uSWQiLCJ1c2VySWROb3RpZmljYXRpb25TdGFydEZvbGxvdyIsImJpbyIsImltYWdlIiwib3B0aW9uYWwiLCJiYW5uZXJJbWFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/router/user.ts\n");

/***/ }),

/***/ "(api)/./src/server/router/utils.ts":
/*!************************************!*\
  !*** ./src/server/router/utils.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"communityListInclude\": () => (/* binding */ communityListInclude),\n/* harmony export */   \"getDateXDaysAgo\": () => (/* binding */ getDateXDaysAgo),\n/* harmony export */   \"getMyFollowingIds\": () => (/* binding */ getMyFollowingIds),\n/* harmony export */   \"getUsersListInclude\": () => (/* binding */ getUsersListInclude),\n/* harmony export */   \"populateCommunitiesList\": () => (/* binding */ populateCommunitiesList),\n/* harmony export */   \"populatePost\": () => (/* binding */ populatePost),\n/* harmony export */   \"populateUsersList\": () => (/* binding */ populateUsersList),\n/* harmony export */   \"postDetailsInclude\": () => (/* binding */ postDetailsInclude)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _db_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/client */ \"(api)/./src/server/db/client.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_db_client__WEBPACK_IMPORTED_MODULE_1__]);\n_db_client__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* eslint-disable @typescript-eslint/naming-convention */ \n\nconst postDetailsInclude = {\n    images: true,\n    tags: {\n        include: {\n            tag: true\n        }\n    },\n    comments: {\n        select: {\n            isDeleted: true\n        }\n    },\n    user: true,\n    _count: true,\n    likes: true,\n    community: {\n        select: {\n            name: true\n        }\n    },\n    sharedBy: {\n        select: {\n            user: {\n                select: {\n                    id: true,\n                    name: true\n                }\n            }\n        }\n    },\n    mentions: {\n        include: {\n            user: {\n                select: {\n                    id: true,\n                    name: true\n                }\n            }\n        }\n    },\n    bookmarkedBy: true,\n    shareParent: {\n        include: {\n            images: true,\n            user: {\n                select: {\n                    id: true,\n                    name: true,\n                    image: true\n                }\n            }\n        }\n    }\n};\nconst communityListInclude = {\n    _count: true,\n    category: true,\n    members: {\n        select: {\n            userId: true,\n            role: true\n        }\n    },\n    favouriteBy: {\n        select: {\n            userId: true\n        }\n    }\n};\nconst getUsersListInclude = (myFollowingIds)=>({\n        followedBy: {\n            where: {\n                id: {\n                    in: myFollowingIds\n                }\n            },\n            select: {\n                id: true,\n                name: true\n            }\n        },\n        _count: {\n            select: {\n                followedBy: true\n            }\n        }\n    });\nconst postWithUserAndImages = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.validator()({\n    include: postDetailsInclude\n});\nconst communitiesList = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.validator()({\n    include: communityListInclude\n});\nconst usersList = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.validator()({\n    include: getUsersListInclude([])\n});\nconst populateUsersList = (users, myFollowingIds)=>users.map(({ _count , bannerImage , emailVerified , followedBy , id , ...suggestedUserData })=>({\n            ...suggestedUserData,\n            id,\n            mutualUsers: followedBy,\n            followersCount: _count.followedBy,\n            followedByMe: myFollowingIds.some((follow)=>follow === id)\n        }));\nconst populateCommunitiesList = (communities, userId)=>communities.map(({ _count , members , favouriteBy , ...communityData })=>({\n            ...communityData,\n            membersCount: _count.members,\n            joinedByMe: members.some((member)=>member.userId === userId),\n            isMyfavourite: favouriteBy.some((user)=>user.userId === userId),\n            isOwner: members.find((member)=>member.role === \"ADMIN\")?.userId === userId\n        }));\nconst populatePost = (post, userId, myFollowingIds)=>{\n    const { _count , likes , bookmarkedBy , tags , community , comments , mentions , sharedBy , user: { bio , email , emailVerified , ...userData } , ...postData } = post;\n    return {\n        ...postData,\n        user: {\n            ...userData\n        },\n        sharedBy: sharedBy.map((userShare)=>userShare.user).filter((user)=>myFollowingIds.includes(user.id)),\n        mentions: mentions.map((mention)=>mention.user),\n        communityName: community?.name || null,\n        tags: post.tags.map((tag)=>tag.tag),\n        likesCount: _count.likes,\n        commentsCount: comments.filter((comment)=>!comment.isDeleted).length,\n        sharesCount: _count.shares + sharedBy.length,\n        sharedByMe: sharedBy.some((userShare)=>userShare.user.id === userId),\n        likedByMe: likes.some((postLike)=>postLike.userId === userId),\n        bookmarkedByMe: bookmarkedBy.some((bookmark)=>bookmark.userId === userId)\n    };\n};\n// export const swapRepostWithOriginal = async (post: PostCardProps) => {\n//   if (post.isQuoteShare !== false) return { ...post, rePostedBy: null };\n//   const parentPost = await prisma.post.findUnique({\n//     where: {\n//       id: post.shareParentId!,\n//     },\n//     include: postDetailsInclude,\n//   });\n//   return parentPost\n//     ? { ...parentPost, rePostedBy: null }\n//     : { ...post, rePostedBy: post.user };\n// };\nconst getMyFollowingIds = async (userId)=>{\n    const myFollowing = await _db_client__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findMany({\n        where: {\n            followedBy: {\n                some: {\n                    id: userId\n                }\n            }\n        }\n    });\n    return myFollowing.map((user)=>user.id);\n};\nconst getDateXDaysAgo = (numOfDays, date = new Date())=>{\n    const daysAgo = new Date(date.getTime());\n    daysAgo.setDate(date.getDate() - numOfDays);\n    return daysAgo;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL3JvdXRlci91dGlscy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHlEQUF5RCxDQUNqQjtBQUNGO0FBRS9CLE1BQU1FLGtCQUFrQixHQUFHO0lBQ2hDQyxNQUFNLEVBQUUsSUFBSTtJQUNaQyxJQUFJLEVBQUU7UUFDSkMsT0FBTyxFQUFFO1lBQ1BDLEdBQUcsRUFBRSxJQUFJO1NBQ1Y7S0FDRjtJQUNEQyxRQUFRLEVBQUU7UUFDUkMsTUFBTSxFQUFFO1lBQ05DLFNBQVMsRUFBRSxJQUFJO1NBQ2hCO0tBQ0Y7SUFDREMsSUFBSSxFQUFFLElBQUk7SUFDVkMsTUFBTSxFQUFFLElBQUk7SUFDWkMsS0FBSyxFQUFFLElBQUk7SUFDWEMsU0FBUyxFQUFFO1FBQ1RMLE1BQU0sRUFBRTtZQUNOTSxJQUFJLEVBQUUsSUFBSTtTQUNYO0tBQ0Y7SUFDREMsUUFBUSxFQUFFO1FBQ1JQLE1BQU0sRUFBRTtZQUNORSxJQUFJLEVBQUU7Z0JBQ0pGLE1BQU0sRUFBRTtvQkFDTlEsRUFBRSxFQUFFLElBQUk7b0JBQ1JGLElBQUksRUFBRSxJQUFJO2lCQUNYO2FBQ0Y7U0FDRjtLQUNGO0lBQ0RHLFFBQVEsRUFBRTtRQUNSWixPQUFPLEVBQUU7WUFDUEssSUFBSSxFQUFFO2dCQUNKRixNQUFNLEVBQUU7b0JBQ05RLEVBQUUsRUFBRSxJQUFJO29CQUNSRixJQUFJLEVBQUUsSUFBSTtpQkFDWDthQUNGO1NBQ0Y7S0FDRjtJQUNESSxZQUFZLEVBQUUsSUFBSTtJQUNsQkMsV0FBVyxFQUFFO1FBQ1hkLE9BQU8sRUFBRTtZQUNQRixNQUFNLEVBQUUsSUFBSTtZQUNaTyxJQUFJLEVBQUU7Z0JBQ0pGLE1BQU0sRUFBRTtvQkFDTlEsRUFBRSxFQUFFLElBQUk7b0JBQ1JGLElBQUksRUFBRSxJQUFJO29CQUNWTSxLQUFLLEVBQUUsSUFBSTtpQkFDWjthQUNGO1NBQ0Y7S0FDRjtDQUNGLENBQUM7QUFFSyxNQUFNQyxvQkFBb0IsR0FBRztJQUNsQ1YsTUFBTSxFQUFFLElBQUk7SUFDWlcsUUFBUSxFQUFFLElBQUk7SUFDZEMsT0FBTyxFQUFFO1FBQ1BmLE1BQU0sRUFBRTtZQUNOZ0IsTUFBTSxFQUFFLElBQUk7WUFDWkMsSUFBSSxFQUFFLElBQUk7U0FDWDtLQUNGO0lBQ0RDLFdBQVcsRUFBRTtRQUNYbEIsTUFBTSxFQUFFO1lBQ05nQixNQUFNLEVBQUUsSUFBSTtTQUNiO0tBQ0Y7Q0FDRixDQUFDO0FBRUssTUFBTUcsbUJBQW1CLEdBQUcsQ0FBQ0MsY0FBd0IsR0FBSyxDQUFDO1FBQ2hFQyxVQUFVLEVBQUU7WUFDVkMsS0FBSyxFQUFFO2dCQUNMZCxFQUFFLEVBQUU7b0JBQ0ZlLEVBQUUsRUFBRUgsY0FBYztpQkFDbkI7YUFDRjtZQUNEcEIsTUFBTSxFQUFFO2dCQUNOUSxFQUFFLEVBQUUsSUFBSTtnQkFDUkYsSUFBSSxFQUFFLElBQUk7YUFDWDtTQUNGO1FBQ0RILE1BQU0sRUFBRTtZQUNOSCxNQUFNLEVBQUU7Z0JBQ05xQixVQUFVLEVBQUUsSUFBSTthQUNqQjtTQUNGO0tBQ0YsQ0FBQyxDQUFDO0FBRUgsTUFBTUcscUJBQXFCLEdBQUdoQyw0REFBZ0IsRUFBbUIsQ0FBQztJQUNoRUssT0FBTyxFQUFFSCxrQkFBa0I7Q0FDNUIsQ0FBQztBQVFGLE1BQU1nQyxlQUFlLEdBQUdsQyw0REFBZ0IsRUFBd0IsQ0FBQztJQUMvREssT0FBTyxFQUFFZ0Isb0JBQW9CO0NBQzlCLENBQUM7QUFJRixNQUFNYyxTQUFTLEdBQUduQyw0REFBZ0IsRUFBbUIsQ0FBQztJQUNwREssT0FBTyxFQUFFc0IsbUJBQW1CLENBQUMsRUFBRSxDQUFDO0NBQ2pDLENBQUM7QUFJSyxNQUFNUyxpQkFBaUIsR0FBRyxDQUMvQkMsS0FBc0IsRUFDdEJULGNBQXdCLEdBRXhCUyxLQUFLLENBQUNDLEdBQUcsQ0FDUCxDQUFDLEVBQ0MzQixNQUFNLEdBQ040QixXQUFXLEdBQ1hDLGFBQWEsR0FDYlgsVUFBVSxHQUNWYixFQUFFLEdBQ0YsR0FBR3lCLGlCQUFpQixFQUNyQixHQUFLLENBQUM7WUFDTCxHQUFHQSxpQkFBaUI7WUFDcEJ6QixFQUFFO1lBQ0YwQixXQUFXLEVBQUViLFVBQVU7WUFDdkJjLGNBQWMsRUFBRWhDLE1BQU0sQ0FBQ2tCLFVBQVU7WUFDakNlLFlBQVksRUFBRWhCLGNBQWMsQ0FBQ2lCLElBQUksQ0FBQyxDQUFDQyxNQUFNLEdBQUtBLE1BQU0sS0FBSzlCLEVBQUUsQ0FBQztTQUM3RCxDQUFDLENBQ0gsQ0FBQztBQUVHLE1BQU0rQix1QkFBdUIsR0FBRyxDQUNyQ0MsV0FBOEIsRUFDOUJ4QixNQUFjLEdBRWR3QixXQUFXLENBQUNWLEdBQUcsQ0FBQyxDQUFDLEVBQUUzQixNQUFNLEdBQUVZLE9BQU8sR0FBRUcsV0FBVyxHQUFFLEdBQUd1QixhQUFhLEVBQUUsR0FBSyxDQUFDO1lBQ3ZFLEdBQUdBLGFBQWE7WUFDaEJDLFlBQVksRUFBRXZDLE1BQU0sQ0FBQ1ksT0FBTztZQUM1QjRCLFVBQVUsRUFBRTVCLE9BQU8sQ0FBQ3NCLElBQUksQ0FBQyxDQUFDTyxNQUFNLEdBQUtBLE1BQU0sQ0FBQzVCLE1BQU0sS0FBS0EsTUFBTSxDQUFDO1lBQzlENkIsYUFBYSxFQUFFM0IsV0FBVyxDQUFDbUIsSUFBSSxDQUFDLENBQUNuQyxJQUFJLEdBQUtBLElBQUksQ0FBQ2MsTUFBTSxLQUFLQSxNQUFNLENBQUM7WUFDakU4QixPQUFPLEVBQ0wvQixPQUFPLENBQUNnQyxJQUFJLENBQUMsQ0FBQ0gsTUFBTSxHQUFLQSxNQUFNLENBQUMzQixJQUFJLEtBQUssT0FBTyxDQUFDLEVBQUVELE1BQU0sS0FBS0EsTUFBTTtTQUN2RSxDQUFDLENBQUMsQ0FBQztBQUVDLE1BQU1nQyxZQUFZLEdBQUcsQ0FDMUJDLElBQW1CLEVBQ25CakMsTUFBYyxFQUNkSSxjQUF3QixHQUNyQjtJQUNILE1BQU0sRUFDSmpCLE1BQU0sR0FDTkMsS0FBSyxHQUNMTSxZQUFZLEdBQ1pkLElBQUksR0FDSlMsU0FBUyxHQUNUTixRQUFRLEdBQ1JVLFFBQVEsR0FDUkYsUUFBUSxHQUNSTCxJQUFJLEVBQUUsRUFBRWdELEdBQUcsR0FBRUMsS0FBSyxHQUFFbkIsYUFBYSxHQUFFLEdBQUdvQixRQUFRLEVBQUUsR0FDaEQsR0FBR0MsUUFBUSxFQUNaLEdBQUdKLElBQUk7SUFFUixPQUFPO1FBQ0wsR0FBR0ksUUFBUTtRQUNYbkQsSUFBSSxFQUFFO1lBQ0osR0FBR2tELFFBQVE7U0FDWjtRQUNEN0MsUUFBUSxFQUFFQSxRQUFRLENBQ2Z1QixHQUFHLENBQUMsQ0FBQ3dCLFNBQVMsR0FBS0EsU0FBUyxDQUFDcEQsSUFBSSxDQUFDLENBQ2xDcUQsTUFBTSxDQUFDLENBQUNyRCxJQUFJLEdBQUtrQixjQUFjLENBQUNvQyxRQUFRLENBQUN0RCxJQUFJLENBQUNNLEVBQUUsQ0FBQyxDQUFDO1FBQ3JEQyxRQUFRLEVBQUVBLFFBQVEsQ0FBQ3FCLEdBQUcsQ0FBQyxDQUFDMkIsT0FBTyxHQUFLQSxPQUFPLENBQUN2RCxJQUFJLENBQUM7UUFDakR3RCxhQUFhLEVBQUVyRCxTQUFTLEVBQUVDLElBQUksSUFBSSxJQUFJO1FBQ3RDVixJQUFJLEVBQUVxRCxJQUFJLENBQUNyRCxJQUFJLENBQUNrQyxHQUFHLENBQUMsQ0FBQ2hDLEdBQUcsR0FBS0EsR0FBRyxDQUFDQSxHQUFHLENBQUM7UUFDckM2RCxVQUFVLEVBQUV4RCxNQUFNLENBQUNDLEtBQUs7UUFDeEJ3RCxhQUFhLEVBQUU3RCxRQUFRLENBQUN3RCxNQUFNLENBQUMsQ0FBQ00sT0FBTyxHQUFLLENBQUNBLE9BQU8sQ0FBQzVELFNBQVMsQ0FBQyxDQUFDNkQsTUFBTTtRQUN0RUMsV0FBVyxFQUFFNUQsTUFBTSxDQUFDNkQsTUFBTSxHQUFHekQsUUFBUSxDQUFDdUQsTUFBTTtRQUM1Q0csVUFBVSxFQUFFMUQsUUFBUSxDQUFDOEIsSUFBSSxDQUFDLENBQUNpQixTQUFTLEdBQUtBLFNBQVMsQ0FBQ3BELElBQUksQ0FBQ00sRUFBRSxLQUFLUSxNQUFNLENBQUM7UUFDdEVrRCxTQUFTLEVBQUU5RCxLQUFLLENBQUNpQyxJQUFJLENBQUMsQ0FBQzhCLFFBQVEsR0FBS0EsUUFBUSxDQUFDbkQsTUFBTSxLQUFLQSxNQUFNLENBQUM7UUFDL0RvRCxjQUFjLEVBQUUxRCxZQUFZLENBQUMyQixJQUFJLENBQUMsQ0FBQ2dDLFFBQVEsR0FBS0EsUUFBUSxDQUFDckQsTUFBTSxLQUFLQSxNQUFNLENBQUM7S0FDNUUsQ0FBQztDQUNILENBQUM7QUFFRix5RUFBeUU7QUFDekUsMkVBQTJFO0FBRTNFLHNEQUFzRDtBQUN0RCxlQUFlO0FBQ2YsaUNBQWlDO0FBQ2pDLFNBQVM7QUFDVCxtQ0FBbUM7QUFDbkMsUUFBUTtBQUVSLHNCQUFzQjtBQUN0Qiw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDLEtBQUs7QUFFRSxNQUFNc0QsaUJBQWlCLEdBQUcsT0FBT3RELE1BQWMsR0FBSztJQUN6RCxNQUFNdUQsV0FBVyxHQUFHLE1BQU05RSw0REFBb0IsQ0FBQztRQUM3QzZCLEtBQUssRUFBRTtZQUNMRCxVQUFVLEVBQUU7Z0JBQ1ZnQixJQUFJLEVBQUU7b0JBQ0o3QixFQUFFLEVBQUVRLE1BQU07aUJBQ1g7YUFDRjtTQUNGO0tBQ0YsQ0FBQztJQUVGLE9BQU91RCxXQUFXLENBQUN6QyxHQUFHLENBQUMsQ0FBQzVCLElBQUksR0FBS0EsSUFBSSxDQUFDTSxFQUFFLENBQUMsQ0FBQztDQUMzQyxDQUFDO0FBRUssTUFBTWlFLGVBQWUsR0FBRyxDQUFDQyxTQUFpQixFQUFFQyxJQUFJLEdBQUcsSUFBSUMsSUFBSSxFQUFFLEdBQUs7SUFDdkUsTUFBTUMsT0FBTyxHQUFHLElBQUlELElBQUksQ0FBQ0QsSUFBSSxDQUFDRyxPQUFPLEVBQUUsQ0FBQztJQUN4Q0QsT0FBTyxDQUFDRSxPQUFPLENBQUNKLElBQUksQ0FBQ0ssT0FBTyxFQUFFLEdBQUdOLFNBQVMsQ0FBQyxDQUFDO0lBRTVDLE9BQU9HLE9BQU8sQ0FBQztDQUNoQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS1uZXcvLi9zcmMvc2VydmVyL3JvdXRlci91dGlscy50cz8wZmFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xyXG5pbXBvcnQgeyBQcmlzbWEgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uL2RiL2NsaWVudCc7XHJcblxyXG5leHBvcnQgY29uc3QgcG9zdERldGFpbHNJbmNsdWRlID0ge1xyXG4gIGltYWdlczogdHJ1ZSxcclxuICB0YWdzOiB7XHJcbiAgICBpbmNsdWRlOiB7XHJcbiAgICAgIHRhZzogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb21tZW50czoge1xyXG4gICAgc2VsZWN0OiB7XHJcbiAgICAgIGlzRGVsZXRlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICB1c2VyOiB0cnVlLFxyXG4gIF9jb3VudDogdHJ1ZSxcclxuICBsaWtlczogdHJ1ZSxcclxuICBjb21tdW5pdHk6IHtcclxuICAgIHNlbGVjdDoge1xyXG4gICAgICBuYW1lOiB0cnVlLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHNoYXJlZEJ5OiB7XHJcbiAgICBzZWxlY3Q6IHtcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgbWVudGlvbnM6IHtcclxuICAgIGluY2x1ZGU6IHtcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgYm9va21hcmtlZEJ5OiB0cnVlLFxyXG4gIHNoYXJlUGFyZW50OiB7XHJcbiAgICBpbmNsdWRlOiB7XHJcbiAgICAgIGltYWdlczogdHJ1ZSxcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgaW1hZ2U6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb21tdW5pdHlMaXN0SW5jbHVkZSA9IHtcclxuICBfY291bnQ6IHRydWUsXHJcbiAgY2F0ZWdvcnk6IHRydWUsXHJcbiAgbWVtYmVyczoge1xyXG4gICAgc2VsZWN0OiB7XHJcbiAgICAgIHVzZXJJZDogdHJ1ZSxcclxuICAgICAgcm9sZTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBmYXZvdXJpdGVCeToge1xyXG4gICAgc2VsZWN0OiB7XHJcbiAgICAgIHVzZXJJZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRVc2Vyc0xpc3RJbmNsdWRlID0gKG15Rm9sbG93aW5nSWRzOiBzdHJpbmdbXSkgPT4gKHtcclxuICBmb2xsb3dlZEJ5OiB7XHJcbiAgICB3aGVyZToge1xyXG4gICAgICBpZDoge1xyXG4gICAgICAgIGluOiBteUZvbGxvd2luZ0lkcyxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3Q6IHtcclxuICAgICAgaWQ6IHRydWUsXHJcbiAgICAgIG5hbWU6IHRydWUsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgX2NvdW50OiB7XHJcbiAgICBzZWxlY3Q6IHtcclxuICAgICAgZm9sbG93ZWRCeTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBwb3N0V2l0aFVzZXJBbmRJbWFnZXMgPSBQcmlzbWEudmFsaWRhdG9yPFByaXNtYS5Qb3N0QXJncz4oKSh7XHJcbiAgaW5jbHVkZTogcG9zdERldGFpbHNJbmNsdWRlLFxyXG59KTtcclxuXHJcbnR5cGUgUG9zdFdpdGhVc2VyQW5kSW1hZ2VzID0gUHJpc21hLlBvc3RHZXRQYXlsb2FkPFxyXG4gIHR5cGVvZiBwb3N0V2l0aFVzZXJBbmRJbWFnZXNcclxuPjtcclxuXHJcbmV4cG9ydCB0eXBlIFBvc3RDYXJkUHJvcHMgPSBQb3N0V2l0aFVzZXJBbmRJbWFnZXM7XHJcblxyXG5jb25zdCBjb21tdW5pdGllc0xpc3QgPSBQcmlzbWEudmFsaWRhdG9yPFByaXNtYS5Db21tdW5pdHlBcmdzPigpKHtcclxuICBpbmNsdWRlOiBjb21tdW5pdHlMaXN0SW5jbHVkZSxcclxufSk7XHJcblxyXG50eXBlIENvbW11bml0aWVzTGlzdCA9IFByaXNtYS5Db21tdW5pdHlHZXRQYXlsb2FkPHR5cGVvZiBjb21tdW5pdGllc0xpc3Q+O1xyXG5cclxuY29uc3QgdXNlcnNMaXN0ID0gUHJpc21hLnZhbGlkYXRvcjxQcmlzbWEuVXNlckFyZ3M+KCkoe1xyXG4gIGluY2x1ZGU6IGdldFVzZXJzTGlzdEluY2x1ZGUoW10pLFxyXG59KTtcclxuXHJcbnR5cGUgVXNlcnNMaXN0VHlwZSA9IFByaXNtYS5Vc2VyR2V0UGF5bG9hZDx0eXBlb2YgdXNlcnNMaXN0PjtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1bGF0ZVVzZXJzTGlzdCA9IChcclxuICB1c2VyczogVXNlcnNMaXN0VHlwZVtdLFxyXG4gIG15Rm9sbG93aW5nSWRzOiBzdHJpbmdbXVxyXG4pID0+XHJcbiAgdXNlcnMubWFwKFxyXG4gICAgKHtcclxuICAgICAgX2NvdW50LFxyXG4gICAgICBiYW5uZXJJbWFnZSxcclxuICAgICAgZW1haWxWZXJpZmllZCxcclxuICAgICAgZm9sbG93ZWRCeSxcclxuICAgICAgaWQsXHJcbiAgICAgIC4uLnN1Z2dlc3RlZFVzZXJEYXRhXHJcbiAgICB9KSA9PiAoe1xyXG4gICAgICAuLi5zdWdnZXN0ZWRVc2VyRGF0YSxcclxuICAgICAgaWQsXHJcbiAgICAgIG11dHVhbFVzZXJzOiBmb2xsb3dlZEJ5LFxyXG4gICAgICBmb2xsb3dlcnNDb3VudDogX2NvdW50LmZvbGxvd2VkQnksXHJcbiAgICAgIGZvbGxvd2VkQnlNZTogbXlGb2xsb3dpbmdJZHMuc29tZSgoZm9sbG93KSA9PiBmb2xsb3cgPT09IGlkKSxcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1bGF0ZUNvbW11bml0aWVzTGlzdCA9IChcclxuICBjb21tdW5pdGllczogQ29tbXVuaXRpZXNMaXN0W10sXHJcbiAgdXNlcklkOiBzdHJpbmdcclxuKSA9PlxyXG4gIGNvbW11bml0aWVzLm1hcCgoeyBfY291bnQsIG1lbWJlcnMsIGZhdm91cml0ZUJ5LCAuLi5jb21tdW5pdHlEYXRhIH0pID0+ICh7XHJcbiAgICAuLi5jb21tdW5pdHlEYXRhLFxyXG4gICAgbWVtYmVyc0NvdW50OiBfY291bnQubWVtYmVycyxcclxuICAgIGpvaW5lZEJ5TWU6IG1lbWJlcnMuc29tZSgobWVtYmVyKSA9PiBtZW1iZXIudXNlcklkID09PSB1c2VySWQpLFxyXG4gICAgaXNNeWZhdm91cml0ZTogZmF2b3VyaXRlQnkuc29tZSgodXNlcikgPT4gdXNlci51c2VySWQgPT09IHVzZXJJZCksXHJcbiAgICBpc093bmVyOlxyXG4gICAgICBtZW1iZXJzLmZpbmQoKG1lbWJlcikgPT4gbWVtYmVyLnJvbGUgPT09ICdBRE1JTicpPy51c2VySWQgPT09IHVzZXJJZCxcclxuICB9KSk7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdWxhdGVQb3N0ID0gKFxyXG4gIHBvc3Q6IFBvc3RDYXJkUHJvcHMsXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgbXlGb2xsb3dpbmdJZHM6IHN0cmluZ1tdXHJcbikgPT4ge1xyXG4gIGNvbnN0IHtcclxuICAgIF9jb3VudCxcclxuICAgIGxpa2VzLFxyXG4gICAgYm9va21hcmtlZEJ5LFxyXG4gICAgdGFncyxcclxuICAgIGNvbW11bml0eSxcclxuICAgIGNvbW1lbnRzLFxyXG4gICAgbWVudGlvbnMsXHJcbiAgICBzaGFyZWRCeSxcclxuICAgIHVzZXI6IHsgYmlvLCBlbWFpbCwgZW1haWxWZXJpZmllZCwgLi4udXNlckRhdGEgfSxcclxuICAgIC4uLnBvc3REYXRhXHJcbiAgfSA9IHBvc3Q7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAuLi5wb3N0RGF0YSxcclxuICAgIHVzZXI6IHtcclxuICAgICAgLi4udXNlckRhdGEsXHJcbiAgICB9LFxyXG4gICAgc2hhcmVkQnk6IHNoYXJlZEJ5XHJcbiAgICAgIC5tYXAoKHVzZXJTaGFyZSkgPT4gdXNlclNoYXJlLnVzZXIpXHJcbiAgICAgIC5maWx0ZXIoKHVzZXIpID0+IG15Rm9sbG93aW5nSWRzLmluY2x1ZGVzKHVzZXIuaWQpKSxcclxuICAgIG1lbnRpb25zOiBtZW50aW9ucy5tYXAoKG1lbnRpb24pID0+IG1lbnRpb24udXNlciksXHJcbiAgICBjb21tdW5pdHlOYW1lOiBjb21tdW5pdHk/Lm5hbWUgfHwgbnVsbCxcclxuICAgIHRhZ3M6IHBvc3QudGFncy5tYXAoKHRhZykgPT4gdGFnLnRhZyksXHJcbiAgICBsaWtlc0NvdW50OiBfY291bnQubGlrZXMsXHJcbiAgICBjb21tZW50c0NvdW50OiBjb21tZW50cy5maWx0ZXIoKGNvbW1lbnQpID0+ICFjb21tZW50LmlzRGVsZXRlZCkubGVuZ3RoLFxyXG4gICAgc2hhcmVzQ291bnQ6IF9jb3VudC5zaGFyZXMgKyBzaGFyZWRCeS5sZW5ndGgsXHJcbiAgICBzaGFyZWRCeU1lOiBzaGFyZWRCeS5zb21lKCh1c2VyU2hhcmUpID0+IHVzZXJTaGFyZS51c2VyLmlkID09PSB1c2VySWQpLFxyXG4gICAgbGlrZWRCeU1lOiBsaWtlcy5zb21lKChwb3N0TGlrZSkgPT4gcG9zdExpa2UudXNlcklkID09PSB1c2VySWQpLFxyXG4gICAgYm9va21hcmtlZEJ5TWU6IGJvb2ttYXJrZWRCeS5zb21lKChib29rbWFyaykgPT4gYm9va21hcmsudXNlcklkID09PSB1c2VySWQpLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBleHBvcnQgY29uc3Qgc3dhcFJlcG9zdFdpdGhPcmlnaW5hbCA9IGFzeW5jIChwb3N0OiBQb3N0Q2FyZFByb3BzKSA9PiB7XHJcbi8vICAgaWYgKHBvc3QuaXNRdW90ZVNoYXJlICE9PSBmYWxzZSkgcmV0dXJuIHsgLi4ucG9zdCwgcmVQb3N0ZWRCeTogbnVsbCB9O1xyXG5cclxuLy8gICBjb25zdCBwYXJlbnRQb3N0ID0gYXdhaXQgcHJpc21hLnBvc3QuZmluZFVuaXF1ZSh7XHJcbi8vICAgICB3aGVyZToge1xyXG4vLyAgICAgICBpZDogcG9zdC5zaGFyZVBhcmVudElkISxcclxuLy8gICAgIH0sXHJcbi8vICAgICBpbmNsdWRlOiBwb3N0RGV0YWlsc0luY2x1ZGUsXHJcbi8vICAgfSk7XHJcblxyXG4vLyAgIHJldHVybiBwYXJlbnRQb3N0XHJcbi8vICAgICA/IHsgLi4ucGFyZW50UG9zdCwgcmVQb3N0ZWRCeTogbnVsbCB9XHJcbi8vICAgICA6IHsgLi4ucG9zdCwgcmVQb3N0ZWRCeTogcG9zdC51c2VyIH07XHJcbi8vIH07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TXlGb2xsb3dpbmdJZHMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBteUZvbGxvd2luZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB7XHJcbiAgICAgIGZvbGxvd2VkQnk6IHtcclxuICAgICAgICBzb21lOiB7XHJcbiAgICAgICAgICBpZDogdXNlcklkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gbXlGb2xsb3dpbmcubWFwKCh1c2VyKSA9PiB1c2VyLmlkKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXREYXRlWERheXNBZ28gPSAobnVtT2ZEYXlzOiBudW1iZXIsIGRhdGUgPSBuZXcgRGF0ZSgpKSA9PiB7XHJcbiAgY29uc3QgZGF5c0FnbyA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcclxuICBkYXlzQWdvLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBudW1PZkRheXMpO1xyXG5cclxuICByZXR1cm4gZGF5c0FnbztcclxufTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYSIsInByaXNtYSIsInBvc3REZXRhaWxzSW5jbHVkZSIsImltYWdlcyIsInRhZ3MiLCJpbmNsdWRlIiwidGFnIiwiY29tbWVudHMiLCJzZWxlY3QiLCJpc0RlbGV0ZWQiLCJ1c2VyIiwiX2NvdW50IiwibGlrZXMiLCJjb21tdW5pdHkiLCJuYW1lIiwic2hhcmVkQnkiLCJpZCIsIm1lbnRpb25zIiwiYm9va21hcmtlZEJ5Iiwic2hhcmVQYXJlbnQiLCJpbWFnZSIsImNvbW11bml0eUxpc3RJbmNsdWRlIiwiY2F0ZWdvcnkiLCJtZW1iZXJzIiwidXNlcklkIiwicm9sZSIsImZhdm91cml0ZUJ5IiwiZ2V0VXNlcnNMaXN0SW5jbHVkZSIsIm15Rm9sbG93aW5nSWRzIiwiZm9sbG93ZWRCeSIsIndoZXJlIiwiaW4iLCJwb3N0V2l0aFVzZXJBbmRJbWFnZXMiLCJ2YWxpZGF0b3IiLCJjb21tdW5pdGllc0xpc3QiLCJ1c2Vyc0xpc3QiLCJwb3B1bGF0ZVVzZXJzTGlzdCIsInVzZXJzIiwibWFwIiwiYmFubmVySW1hZ2UiLCJlbWFpbFZlcmlmaWVkIiwic3VnZ2VzdGVkVXNlckRhdGEiLCJtdXR1YWxVc2VycyIsImZvbGxvd2Vyc0NvdW50IiwiZm9sbG93ZWRCeU1lIiwic29tZSIsImZvbGxvdyIsInBvcHVsYXRlQ29tbXVuaXRpZXNMaXN0IiwiY29tbXVuaXRpZXMiLCJjb21tdW5pdHlEYXRhIiwibWVtYmVyc0NvdW50Iiwiam9pbmVkQnlNZSIsIm1lbWJlciIsImlzTXlmYXZvdXJpdGUiLCJpc093bmVyIiwiZmluZCIsInBvcHVsYXRlUG9zdCIsInBvc3QiLCJiaW8iLCJlbWFpbCIsInVzZXJEYXRhIiwicG9zdERhdGEiLCJ1c2VyU2hhcmUiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsIm1lbnRpb24iLCJjb21tdW5pdHlOYW1lIiwibGlrZXNDb3VudCIsImNvbW1lbnRzQ291bnQiLCJjb21tZW50IiwibGVuZ3RoIiwic2hhcmVzQ291bnQiLCJzaGFyZXMiLCJzaGFyZWRCeU1lIiwibGlrZWRCeU1lIiwicG9zdExpa2UiLCJib29rbWFya2VkQnlNZSIsImJvb2ttYXJrIiwiZ2V0TXlGb2xsb3dpbmdJZHMiLCJteUZvbGxvd2luZyIsImZpbmRNYW55IiwiZ2V0RGF0ZVhEYXlzQWdvIiwibnVtT2ZEYXlzIiwiZGF0ZSIsIkRhdGUiLCJkYXlzQWdvIiwiZ2V0VGltZSIsInNldERhdGUiLCJnZXREYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/router/utils.ts\n");

/***/ }),

/***/ "(api)/./src/env/client.mjs":
/*!****************************!*\
  !*** ./src/env/client.mjs ***!
  \****************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"env\": () => (/* binding */ env),\n/* harmony export */   \"formatErrors\": () => (/* binding */ formatErrors)\n/* harmony export */ });\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema.mjs */ \"(api)/./src/env/schema.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_schema_mjs__WEBPACK_IMPORTED_MODULE_0__]);\n_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// @ts-check\n\nconst _clientEnv = _schema_mjs__WEBPACK_IMPORTED_MODULE_0__.clientSchema.safeParse(_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.clientEnv);\nconst formatErrors = (/** @type {import('zod').ZodFormattedError<Map<string,string>,string>} */ errors)=>Object.entries(errors).map(([name, value])=>{\n        if (value && \"_errors\" in value) return `${name}: ${value._errors.join(\", \")}\\n`;\n    }).filter(Boolean);\nif (!_clientEnv.success) {\n    console.error(\" Invalid environment variables:\\n\", ...formatErrors(_clientEnv.error.format()));\n    throw new Error(\"Invalid environment variables\");\n}\n/**\r\n * Validate that client-side environment variables are exposed to the client.\r\n */ for (const key of Object.keys(_clientEnv.data)){\n    if (!key.startsWith(\"NEXT_PUBLIC_\")) {\n        console.warn(\" Invalid public environment variable name:\", key);\n        throw new Error(\"Invalid public environment variable name\");\n    }\n}\nconst env = _clientEnv.data;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZW52L2NsaWVudC5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUMyQztBQUV2RCxNQUFNRSxVQUFVLEdBQUdELCtEQUFzQixDQUFDRCxrREFBUyxDQUFDO0FBRTdDLE1BQU1JLFlBQVksR0FBRyxDQUMxQix5RUFBeUUsQ0FDekVDLE1BQU0sR0FFTkMsTUFBTSxDQUFDQyxPQUFPLENBQUNGLE1BQU0sQ0FBQyxDQUNuQkcsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxFQUFFQyxLQUFLLENBQUMsR0FBSztRQUN0QixJQUFJQSxLQUFLLElBQUksU0FBUyxJQUFJQSxLQUFLLEVBQzdCLE9BQU8sQ0FBQyxFQUFFRCxJQUFJLENBQUMsRUFBRSxFQUFFQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ25ELENBQUMsQ0FDREMsTUFBTSxDQUFDQyxPQUFPLENBQUMsQ0FBQztBQUVyQixJQUFJLENBQUNaLFVBQVUsQ0FBQ2EsT0FBTyxFQUFFO0lBQ3ZCQyxPQUFPLENBQUNDLEtBQUssQ0FDWCxvQ0FBb0MsS0FDakNiLFlBQVksQ0FBQ0YsVUFBVSxDQUFDZSxLQUFLLENBQUNDLE1BQU0sRUFBRSxDQUFDLENBQzNDLENBQUM7SUFDRixNQUFNLElBQUlDLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0NBQ2xEO0FBRUQ7SUFJRSxJQUFJLENBQUNDLEdBQUcsQ0FBQ0csVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1FBQ25DUCxPQUFPLENBQUNRLElBQUksQ0FBQztRQUViLE1BQU0sSUFBSUwsS0FBSyxDQUFDO0tBQ2pCO0NBQ0Y7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL2Vudi9jbGllbnQubWpzPzY1YTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWNoZWNrXHJcbmltcG9ydCB7IGNsaWVudEVudiwgY2xpZW50U2NoZW1hIH0gZnJvbSAnLi9zY2hlbWEubWpzJztcclxuXHJcbmNvbnN0IF9jbGllbnRFbnYgPSBjbGllbnRTY2hlbWEuc2FmZVBhcnNlKGNsaWVudEVudik7XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybWF0RXJyb3JzID0gKFxyXG4gIC8qKiBAdHlwZSB7aW1wb3J0KCd6b2QnKS5ab2RGb3JtYXR0ZWRFcnJvcjxNYXA8c3RyaW5nLHN0cmluZz4sc3RyaW5nPn0gKi9cclxuICBlcnJvcnNcclxuKSA9PlxyXG4gIE9iamVjdC5lbnRyaWVzKGVycm9ycylcclxuICAgIC5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IHtcclxuICAgICAgaWYgKHZhbHVlICYmICdfZXJyb3JzJyBpbiB2YWx1ZSlcclxuICAgICAgICByZXR1cm4gYCR7bmFtZX06ICR7dmFsdWUuX2Vycm9ycy5qb2luKCcsICcpfVxcbmA7XHJcbiAgICB9KVxyXG4gICAgLmZpbHRlcihCb29sZWFuKTtcclxuXHJcbmlmICghX2NsaWVudEVudi5zdWNjZXNzKSB7XHJcbiAgY29uc29sZS5lcnJvcihcclxuICAgICfinYwgSW52YWxpZCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6XFxuJyxcclxuICAgIC4uLmZvcm1hdEVycm9ycyhfY2xpZW50RW52LmVycm9yLmZvcm1hdCgpKVxyXG4gICk7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgdGhhdCBjbGllbnQtc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIGV4cG9zZWQgdG8gdGhlIGNsaWVudC5cclxuICovXHJcbmZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKF9jbGllbnRFbnYuZGF0YSkpIHtcclxuICBpZiAoIWtleS5zdGFydHNXaXRoKCdORVhUX1BVQkxJQ18nKSkge1xyXG4gICAgY29uc29sZS53YXJuKCfinYwgSW52YWxpZCBwdWJsaWMgZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZTonLCBrZXkpO1xyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwdWJsaWMgZW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZScpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVudiA9IF9jbGllbnRFbnYuZGF0YTtcclxuIl0sIm5hbWVzIjpbImNsaWVudEVudiIsImNsaWVudFNjaGVtYSIsIl9jbGllbnRFbnYiLCJzYWZlUGFyc2UiLCJmb3JtYXRFcnJvcnMiLCJlcnJvcnMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwibmFtZSIsInZhbHVlIiwiX2Vycm9ycyIsImpvaW4iLCJmaWx0ZXIiLCJCb29sZWFuIiwic3VjY2VzcyIsImNvbnNvbGUiLCJlcnJvciIsImZvcm1hdCIsIkVycm9yIiwia2V5Iiwia2V5cyIsImRhdGEiLCJzdGFydHNXaXRoIiwid2FybiIsImVudiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/env/client.mjs\n");

/***/ }),

/***/ "(api)/./src/env/schema.mjs":
/*!****************************!*\
  !*** ./src/env/schema.mjs ***!
  \****************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clientEnv\": () => (/* binding */ clientEnv),\n/* harmony export */   \"clientSchema\": () => (/* binding */ clientSchema),\n/* harmony export */   \"serverSchema\": () => (/* binding */ serverSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// @ts-check\n\n/**\r\n * Specify your server-side environment variables schema here.\r\n * This way you can ensure the app isn't built with invalid env vars.\r\n */ const serverSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    DATABASE_URL: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url(),\n    NODE_ENV: zod__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n        \"development\",\n        \"test\",\n        \"production\"\n    ]),\n    NEXTAUTH_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    // NEXTAUTH_URL: z.string().url(),\n    GOOGLE_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    GOOGLE_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    GITHUB_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    GITHUB_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_SERVER: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_SERVER_USER: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_SERVER_PASSWORD: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_SERVER_HOST: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_SERVER_PORT: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    EMAIL_FROM: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\n/**\r\n * Specify your client-side environment variables schema here.\r\n * This way you can ensure the app isn't built with invalid env vars.\r\n * To expose them to the client, prefix them with `NEXT_PUBLIC_`.\r\n */ const clientSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n});\n/**\r\n * You can't destruct `process.env` as a regular object, so you have to do\r\n * it manually here. This is because Next.js evaluates this at build time,\r\n * and only used environment variables are included in the build.\r\n * @type {{ [k in keyof z.infer<typeof clientSchema>]: z.infer<typeof clientSchema>[k] | undefined }}\r\n */ const clientEnv = {\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZW52L3NjaGVtYS5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLFlBQVk7QUFDWTtBQUV4QjtJQUtFRyxZQUFZLEVBQUVILENBQUMsQ0FBQ0ksTUFBTSxFQUFFLENBQUNDLEdBQUcsRUFBRTtJQUM5QkMsUUFBUSxFQUFFTixDQUFDLENBQUNPLElBQUksQ0FBQztJQUFDLFVBQWE7UUFBRSxNQUFNO1FBQUUsZ0RBQVk7S0FBQyxDQUFDO0lBQ3ZEQztJQUNBO0lBQ0FDO0lBQ0FDLGlCQUFBQSx5Q0FBd0JOO0lBQ3hCTyxnQkFBZ0IsRUFBRVgsQ0FBQyxDQUFDSSxNQUFNLEVBQUU7SUFDNUJRLGtCQUFBQSx5Q0FBd0JSO0lBQ3hCUyxZQUFZLEVBQUViLENBQUMsQ0FBQ0ksTUFBTSx5Q0FBRTtJQUN4QlUsaUJBQWlCLDBDQUFJVixDQUFNLEVBQUU7SUFDN0JXLHFCQUFxQiwwQ0FBSVgsQ0FBTSxFQUFFO0lBQ2pDWSxjQUFBQSx5Q0FBcUJaO0lBQ3JCYSxpQkFBaUIsRUFBRWpCLHlDQUFRLEVBQUU7SUFDN0JrQixVQUFVLEVBQUVsQixDQUFDLENBQUNJLE1BQU0sRUFBRTtDQUN2QixDQUFDLENBQUM7QUFFSDtDQU9DLENBQUMsQ0FBQztBQUVIO0NBUUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL2Vudi9zY2hlbWEubWpzPzQyMjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWNoZWNrXHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuLyoqXHJcbiAqIFNwZWNpZnkgeW91ciBzZXJ2ZXItc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgc2NoZW1hIGhlcmUuXHJcbiAqIFRoaXMgd2F5IHlvdSBjYW4gZW5zdXJlIHRoZSBhcHAgaXNuJ3QgYnVpbHQgd2l0aCBpbnZhbGlkIGVudiB2YXJzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNlcnZlclNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBEQVRBQkFTRV9VUkw6IHouc3RyaW5nKCkudXJsKCksXHJcbiAgTk9ERV9FTlY6IHouZW51bShbJ2RldmVsb3BtZW50JywgJ3Rlc3QnLCAncHJvZHVjdGlvbiddKSxcclxuICBORVhUQVVUSF9TRUNSRVQ6IHouc3RyaW5nKCksXHJcbiAgLy8gTkVYVEFVVEhfVVJMOiB6LnN0cmluZygpLnVybCgpLFxyXG4gIEdPT0dMRV9DTElFTlRfSUQ6IHouc3RyaW5nKCksXHJcbiAgR09PR0xFX0NMSUVOVF9TRUNSRVQ6IHouc3RyaW5nKCksXHJcbiAgR0lUSFVCX0NMSUVOVF9JRDogei5zdHJpbmcoKSxcclxuICBHSVRIVUJfQ0xJRU5UX1NFQ1JFVDogei5zdHJpbmcoKSxcclxuICBFTUFJTF9TRVJWRVI6IHouc3RyaW5nKCksXHJcbiAgRU1BSUxfU0VSVkVSX1VTRVI6IHouc3RyaW5nKCksXHJcbiAgRU1BSUxfU0VSVkVSX1BBU1NXT1JEOiB6LnN0cmluZygpLFxyXG4gIEVNQUlMX1NFUlZFUl9IT1NUOiB6LnN0cmluZygpLFxyXG4gIEVNQUlMX1NFUlZFUl9QT1JUOiB6LnN0cmluZygpLFxyXG4gIEVNQUlMX0ZST006IHouc3RyaW5nKCksXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFNwZWNpZnkgeW91ciBjbGllbnQtc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgc2NoZW1hIGhlcmUuXHJcbiAqIFRoaXMgd2F5IHlvdSBjYW4gZW5zdXJlIHRoZSBhcHAgaXNuJ3QgYnVpbHQgd2l0aCBpbnZhbGlkIGVudiB2YXJzLlxyXG4gKiBUbyBleHBvc2UgdGhlbSB0byB0aGUgY2xpZW50LCBwcmVmaXggdGhlbSB3aXRoIGBORVhUX1BVQkxJQ19gLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNsaWVudFNjaGVtYSA9IHoub2JqZWN0KHtcclxuICAvLyBORVhUX1BVQkxJQ19CQVI6IHouc3RyaW5nKCksXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFlvdSBjYW4ndCBkZXN0cnVjdCBgcHJvY2Vzcy5lbnZgIGFzIGEgcmVndWxhciBvYmplY3QsIHNvIHlvdSBoYXZlIHRvIGRvXHJcbiAqIGl0IG1hbnVhbGx5IGhlcmUuIFRoaXMgaXMgYmVjYXVzZSBOZXh0LmpzIGV2YWx1YXRlcyB0aGlzIGF0IGJ1aWxkIHRpbWUsXHJcbiAqIGFuZCBvbmx5IHVzZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBpbmNsdWRlZCBpbiB0aGUgYnVpbGQuXHJcbiAqIEB0eXBlIHt7IFtrIGluIGtleW9mIHouaW5mZXI8dHlwZW9mIGNsaWVudFNjaGVtYT5dOiB6LmluZmVyPHR5cGVvZiBjbGllbnRTY2hlbWE+W2tdIHwgdW5kZWZpbmVkIH19XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY2xpZW50RW52ID0ge1xyXG4gIC8vIE5FWFRfUFVCTElDX0JBUjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFSLFxyXG59O1xyXG4iXSwibmFtZXMiOlsieiIsInNlcnZlclNjaGVtYSIsIm9iamVjdCIsIkRBVEFCQVNFX1VSTCIsInN0cmluZyIsInVybCIsIk5PREVfRU5WIiwiZW51bSIsIk5FWFRBVVRIX1NFQ1JFVCIsIkdPT0dMRV9DTElFTlRfSUQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsIkdJVEhVQl9DTElFTlRfSUQiLCJHSVRIVUJfQ0xJRU5UX1NFQ1JFVCIsIkVNQUlMX1NFUlZFUiIsIkVNQUlMX1NFUlZFUl9VU0VSIiwiRU1BSUxfU0VSVkVSX1BBU1NXT1JEIiwiRU1BSUxfU0VSVkVSX0hPU1QiLCJFTUFJTF9TRVJWRVJfUE9SVCIsIkVNQUlMX0ZST00iLCJjbGllbnRTY2hlbWEiLCJjbGllbnRFbnYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/env/schema.mjs\n");

/***/ }),

/***/ "(api)/./src/env/server.mjs":
/*!****************************!*\
  !*** ./src/env/server.mjs ***!
  \****************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"env\": () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema.mjs */ \"(api)/./src/env/schema.mjs\");\n/* harmony import */ var _client_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.mjs */ \"(api)/./src/env/client.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_schema_mjs__WEBPACK_IMPORTED_MODULE_0__, _client_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n([_schema_mjs__WEBPACK_IMPORTED_MODULE_0__, _client_mjs__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// @ts-check\n/**\r\n * This file is included in `/next.config.mjs` which ensures the app isn't built with invalid env vars.\r\n * It has to be a `.mjs`-file to be imported there.\r\n */ \n\nconst _serverEnv = _schema_mjs__WEBPACK_IMPORTED_MODULE_0__.serverSchema.safeParse(process.env);\nif (!_serverEnv.success) {\n    console.error(\" Invalid environment variables:\\n\", ...(0,_client_mjs__WEBPACK_IMPORTED_MODULE_1__.formatErrors)(_serverEnv.error.format()));\n    throw new Error(\"Invalid environment variables\");\n}\n/**\r\n * Validate that server-side environment variables are not exposed to the client.\r\n */ for (let key of Object.keys(_serverEnv.data)){\n    if (key.startsWith(\"NEXT_PUBLIC_\")) {\n        console.warn(\" You are exposing a server-side env-variable:\", key);\n        throw new Error(\"You are exposing a server-side env-variable\");\n    }\n}\nconst env = {\n    ..._serverEnv.data,\n    ..._client_mjs__WEBPACK_IMPORTED_MODULE_1__.env\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZW52L3NlcnZlci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUNaO0FBS0EsU0FBU0MsR0FBRyxJQUFJQyxTQUFTLEVBQUVDLFlBQVksUUFBUSxjQUFjLENBQUM7QUFFOUQsTUFBTUMsVUFBVSxHQUFHSixZQUFZLENBQUNLLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDTDtBQUVsRCxJQUF5QjtBQUdsQkU7SUFFTCxNQUFNLElBQUlRLEtBQUssK0RBQUMsVUFBK0IsQ0FBQyxDQUFDO0NBQ2xEO0FBRUQsd0lBRUcsQ0FDSCxLQUFLO0lBQ0gsSUFBSUMsR0FBRyxDQUFDSSxVQUFVLENBQUMsY0FBYyxDQUFDLEVBQUU7OztLQUluQztDQUNGO0FBRUQsT0FBTyxNQUFNZixHQUFHLEdBQUc7SUFBRSxHQUFHRyxVQUFVLENBQUNXLElBQUk7SUFBRSxHQUFHYixTQUFTO0NBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUtbmV3Ly4vc3JjL2Vudi9zZXJ2ZXIubWpzP2IwMjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWNoZWNrXHJcbi8qKlxyXG4gKiBUaGlzIGZpbGUgaXMgaW5jbHVkZWQgaW4gYC9uZXh0LmNvbmZpZy5tanNgIHdoaWNoIGVuc3VyZXMgdGhlIGFwcCBpc24ndCBidWlsdCB3aXRoIGludmFsaWQgZW52IHZhcnMuXHJcbiAqIEl0IGhhcyB0byBiZSBhIGAubWpzYC1maWxlIHRvIGJlIGltcG9ydGVkIHRoZXJlLlxyXG4gKi9cclxuaW1wb3J0IHsgc2VydmVyU2NoZW1hIH0gZnJvbSAnLi9zY2hlbWEubWpzJztcclxuaW1wb3J0IHsgZW52IGFzIGNsaWVudEVudiwgZm9ybWF0RXJyb3JzIH0gZnJvbSAnLi9jbGllbnQubWpzJztcclxuXHJcbmNvbnN0IF9zZXJ2ZXJFbnYgPSBzZXJ2ZXJTY2hlbWEuc2FmZVBhcnNlKHByb2Nlc3MuZW52KTtcclxuXHJcbmlmICghX3NlcnZlckVudi5zdWNjZXNzKSB7XHJcbiAgY29uc29sZS5lcnJvcihcclxuICAgICfinYwgSW52YWxpZCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6XFxuJyxcclxuICAgIC4uLmZvcm1hdEVycm9ycyhfc2VydmVyRW52LmVycm9yLmZvcm1hdCgpKVxyXG4gICk7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgdGhhdCBzZXJ2ZXItc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIG5vdCBleHBvc2VkIHRvIHRoZSBjbGllbnQuXHJcbiAqL1xyXG5mb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoX3NlcnZlckVudi5kYXRhKSkge1xyXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnTkVYVF9QVUJMSUNfJykpIHtcclxuICAgIGNvbnNvbGUud2Fybign4p2MIFlvdSBhcmUgZXhwb3NpbmcgYSBzZXJ2ZXItc2lkZSBlbnYtdmFyaWFibGU6Jywga2V5KTtcclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgZXhwb3NpbmcgYSBzZXJ2ZXItc2lkZSBlbnYtdmFyaWFibGUnKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlbnYgPSB7IC4uLl9zZXJ2ZXJFbnYuZGF0YSwgLi4uY2xpZW50RW52IH07XHJcbiJdLCJuYW1lcyI6WyJzZXJ2ZXJTY2hlbWEiLCJlbnYiLCJjbGllbnRFbnYiLCJmb3JtYXRFcnJvcnMiLCJfc2VydmVyRW52Iiwic2FmZVBhcnNlIiwicHJvY2VzcyIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiZXJyb3IiLCJmb3JtYXQiLCJFcnJvciIsImtleSIsIk9iamVjdCIsImtleXMiLCJkYXRhIiwic3RhcnRzV2l0aCIsIndhcm4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/env/server.mjs\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/trpc/[trpc].ts"));
module.exports = __webpack_exports__;

})();